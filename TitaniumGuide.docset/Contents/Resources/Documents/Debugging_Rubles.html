<!-- single file version -->
<!DOCTYPE html>
<html>
<head>
  <link href="css/github.css" rel="stylesheet" type="text/css">
  <link href="resources/css/common.css" rel="stylesheet" type="text/css">
  <meta charset="utf-8" />
</head>
<body>

<div class="container">
<div class="header"></div>
<div id="30083234" class="content">
<h1>Debugging Rubles</h1>
<div class="section section-2 " id="30083234_DebuggingRubles-Contents">
<h2 class="heading "><span>Contents</span></h2>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Overview" debugging_rubles.html#30083234_debuggingrubles-overview="Debugging_Rubles.html#30083234_DebuggingRubles-Overview">Overview</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Writingtotheconsole" debugging_rubles.html#30083234_debuggingrubles-writingtotheconsole="Debugging_Rubles.html#30083234_DebuggingRubles-Writingtotheconsole">Writing to the console</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Setthethelogginglevel" debugging_rubles.html#30083234_debuggingrubles-setthethelogginglevel="Debugging_Rubles.html#30083234_DebuggingRubles-Setthethelogginglevel">Set the the logging level</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Loggingtotheconsole" debugging_rubles.html#30083234_debuggingrubles-loggingtotheconsole="Debugging_Rubles.html#30083234_DebuggingRubles-Loggingtotheconsole">Logging to the console</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Writingoutproperties" debugging_rubles.html#30083234_debuggingrubles-writingoutproperties="Debugging_Rubles.html#30083234_DebuggingRubles-Writingoutproperties">Writing out properties</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Writingoutavailablemethods" debugging_rubles.html#30083234_debuggingrubles-writingoutavailablemethods="Debugging_Rubles.html#30083234_DebuggingRubles-Writingoutavailablemethods">Writing out available methods</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Debugging_Rubles-section-30083234_DebuggingRubles-Disablingcaching" debugging_rubles.html#30083234_debuggingrubles-disablingcaching="Debugging_Rubles.html#30083234_DebuggingRubles-Disablingcaching">Disabling caching</a> </p>
</li></ul> </div>
<div class="section section-2 " id="30083234_DebuggingRubles-Overview">
<h2 class="heading "><span>Overview</span></h2>
<p>
Debugging is a bit of a misnomer, as currently you can only really set trace output. Proper debugging is currently on the TODO list, but not yet available.    </p>
</div>
<div class="section section-2 " id="30083234_DebuggingRubles-Writingtotheconsole">
<h2 class="heading "><span>Writing to the console</span></h2>
<p>
You can write directly to the Scripting Console by using <tt class=" ">CONSOLE.puts</tt>, i.e.:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">CONSOLE.puts </code><code class="string">&quot;Hello!&quot;</code></div>
</div>
</div> </div>
<div class="section section-2 " id="30083234_DebuggingRubles-Setthethelogginglevel">
<h2 class="heading "><span>Set the the logging level</span></h2>
<p>
You can set the logging level in script:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">Ruble::Logger.log_level = :trace</code></div>
</div>
</div> <p>
Logging levels are:    </p>
<ul class=" "><li class=" "> <p>
none    </p>
</li><li class=" "> <p>
trace    </p>
</li><li class=" "> <p>
info    </p>
</li><li class=" "> <p>
warning    </p>
</li><li class=" "> <p>
error    </p>
</li></ul> <p>
You might add this at the top of your file. With broader logging levels containing all the content from more restrictive ones (i.e. trace contains info, warning and error as well).    </p>
<p>
Output will be put to the Scripting Console, and is theme-able as per the regular theme guidelines for &quot;console&quot; scopes.    </p>
<div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
<p>
</p>
<p>
The logging level will persist at the newly set level until it is explicitly changed again.    </p>
</div>
</div>
<div class="section section-2 " id="30083234_DebuggingRubles-Loggingtotheconsole">
<h2 class="heading "><span>Logging to the console</span></h2>
<p>
A example of turning on logging, and writing out trace, info, warning, and error messages.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">require </code><code class="string">&apos;ruble&apos;</code></div>
<div class="line"><code class="plain">require </code><code class="string">&apos;ruble/ui&apos;</code></div>
<div class="line"><code class="plain">Ruble::Logger.log_level = :trace</code></div>
<div class="line"><code class="plain">command </code><code class="string">&apos;Tidy&apos;</code><code class="plain"> </code><code class="keyword">do</code><code class="plain"> |cmd|</code></div>
<div class="line"><code class="plain">  cmd.output = :replace_document</code></div>
<div class="line"><code class="plain">  cmd.input = :document</code></div>
<div class="line"><code class="plain">  cmd.invoke </code><code class="keyword">do</code><code class="plain"> |context|</code></div>
<div class="line"><code class="plain">    Ruble::Logger.trace </code><code class="string">&quot;trace&quot;</code></div>
<div class="line"><code class="plain">    Ruble::Logger.log_info </code><code class="string">&quot;Info&quot;</code></div>
<div class="line"><code class="plain">    Ruble::Logger.log_warning </code><code class="string">&quot;Warning&quot;</code></div>
<div class="line"><code class="plain">    Ruble::Logger.log_error </code><code class="string">&quot;Error&quot;</code></div>
<div class="line"><code class="plain">  end</code></div>
<div class="line"><code class="plain">end</code></div>
</div>
</div> </div>
<div class="section section-2 " id="30083234_DebuggingRubles-Writingoutproperties">
<h2 class="heading "><span>Writing out properties</span></h2>
<p>
It&apos;s sometimes helpful to write out the properties of the current context object. An example of doing so:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">command </code><code class="string">&quot;Print Context Properties&quot;</code><code class="plain"> </code><code class="keyword">do</code><code class="plain"> |cmd|</code></div>
<div class="line"><code class="plain">  cmd.invoke </code><code class="keyword">do</code><code class="plain"> |context|</code></div>
<div class="line"><code class="plain">    context.dynamic_properties.each { |k| CONSOLE.puts </code><code class="string">&quot;#{k}\n&quot;</code><code class="plain"> }</code></div>
<div class="line"><code class="plain">  end</code></div>
<div class="line"><code class="plain">end</code></div>
</div>
</div> <p>
prints:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">project</code></div>
<div class="line"><code class="plain">editor</code></div>
<div class="line"><code class="plain">input_type</code></div>
<div class="line"><code class="plain">browser</code></div>
<div class="line"><code class="plain">command</code></div>
<div class="line"><code class="plain">bundle</code></div>
<div class="line"><code class="plain">TM_SELECTED_FILES</code></div>
<div class="line"><code class="plain">1316024714117_env</code></div>
<div class="line"><code class="plain">test_property</code></div>
<div class="line"><code class="plain">invoked_via</code></div>
</div>
</div> </div>
<div class="section section-2 " id="30083234_DebuggingRubles-Writingoutavailablemethods">
<h2 class="heading "><span>Writing out available methods</span></h2>
<p>
It&apos;s also sometimes useful to write out the methods available on a particular object, i.e.:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">command </code><code class="string">&quot;Print Document Methods&quot;</code><code class="plain"> </code><code class="keyword">do</code><code class="plain"> |cmd|</code></div>
<div class="line"><code class="plain">  cmd.invoke </code><code class="keyword">do</code><code class="plain"> |context|</code></div>
<div class="line"><code class="plain">    CONSOLE.puts context.editor.document.public_methods(</code><code class="keyword">true</code><code class="plain">).sort</code></div>
<div class="line"><code class="plain">  end</code></div>
<div class="line"><code class="plain">end</code></div>
</div>
</div> </div>
<div class="section section-2 " id="30083234_DebuggingRubles-Disablingcaching">
<h2 class="heading "><span>Disabling caching</span></h2>
<p>
In order to speed up bundle loading, we cache the overall structure of the bundle. This can cause problems on some versions of Windows, where a user might not see any changes until they restart Studio. To disable caching, please follow the instructions <a class="document-link " href="#!/guide/Disable_Ruble_Caching" disable_ruble_caching.html="Disable_Ruble_Caching.html">here</a>.    </p>
</div>
</div>

</div>

</body>
</html>