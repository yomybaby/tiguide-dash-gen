<!-- single file version -->
<!DOCTYPE html>
<html>
<head>
  <link href="css/github.css" rel="stylesheet" type="text/css">
  <link href="resources/css/common.css" rel="stylesheet" type="text/css">
  <meta charset="utf-8" />
</head>
<body>

<div class="container">
<div class="header"></div>
<div id="30083149" class="content">
<h1>Source Code Conventions</h1>
<p>
For those contributing to the Aptana source code base, we follow a few conventions.    </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-CodeSubmissionChecklist" source_code_conventions.html#30083149_sourcecodeconventions-codesubmissionchecklist="Source_Code_Conventions.html#30083149_SourceCodeConventions-CodeSubmissionChecklist">Code Submission Checklist</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-BasicCodingGuidelines" source_code_conventions.html#30083149_sourcecodeconventions-basiccodingguidelines="Source_Code_Conventions.html#30083149_SourceCodeConventions-BasicCodingGuidelines">Basic Coding Guidelines</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-NamingConventions" source_code_conventions.html#30083149_sourcecodeconventions-namingconventions="Source_Code_Conventions.html#30083149_SourceCodeConventions-NamingConventions">Naming Conventions</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-License" source_code_conventions.html#30083149_sourcecodeconventions-license="Source_Code_Conventions.html#30083149_SourceCodeConventions-License">License</a> </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-GPL" source_code_conventions.html#30083149_sourcecodeconventions-gpl="Source_Code_Conventions.html#30083149_SourceCodeConventions-GPL">GPL</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-EPL" source_code_conventions.html#30083149_sourcecodeconventions-epl="Source_Code_Conventions.html#30083149_SourceCodeConventions-EPL">EPL</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-PrivateCode" source_code_conventions.html#30083149_sourcecodeconventions-privatecode="Source_Code_Conventions.html#30083149_SourceCodeConventions-PrivateCode">Private Code</a> </p>
</li></ul></li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-PMD" source_code_conventions.html#30083149_sourcecodeconventions-pmd="Source_Code_Conventions.html#30083149_SourceCodeConventions-PMD">PMD</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-JavaFormatting" source_code_conventions.html#30083149_sourcecodeconventions-javaformatting="Source_Code_Conventions.html#30083149_SourceCodeConventions-JavaFormatting">Java Formatting</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-ExternalizedStrings" source_code_conventions.html#30083149_sourcecodeconventions-externalizedstrings="Source_Code_Conventions.html#30083149_SourceCodeConventions-ExternalizedStrings">Externalized Strings</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Source_Code_Conventions-section-30083149_SourceCodeConventions-UnitTesting" source_code_conventions.html#30083149_sourcecodeconventions-unittesting="Source_Code_Conventions.html#30083149_SourceCodeConventions-UnitTesting">Unit Testing</a> </p>
</li></ul> <div class="section section-2 " id="30083149_SourceCodeConventions-CodeSubmissionChecklist">
<h2 class="heading "><span>Code Submission Checklist</span></h2>
<ul class=" "><li class=" "> <p>
License header at top of file    </p>
</li><li class=" "> <p>
Code passes all Checkstyle checks    </p>
</li><li class=" "> <p>
Code passes all PMD tests    </p>
</li><li class=" "> <p>
Code is formatted according to Aptana conventions    </p>
</li><li class=" "> <p>
Strings are externalized    </p>
</li><li class=" "> <p>
Code is spell-checked    </p>
</li><li class=" "> <p>
Code has class/method and field-level Java Docs for public and protected members    </p>
</li><li class=" "> <p>
There is at least one unit test for the checked-in code, preferably that does not need to run as a plugin.. Comments should be <i class=" ">relevant</i> </p>
</li></ul> </div>
<div class="section section-2 " id="30083149_SourceCodeConventions-BasicCodingGuidelines">
<h2 class="heading "><span>Basic Coding Guidelines</span></h2>
<div class="confbox admonition admonition-info aui-message hint shadowed information-macro">
<p>
</p>
<p>
Above all, the code should be <strong class=" ">elegant</strong>. It should be well-spaced and easy to follow.    </p>
</div>
<ul class=" "><li class=" "> <p>
There are no empty try/catch blocks    </p>
</li><li class=" "> <p>
Don&apos;t call abstract methods in constructors (See here for an explanation: <a class="external-link external-link" href="http://www.artima.com/forums/flat.jsp?forum=226&amp;thread=113723" target="_blank">http://www.artima.com/forums/flat.jsp?forum=226&amp;amp;thread=113723</a>)    </p>
</li><li class=" "> <p>
Many of these rules are encapsulated by PMD tests    </p>
</li><li class=" "> <p>
Private variables may begin with an underscore, but we specifically do not follow the Eclipse &apos;f&apos; prefix convention. You should be consistent within your class.    </p>
</li></ul> </div>
<div class="section section-2 " id="30083149_SourceCodeConventions-NamingConventions">
<h2 class="heading "><span>Naming Conventions</span></h2>
<ul class=" "><li class=" "> <p>
Interfaces begin with &apos;I&apos;    </p>
</li><li class=" "> <p>
Plugin Activator names are derived from the plugin package name.    </p>
<ol class=" "><li class=" "> <p>
Strip the first two segments from the plugin (generally &quot;com.aptana&quot; or &quot;com.appcelerator&quot; assuming a reverse domain name naming system)    </p>
</li><li class=" "> <p>
Initial case the rest of the segments    </p>
</li><li class=" "> <p>
Strip the periods    </p>
</li><li class=" "> <p>
Add the word &quot;Plugin&quot; at the end. Some examples:    </p>
<ul class=" "><li class=" "> <p>
<strong class=" ">com.aptana.scripting</strong> -&gt; ScriptingPlugin    </p>
</li><li class=" "> <p>
<strong class=" ">com.appcelerator.titanium.branding</strong> -&gt; TitaniumBrandingPlugin    </p>
</li></ul></li></ol></li><li class=" "> <p>
Plugin-specific classes (like I*SystemProperties, I*DebugScopes, I*PreferenceConstants) also follow the same convention for the creation of the * section as plugin activators    </p>
<ul class=" "><li class=" "> <p>
<strong class=" ">com.appcelerator.titanium.core</strong> -&gt; ITitaniumCoreSystemProperties    </p>
</li><li class=" "> <p>
<strong class=" ">com.aptana.editor.epl</strong> -&gt; IEditorEplDebugScopes    </p>
</li></ul></li></ul> </div>
<div class="section section-2 " id="30083149_SourceCodeConventions-License">
<h2 class="heading "><span>License</span></h2>
<p>
Please ensure that the following header is at the top of each Studio file, or at least an equivalent header. We must have code which is EPL-compatible for the EPL plugins, and GPL compatable for all other Aptana plugins:    </p>
<div class="section section-3 " id="30083149_SourceCodeConventions-GPL">
<h3 class="heading "><span>GPL</span></h3>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain"> </code><code class="preprocessor">/**</code></div>
<div class="line"><code class="preprocessor"> * Aptana Studio</code></div>
<div class="line"><code class="preprocessor"> * Copyright (c) 2005-2011 by Appcelerator, Inc. All Rights Reserved.</code></div>
<div class="line"><code class="preprocessor"> * Licensed under the terms of the GNU Public License (GPL) v3 (with exceptions).</code></div>
<div class="line"><code class="preprocessor"> * Please see the license.html included with this distribution for details.</code></div>
<div class="line"><code class="preprocessor"> * Any modifications to this file must keep this entire header intact.</code></div>
<div class="line"><code class="preprocessor"> */</code></div>
</div>
</div> </div>
<div class="section section-3 " id="30083149_SourceCodeConventions-EPL">
<h3 class="heading "><span>EPL</span></h3>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="preprocessor">/**</code></div>
<div class="line"><code class="preprocessor"> * Copyright (c) 2005-2011 by Appcelerator, Inc. All Rights Reserved.</code></div>
<div class="line"><code class="preprocessor"> * Licensed under the terms of the Eclipse Public License (EPL).</code></div>
<div class="line"><code class="preprocessor"> * Please see the license.txt included with this distribution for details.</code></div>
<div class="line"><code class="preprocessor"> * Any modifications to this file must keep this entire header intact.</code></div>
<div class="line"><code class="preprocessor"> */</code></div>
</div>
</div> </div>
<div class="section section-3 " id="30083149_SourceCodeConventions-PrivateCode">
<h3 class="heading "><span>Private Code</span></h3>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="preprocessor">/**</code></div>
<div class="line"><code class="preprocessor"> * Appcelerator Titanium Studio</code></div>
<div class="line"><code class="preprocessor"> * Copyright (c) 2011 by Appcelerator, Inc. All Rights Reserved.</code></div>
<div class="line"><code class="preprocessor"> * Proprietary and Confidential - This source code is not for redistribution</code></div>
<div class="line"><code class="preprocessor"> */</code></div>
</div>
</div> </div>
</div>
<div class="section section-2 " id="30083149_SourceCodeConventions-PMD">
<h2 class="heading "><span>PMD</span></h2>
<p>
We use PMD to check code consistency.    </p>
<ol class=" "><li class=" "> <p>
Within Eclipse go to  Help-&gt;Software Updates-&gt;Find and Install    </p>
</li><li class=" "> <p>
Choose Search for new features to install and press Next    </p>
</li><li class=" "> <p>
Create a New Remote Site...    </p>
</li><li class=" "> <p>
Input a name to your liking (for instance PMD Plug-in) and input the following URL: <a class="external-link external-link" href="http://pmd.sf.net/eclipse" target="_blank">http://pmd.sf.net/eclipse</a> </p>
</li><li class=" "> <p>
Click your way through the following pages to install the plug-in.    </p>
</li></ol> <p>
For those interested, our PMD file is located at: <a class="external-link external-link" href="https://github.com/aptana/studio3-sdk/blob/master/tools/eclipse/aptana_pmd_rules.xml" target="_blank">https://github.com/aptana/studio3-sdk/blob/master/tools/eclipse/aptana_pmd_rules.xml</a> </p>
<p>
You will need to download that file, set PMD preferences, clear out the existing rule set, and import the new one from this file. You can then manually run PMD on a file or package from the right-click menu.    </p>
</div>
<div class="section section-2 " id="30083149_SourceCodeConventions-JavaFormatting">
<h2 class="heading "><span>Java Formatting</span></h2>
<p>
Our Java formatting conventions are relatively easy going, though we do add braces, always.    </p>
<ol class=" "><li class=" "> <p>
Download the file from <a class="external-link external-link" href="https://github.com/aptana/studio3-sdk/blob/master/tools/eclipse/aptana_java_formatter_preferences.xml" target="_blank">https://github.com/aptana/studio3-sdk/blob/master/tools/eclipse/aptana_java_formatter_preferences.xml</a> </p>
</li><li class=" "> <p>
Within Eclipse go to Window-&gt;Preferences-&gt;Java-&gt;Code Style-&gt;Formatter    </p>
</li><li class=" "> <p>
Click on &quot;Import...&quot; and choose the file you just downloaded    </p>
</li></ol> </div>
<div class="section section-2 " id="30083149_SourceCodeConventions-ExternalizedStrings">
<h2 class="heading "><span>Externalized Strings</span></h2>
<ol class=" "><li class=" "> <p>
Right-click on a file, choose &quot;Source&quot;, &quot;Externalize Strings&quot;. Make sure the &quot;Use Eclipse&apos;s String Mechanism&quot; is checked. (See how this has been done this elsewhere, with a Messages class and a messages.properties file)    </p>
<ol class=" "><li class=" "> <p>
This will require you to change the &quot;Common Prefix&quot;. Just replace the &apos;.&apos; with a &apos;<i class=" ">&apos;. i.e. FileExplorerView. becomes FileExplorerView</i> </p>
</li><li class=" "> <p>
You will need to manually rename the keys that are to be externalized from the auto-numbers it creates. Just type something useful, like a pascal-cased shorthand for the original string: &quot;ThisIsAnErrorMessage&quot;.    </p>
</li></ol></li><li class=" "> <p>
Do the externalization per-package, not per-plugin.    </p>
</li><li class=" "> <p>
<strong class=" ">Important: make sure you add the messages.properties file to the build.properties file.</strong> You want to make sure that message.properties file is included in the binary build.    </p>
</li><li class=" "> <p>
Exclude <i class=" ">all</i> strings in any unit testing plugins, or any case where it does not make sense to translate that piece of text.    </p>
</li><li class=" "> <p>
<strong class=" ">Important: Use StringUtils.format() instead of &quot;string &quot; + variable.</strong> Again, take  a look at how we use this elsewhere. The easiest way to do this is to try and run the externalization wizard. Notice where you have &quot;constructed&quot; strings. Cancel out of the wizard, and then fix them. Then run the wizard again.    </p>
</li><li class=" "> <p>
Make sure you add the messages.properties file to source control    </p>
</li><li class=" "> <p>
Also ensure that you comment all the methods in the messages file to remove any generated warnings    </p>
</li></ol> </div>
<div class="section section-2 " id="30083149_SourceCodeConventions-UnitTesting">
<h2 class="heading "><span>Unit Testing</span></h2>
<ol class=" "><li class=" "> <p>
Ensure that the current set of unit tests run before submitting your code, especially if it is a high-risk addition    </p>
</li><li class=" "> <p>
Make sure you&apos;ve added new unit tests for the new items you&apos;ve added. If you can&apos;t unit test it, write a unit test for something else.    </p>
</li></ol> </div>
</div>

</div>

</body>
</html>