<!-- single file version -->
<!DOCTYPE html>
<html>
<head>
  <link href="css/github.css" rel="stylesheet" type="text/css">
  <link href="resources/css/common.css" rel="stylesheet" type="text/css">
  <meta charset="utf-8" />
</head>
<body>

<div class="container">
<div class="header"></div>
<div id="30083153" class="content">
<h1>Administration API for the Developer Toolbox</h1>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-About" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-about="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-About">About</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-Design%26Background" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-design%26background="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-Design%26Background">Design &amp; Background</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-Capabilities" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-capabilities="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-Capabilities">Capabilities</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-Administration" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-administration="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-Administration">Administration</a> </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98name%E2%80%99field" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-%e2%80%98name%e2%80%99field="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98name%E2%80%99field">&#x2018;name&#x2019; field</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98version%E2%80%99field" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-%e2%80%98version%e2%80%99field="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98version%E2%80%99field">&#x2018;version&#x2019; field</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98item_type%E2%80%99field" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-%e2%80%98item_type%e2%80%99field="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98item_type%E2%80%99field">&#x2018;item_type&#x2019; field</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98action%E2%80%99field" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-%e2%80%98action%e2%80%99field="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-%E2%80%98action%E2%80%99field">&#x2018;action&#x2019; field</a> </p>
</li></ul></li><li class=" "> <p>
<a class="document-link " href="#!/guide/Administration_API_for_the_Developer_Toolbox-section-30083153_AdministrationAPIfortheDeveloperToolbox-SupportedApplicationInstallers" administration_api_for_the_developer_toolbox.html#30083153_administrationapiforthedevelopertoolbox-supportedapplicationinstallers="Administration_API_for_the_Developer_Toolbox.html#30083153_AdministrationAPIfortheDeveloperToolbox-SupportedApplicationInstallers">Supported Application Installers</a> </p>
</li></ul> <div class="section section-2 " id="30083153_AdministrationAPIfortheDeveloperToolbox-About">
<h2 class="heading "><span>About</span></h2>
<p>
This document provides the Admin API for the developer toolbox usage.    </p>
</div>
<div class="section section-2 " id="30083153_AdministrationAPIfortheDeveloperToolbox-Design&amp;Background">
<h2 class="heading "><span>Design &amp; Background</span></h2>
<p>
The Developer Toolbox is designed to interact with the Studio through a controller-action mechanism that uses JSON to pass commands and information.    </p>
<p>
On the Studio side, the main plugin that takes part in handling remote requests and communicating with the toolbox is the com.aptana.portal.ui. The plugin provides the core implementation for a controller-action-like scheme.    </p>
</div>
<div class="section section-2 " id="30083153_AdministrationAPIfortheDeveloperToolbox-Capabilities">
<h2 class="heading "><span>Capabilities</span></h2>
<p>
This is what the Studio side is capable of handling at the moment (this list will grow as we add more capabilities in time):    </p>
<ol class=" "><li class=" "> <p>
Version check of these items:    </p>
<ol class=" "><li class=" "> <p>
Plugins    </p>
</li><li class=" "> <p>
Ruby (native call)    </p>
</li><li class=" "> <p>
Rails (native call)    </p>
</li><li class=" "> <p>
SqLite3 (native call)    </p>
</li><li class=" "> <p>
Preferences check of version for other applications that were installed through a supported installer (see below).    </p>
</li></ol></li><li class=" "> <p>
Installations:    </p>
<ol class=" "><li class=" "> <p>
Ruby (Windows only)    </p>
</li><li class=" "> <p>
XAMPP (Windows only)    </p>
</li><li class=" "> <p>
Python (Windows only)    </p>
</li></ol></li><li class=" "> <p>
Add to Project:    </p>
<ol class=" "><li class=" "> <p>
JavaScript libraries    </p>
</li></ol></li><li class=" "> <p>
Other Studio interactions    </p>
<ol class=" "><li class=" "> <p>
Open views    </p>
</li><li class=" "> <p>
List the latest opened files    </p>
</li><li class=" "> <p>
Open files    </p>
</li></ol></li></ol> </div>
<div class="section section-2 " id="30083153_AdministrationAPIfortheDeveloperToolbox-Administration">
<h2 class="heading "><span>Administration</span></h2>
<p>
The admin of the toolbox database controls what will be displayed and available for installation.    </p>
<p>
The toolbox get the information from the &#x2018;items&#x2019; table. This table contains multiple columns and a lot of information. However, this document will describe  only the columns that are critical for the Toolbox-Studio interactions.    </p>
<p>
This list contains the columns we will be dealing with:    </p>
<ul class=" "><li class=" "> <p>
name - The item&#x2019;s name    </p>
</li><li class=" "> <p>
version - The version we are looking for, or installing.    </p>
</li><li class=" "> <p>
item_type - The general type definition of an item. Can be &#x2018;Plugin&#x2019;, &#x2018;Application&#x2019;, &#x2018;Template&#x2019;, &#x2018;Ruble&#x2019; and &#x2018;Gem&#x2019; (for now, only the first two are in use). More about the item_type below.    </p>
</li><li class=" "> <p>
action- Holds the JSON command that will be inspected and partially transferred to the Studio side.    </p>
</li></ul> <div class="section section-3 " id="30083153_AdministrationAPIfortheDeveloperToolbox-&#x2018;name&#x2019;field">
<h3 class="heading "><span>&#x2018;name&#x2019; field</span></h3>
<p>
<span id="30083153_AdministrationAPIfortheDeveloperToolbox-name"><a class="confluence-anchor-link" name="30083153_AdministrationAPIfortheDeveloperToolbox-name"></a></span>
As hinted by its name... this field will be displayed in the Toolbox as the item&#x2019;s name.    </p>
</div>
<div class="section section-3 " id="30083153_AdministrationAPIfortheDeveloperToolbox-&#x2018;version&#x2019;field">
<h3 class="heading "><span>&#x2018;version&#x2019; field</span></h3>
<p>
<span id="30083153_AdministrationAPIfortheDeveloperToolbox-version"><a class="confluence-anchor-link" name="30083153_AdministrationAPIfortheDeveloperToolbox-version"></a></span>
The version field is used when the toolbox tries to determine what item version is installed. For example, a Plugin item will be displayed as &#x2018;Installed&#x2019; if the Studio reports a matching plugin version for it. It will be displayed as &#x2018;Update&#x2019; if the Studio reports a lower version exists.    </p>
<p>
This field should be given in a form of x.y.z pattern, and should include numbers only.    </p>
</div>
<div class="section section-3 " id="30083153_AdministrationAPIfortheDeveloperToolbox-&#x2018;item_type&#x2019;field">
<h3 class="heading "><span>&#x2018;item_type&#x2019; field</span></h3>
<p>
<span id="30083153_AdministrationAPIfortheDeveloperToolbox-item_type"><a class="confluence-anchor-link" name="30083153_AdministrationAPIfortheDeveloperToolbox-item_type"></a></span>
This field defines the internal type of the item. Note that this type can be different that what is specified in the &#x2018;category_list&#x2019; field, which defines the UI arrangement of the items in the toolbox.    </p>
<p>
The field must hold one of the supported integer types:    </p>
<ul class=" "><li class=" "> <p>
1 : Plugin    </p>
</li><li class=" "> <p>
2 : Application    </p>
</li><li class=" "> <p>
3 : Template    </p>
</li><li class=" "> <p>
4 : Ruble    </p>
</li><li class=" "> <p>
5 : Gem    </p>
</li></ul> <p>
Note that for the moment, only the first two (plugins (1) and applications (2)) are actually being handled by the Javascript part of the toolbox. The rest are there for future use, and are defined in the item.rb model of the toolbox rails-application.    </p>
</div>
<div class="section section-3 " id="30083153_AdministrationAPIfortheDeveloperToolbox-&#x2018;action&#x2019;field">
<h3 class="heading "><span>&#x2018;action&#x2019; field</span></h3>
<p>
<span id="30083153_AdministrationAPIfortheDeveloperToolbox-action"><a class="confluence-anchor-link" name="30083153_AdministrationAPIfortheDeveloperToolbox-action"></a></span>
The action field is the most important, and complex, part of the Toolbox-Studio interaction. It holds a JSON instructions that specify how to download and install the item.    </p>
<p>
Here is the structure outline of the JSON command, followed by an example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;command&quot;</code><code class="plain">:</code><code class="string">&quot;&lt;command_name&gt;&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;os&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;&lt;windows | linux | macosx | all&gt;&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;action&quot;</code><code class="plain">: </code><code class="string">&quot;&lt;action&gt;&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;attributes&quot;</code><code class="plain">: {</code><code class="string">&quot;&lt;key&gt;&quot;</code><code class="plain"> : </code><code class="string">&quot;&lt;value&gt;&quot;</code><code class="plain"> ... },</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;urls&quot;</code><code class="plain">: &lt;array of strings or a single string&gt;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div> <p>
<i class=" "><u class=" ">Example:</u></i> </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;command&quot;</code><code class="plain">:</code><code class="string">&quot;ruby&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;os&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;windows&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;action&quot;</code><code class="plain">: </code><code class="string">&quot;install&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;attributes&quot;</code><code class="plain">: {</code><code class="string">&quot;install_dir&quot;</code><code class="plain"> : </code><code class="string">&quot;C:\/Ruby&quot;</code><code class="plain">},</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;urls&quot;</code><code class="plain">: [</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;http://rubyforge.org/frs/download.php/71492/rubyinstaller-1.8.7-p299.exe&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;http://rubyforge.org/frs/download.php/66888/devkit-3.4.5r3-20091110.7z&quot;</code></div>
<div class="line"><code class="plain">            ]</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;all&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;action&quot;</code><code class="plain">:</code><code class="string">&quot;open&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;urls&quot;</code><code class="plain">: </code><code class="string">&quot;http://www.ruby-lang.org/en/downloads/&quot;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div> <p>
In the given example, we call for the &#x2018;ruby&#x2019; command. The toolbox JavaScript framework looks at the &#x2018;item_type&#x2019; value and decides how to proceed and which controller to call.    </p>
<p>
The &#x2018;os&#x2019; attribute defines that for Windows, the action &#x2018;install&#x2019; should be invoked. For any other OS, the action &#x2018;open&#x2019; is called. The &#x2018;all&#x2019; is actually the default operation that will be called if a specific OS match was not found.    </p>
<p>
For the &#x2018;Windows&#x2019; OS, the install action is requested and the toolbox will dispatch the &#x2018;install&#x2019; on the &#x2018;portal.ruby.installer&#x2019; Studio controller, and will pass it the attributes map and the URLs that will be used to download the content.    </p>
<p>
For any other, non-Windows, OS, the action &#x2018;open&#x2019; will be called to open an internal browser with the given URL string that was defined for the &#x2018;urls&#x2019; key.    </p>
<p>
Note that some <strong class=" ">installers</strong>, such as Ruby, require a specific order of URLs. The Studio-side installation expects a specific order, and will execute the download and install in that order. The specific instructions for any supported installer will be described at the end of this document.    </p>
<p>
Here are a couple of more examples that will install a plugin and a JavaScript library:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;command&quot;</code><code class="plain">:</code><code class="string">&quot;plugins&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;os&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;all&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;attributes&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;feature_id&quot;</code><code class="plain"> : </code><code class="string">&quot;com.aptana.php.feature&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;plugin_id&quot;</code><code class="plain"> : </code><code class="string">&quot;com.aptana.editor.php&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;plugin_version&quot;</code><code class="plain"> : </code><code class="string">&quot;3.0.0&quot;</code><code class="plain">},</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;action&quot;</code><code class="plain">: </code><code class="string">&quot;install&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;urls&quot;</code><code class="plain">: </code><code class="string">&quot;http://download.aptana.com/studio3/plugin/install&quot;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div> <p>
---------------------------------------------------------------------------------------    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;command&quot;</code><code class="plain">:</code><code class="string">&quot;js_library&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;os&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;all&quot;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;attributes&quot;</code><code class="plain">: {</code><code class="string">&quot;name&quot;</code><code class="plain"> : </code><code class="string">&quot;prototype 1.6.1&quot;</code><code class="plain">},</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;action&quot;</code><code class="plain">: </code><code class="string">&quot;install&quot;</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">&quot;urls&quot;</code><code class="plain">: </code><code class="string">&quot;http://prototypejs.org/assets/2009/8/31/prototype.js&quot;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div> <p>
Pay attention that installing a Plug-in or a JavaScript library is more generic then installing a specific application. The command for installing a Plug-in is always &#x2018;plugins&#x2019;, and the command for installing a JS library is always &#x2018;js_library&#x2019;.    </p>
<p>
The application installers are more complex, so they require a specific support for each app we want to provide our users. See the &quot;<strong class=" "><i class=" ">Supported Application Installers</i></strong>&quot; section below.    </p>
<p>
The &#x2018;<strong class=" "><i class=" ">attributes</i></strong>&#x2019; JSON value contains extra information that is used by the different types of installers. Here is a table of attributes that are expected to be given for each installer type:    </p>
<div class="tablewrap">
<table class="confluenceTable">
<thead class=" "> <tr>
<td class="confluenceTh" rowspan="1" colspan="1">
<p>
Command    </p>
</td>
<td class="confluenceTh" rowspan="1" colspan="1">
<p>
Attributes    </p>
</td>
</tr>
</thead><tfoot class=" "></tfoot><tbody class=" "> <tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
plugins    </p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
feature_id<br>plugin_id<br>plugin_version    </p>
</td>
</tr>
<tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
js_library    </p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
name    </p>
</td>
</tr>
<tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
ruby    </p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
install_dir [optional]    </p>
</td>
</tr>
<tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
xampp    </p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
install_dir [optional]    </p>
</td>
</tr>
<tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
python    </p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
install_dir [optional]    </p>
</td>
</tr>
</tbody> </table>
</div>
</div>
</div>
<div class="section section-2 " id="30083153_AdministrationAPIfortheDeveloperToolbox-SupportedApplicationInstallers">
<h2 class="heading "><span>Supported Application Installers</span></h2>
<p>
The specific supported applications, as mentioned above, are:    </p>
<ul class=" "><li class=" "> <p>
Ruby - Through the &#x2018;ruby&#x2019; command (see the example)    </p>
</li><li class=" "> <p>
XAMPP - Through the &#x2018;xampp&#x2019; command.    </p>
</li><li class=" "> <p>
Python - Through the &#x2018;python&#x2019; command.    </p>
</li></ul> <p>
Each of these applications has its own installer support that runs the native installer with its expected attributes.    </p>
<p>
Each of the application is downloaded from the web, and then, the downloaded content is handled by executing the native installer process and/or unzipping it.    </p>
<p>
Special requirements:    </p>
<ol class=" "><li class=" "> <p>
Ruby - The installer require two URLs in the JSON &#x2018;urls&#x2019; array, in that order. The first URL should be pointed to the Windows &#x2018;RubyInstaller&#x2019;. The second URL should be pointed to the &#x2018;DevKit&#x2019; zip file. The RubyInstaller will be executed in a native way, while the DevKit will be later extracted into the installed directory and some modifications will be made to its configuration files.    </p>
</li><li class=" "> <p>
XAMPP - The installer expects a single URL for the native XAMPP installer.    </p>
</li><li class=" "> <p>
Python - The installer expects a single URL for the native Python installer.    </p>
</li></ol> </div>
</div>

</div>

</body>
</html>