<!-- single file version -->
<!DOCTYPE html>
<html>
<head>
  <link href="css/github.css" rel="stylesheet" type="text/css">
  <link href="resources/css/common.css" rel="stylesheet" type="text/css">
  <meta charset="utf-8" />
</head>
<body>

<div class="container">
<div class="header"></div>
<div id="35621514" class="content">
<h1>Alloy Widgets</h1>
<p>
</p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Alloy_Widgets-section-35621514_AlloyWidgets-Introduction" alloy_widgets.html#35621514_alloywidgets-introduction="Alloy_Widgets.html#35621514_AlloyWidgets-Introduction">Introduction</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Alloy_Widgets-section-35621514_AlloyWidgets-UsingWidgets" alloy_widgets.html#35621514_alloywidgets-usingwidgets="Alloy_Widgets.html#35621514_AlloyWidgets-UsingWidgets">Using Widgets</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Alloy_Widgets-section-35621514_AlloyWidgets-CreatingWidgets" alloy_widgets.html#35621514_alloywidgets-creatingwidgets="Alloy_Widgets.html#35621514_AlloyWidgets-CreatingWidgets">Creating Widgets</a> </p>
</li></ul> <div class="section section-2 " id="35621514_AlloyWidgets-Introduction">
<h2 class="heading "><span>Introduction</span></h2>
<p>
Widgets are self-contained components that can be easily dropped into Alloy-powered Titanium projects. They were conceived as a way to reuse code in multiple applications or to be used multiple times in the same application. Widgets have their own views, controllers, styles and assets and are laid out the same as the app directory in the Alloy project.    </p>
</div>
<div class="section section-2 " id="35621514_AlloyWidgets-UsingWidgets">
<h2 class="heading "><span>Using Widgets</span></h2>
<p>
See <a class="document-link " href="#!/guide/Alloy_XML_Markup-section-35621528_AlloyXMLMarkup-ImportingWidgets" alloy_xml_markup.html#35621528_alloyxmlmarkup-importingwidgets="Alloy_XML_Markup.html#35621528_AlloyXMLMarkup-ImportingWidgets">Importing Widgets</a> for more information on using widgets in your project.    </p>
</div>
<div class="section section-2 " id="35621514_AlloyWidgets-CreatingWidgets">
<h2 class="heading "><span>Creating Widgets</span></h2>
<p>
Widgets should be built in their own directory in the Alloy project&apos;s <tt class=" ">app/widgets/</tt> directory. Widgets have their own views, controllers, models, styles and assets and are laid out the same as the <tt class=" ">app</tt> directory in the Alloy project. See <a class="document-link " href="#!/guide/Alloy_Concepts-section-34636240_AlloyConcepts-ConventionoverConfiguration" alloy_concepts.html#34636240_alloyconcepts-conventionoverconfiguration="Alloy_Concepts.html#34636240_AlloyConcepts-ConventionoverConfiguration">Convention over Configuration</a> for the layout. Additionally, since widgets are self-contained, they should not reference any code or assets not within its path, except for internationalization and localization files, which are located in the <tt class=" ">i18n</tt> folder. Some differences from Alloy projects and helpful tricks are noted below.    </p>
<div class="section section-3 " id="35621514_AlloyWidgets-AssetsandLibs">
<h3 class="heading "><span>Assets and Libs</span></h3>
<p>
For any files in the <tt class=" ">assets</tt> or <tt class=" ">libs</tt> folder, use the <tt class=" ">WPATH()</tt> macro to automatically map the path relative from the widget&apos;s root folder, as opposed to the Alloy project&apos;s <tt class=" ">app</tt> directory. For example, if you have a library located at <tt class=" ">app/widgets/foo/lib/helper.js</tt>, to require it, use <tt class=" ">require(WPATH(&apos;helper&apos;))</tt>; and if you have an image located at <tt class=" ">app/widgets/foo/assets/images/foo.png</tt>, to reference it, use <tt class=" ">WPATH(&apos;images/foo.png&apos;)</tt>.    </p>
</div>
<div class="section section-3 " id="35621514_AlloyWidgets-Configuration">
<h3 class="heading "><span>Configuration</span></h3>
<p>
Widgets have their own configuration file called <tt class=" ">widget.json</tt> located in the widget&apos;s root directory. Refer to <a class="document-link " href="#!/guide/Widget_Configuration_File_(widget.json)" widget_configuration_file_(widget.json).html="Widget_Configuration_File_(widget.json).html">Widget Configuration File (widget.json)</a> for the format of the file.    </p>
</div>
<div class="section section-3 " id="35621514_AlloyWidgets-Controllers">
<h3 class="heading "><span>Controllers</span></h3>
<p>
The main controller is called <tt class=" ">widget.js</tt> instead of <tt class=" ">index.js</tt>.    </p>
<p>
To use another view-controller besides <tt class=" ">widget.js</tt>/<tt class=" ">widget.xml</tt>, use the <tt class=" ">Widget.createController(controller_name, [params])</tt> method to create a new instance of the controller and the <tt class=" ">getView()</tt> method to access the Titanium proxy object. For example, suppose you have a <tt class=" ">button</tt> view-controller in your <tt class=" ">foo</tt> widget. To add it to the main widget view:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">app/widgets/foo/controllers/widget.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var button = Widget.createController(</code><code class="string">&apos;button&apos;</code><code class="plain">).getView();</code></div>
<div class="line"><code class="plain">$.widget.add(button);</code></div>
</div>
</div> <p>
<span style="color: #000000;">
All methods in the widget controller are private unless you prefix the method with <tt class=" ">$</tt>, which makes it accessible to the Alloy project and other widgets. For example, if the following code was defined in a widget controller:    </span>
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$.init = function (args) {</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Button object with id=button</code></div>
<div class="line"><code class="plain">    $.button.title = args.title || </code><code class="string">&apos;Si&apos;</code><code class="plain">; </code></div>
<div class="line"><code class="plain">    $.button.color = args.color || </code><code class="string">&apos;black&apos;</code><code class="plain">; </code></div>
<div class="line"><code class="plain"> </code><code class="comments">// global variable</code></div>
<div class="line"><code class="plain">    message = args.message || </code><code class="string">&apos;Hola mundo&apos;</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div> <p>
Then, in the Alloy project, call <tt class=" ">init</tt> prefixed with the widget ID specified in the Alloy project&apos;s view--in this example, the ID is <tt class=" ">foo</tt>:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$.foo.init({title:</code><code class="string">&apos;Yes&apos;</code><code class="plain">, color:</code><code class="string">&apos;gray&apos;</code><code class="plain">, message:</code><code class="string">&apos;I pity the foo.&apos;</code><code class="plain">});</code></div>
</div>
</div> </div>
<div class="section section-3 " id="35621514_AlloyWidgets-Models">
<h3 class="heading "><span>Models</span></h3>
<p>
Use models the same way as with a regular Alloy project except to create a model or collection inside a widget controller, use the <tt class=" ">Widget.createModel(model_name, [params])</tt> and <tt class=" ">Widget.createCollection(model_name, [params])</tt> methods, respectively.  You can also use the <tt class=" ">Model</tt> and <tt class=" ">Collection</tt> tags in widget views.    </p>
</div>
<div class="section section-3 " id="35621514_AlloyWidgets-Styles">
<h3 class="heading "><span>Styles</span></h3>
<p>
The main TSS file is called <tt class=" ">widget.tss</tt> instead of <tt class=" ">index.tss</tt>.    </p>
</div>
<div class="section section-3 " id="35621514_AlloyWidgets-Themes">
<h3 class="heading "><span>Themes</span></h3>
<p>
Widget themes work the same as project themes except for the placement of the files.  Inside your theme folder (<tt class=" ">app/themes/&lt;THEME_NAME&gt;</tt>), create <tt class=" ">widgets/&lt;WIDGET_NAME&gt;</tt> folders, where <tt class=" ">&lt;THEME_NAME&gt;</tt> is the name of the theme and <tt class=" ">&lt;WIDGET_NAME&gt;</tt> is the name of the widget. Create two folders, <tt class=" ">assets</tt> and <tt class=" ">styles</tt>, to place your custom images and styles for your widget, respectively. The <tt class=" ">assets</tt> and <tt class=" ">styles</tt> folders need to be placed in the folder that is named after the widget.  When using a theme, the files in these folders replace the files in the widget&apos;s folders.  For more details, see <a class="document-link " href="#!/guide/Alloy_Styles_and_Themes-section-35621526_AlloyStylesandThemes-Themes" alloy_styles_and_themes.html#35621526_alloystylesandthemes-themes="Alloy_Styles_and_Themes.html#35621526_AlloyStylesandThemes-Themes">Alloy Styles and Themes: Themes</a>.    </p>
<p>
To use a theme, in the project&apos;s <tt class=" ">config.json</tt> file, add the <tt class=" ">theme</tt> key with the name of the theme folder as the value.    </p>
<p>
The following file structure shows the placement of the &quot;mytheme&quot; theme files in relation to the &quot;mywidget&quot; widget.  The project below contains iOS-specific assets and styles for the widget.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">app</code></div>
<div class="line"><code class="plain">&#x251C;&#x2500;&#x2500; themes</code></div>
<div class="line"><code class="plain">&#x2502;   &#x2514;&#x2500;&#x2500; mytheme</code></div>
<div class="line"><code class="plain">&#x2502;       &#x2514;&#x2500;&#x2500; widgets</code></div>
<div class="line"><code class="plain">&#x2502;           &#x2514;&#x2500;&#x2500; mywidget</code></div>
<div class="line"><code class="plain">&#x2502;               &#x251C;&#x2500;&#x2500; assets</code></div>
<div class="line"><code class="plain">&#x2502;               &#x2502;   &#x251C;&#x2500;&#x2500; ios</code></div>
<div class="line"><code class="plain">&#x2502;               &#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; star_half.png</code></div>
<div class="line"><code class="plain">&#x2502;               &#x2502;   &#x251C;&#x2500;&#x2500; star.png</code></div>
<div class="line"><code class="plain">&#x2502;               &#x2502;   &#x2514;&#x2500;&#x2500; star_off.png</code></div>
<div class="line"><code class="plain">&#x2502;               &#x2514;&#x2500;&#x2500; styles</code></div>
<div class="line"><code class="plain">&#x2502;                   &#x251C;&#x2500;&#x2500; ios</code></div>
<div class="line"><code class="plain">&#x2502;                   &#x2502;   &#x2514;&#x2500;&#x2500; star.tss</code></div>
<div class="line"><code class="plain">&#x2502;                   &#x2514;&#x2500;&#x2500; star.tss</code></div>
<div class="line"><code class="plain">&#x2514;&#x2500;&#x2500; widgets</code></div>
<div class="line"><code class="plain">    &#x2514;&#x2500;&#x2500; mywidget</code></div>
<div class="line"><code class="plain">        &#x251C;&#x2500;&#x2500; assets</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x251C;&#x2500;&#x2500; star.png</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x251C;&#x2500;&#x2500; star_half.png</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x2514;&#x2500;&#x2500; star_off.png</code></div>
<div class="line"><code class="plain">        &#x251C;&#x2500;&#x2500; controllers</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x251C;&#x2500;&#x2500; star.js</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x2514;&#x2500;&#x2500; widget.js</code></div>
<div class="line"><code class="plain">        &#x251C;&#x2500;&#x2500; styles</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x251C;&#x2500;&#x2500; star.tss</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x2514;&#x2500;&#x2500; widget.tss</code></div>
<div class="line"><code class="plain">        &#x251C;&#x2500;&#x2500; views</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x251C;&#x2500;&#x2500; star.xml</code></div>
<div class="line"><code class="plain">        &#x2502;   &#x2514;&#x2500;&#x2500; widget.xml</code></div>
<div class="line"><code class="plain">        &#x2514;&#x2500;&#x2500; widget.json</code></div>
</div>
</div> <p>
</p>
</div>
<div class="section section-3 " id="35621514_AlloyWidgets-Views">
<h3 class="heading "><span>Views</span></h3>
<p>
The main view is called <tt class=" ">widget.xml</tt> instead of <tt class=" ">index.xml</tt>.    </p>
<p>
Specifying the <tt class=" ">id</tt> attribute in the XML markup components will make it easier to access and override Titanium object properties. For example, suppose you have a Button object in a widget view that has its id assigned as <tt class=" ">button</tt> and in the Alloy project the widget id is <tt class=" ">foo</tt>. To access a Button property:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">Ti.API.info(</code><code class="string">&quot;button state: &quot;</code><code class="plain"> + $.foo.button.enabled);</code></div>
</div>
</div> <p>
For widgets that have multiple view-controllers, to include a widget&apos;s view-controller in another widget&apos;s view, use the <tt class=" ">Widget</tt> tag and assign the <tt class=" ">name</tt> attribute with the name of the view-controller minus the file extension.  <u class=" ">Since Alloy 1.5.0</u>, if you omit the <tt class=" ">src</tt> attribute, Alloy assumes you are referencing the current widget. For Alloy 1.4.x and prior, you need to assign the <tt class=" ">src</tt> attribute to the widget&apos;s name. For example, the following markup is analogous to the example in the Controller section:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">app/widgets/foo/views/widget.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">	&lt;View&gt;</code></div>
<div class="line"><code class="plain">		&lt;Widget src=</code><code class="string">&quot;foo&quot;</code><code class="plain"> name=</code><code class="string">&quot;button&quot;</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">	&lt;/View&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div> </div>
<div class="section section-3 " id="35621514_AlloyWidgets-Widgets">
<h3 class="heading "><span>Widgets</span></h3>
<p>
Widgets can also contain other widgets. Follow the same directions from <a class="document-link " href="#!/guide/Alloy_XML_Markup-section-35621528_AlloyXMLMarkup-ImportingWidgets" alloy_xml_markup.html#35621528_alloyxmlmarkup-importingwidgets="Alloy_XML_Markup.html#35621528_AlloyXMLMarkup-ImportingWidgets">Importing Widgets</a> except the widget&apos;s configuration file is called <tt class=" ">widget.json</tt> instead of <tt class=" ">config.json</tt>.  Additionally, to create a widget inside a widget controller, use the <tt class=" ">Widget.createWidget(widget_name, [controller_name], [params])</tt> method.    </p>
</div>
</div>
</div>

</div>

</body>
</html>