Ext.data.JsonP['Alloy_Collection_and_Model_Objects']({"guide":"<?xml version='1.0' encoding='utf-8'?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n        \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<title>Alloy Collection and Model Objects</title>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n<meta content=\"Scroll EclipseHelp Exporter\" name=\"generator\" />\n<link type=\"text/css\" rel=\"stylesheet\" />\n<link type=\"text/css\" rel=\"stylesheet\" />\n<link type=\"text/css\" rel=\"stylesheet\" media=\"print\" />\n</head>\n<body>\n<div class=\"container\">\n<div class=\"header\"></div>\n<div id=\"36739589\" class=\"content\"><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=36739589\"><span>Edit</span></a>\n<h1>Alloy Collection and Model Objects</h1>\n<ul class=\"toc-indentation \"><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-Models\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-Models=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-Models\">Models</a> </p>\n<ul class=\"toc-indentation \"><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-ConfigurationObject\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-ConfigurationObject=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-ConfigurationObject\">Configuration Object</a> </p>\n</li><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.ModelClass\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.ModelClass=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.ModelClass\">Extending the Backbone.Model Class</a> </p>\n</li></ul></li><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-Collections\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-Collections=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-Collections\">Collections</a> </p>\n<ul class=\"toc-indentation \"><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.CollectionClass\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.CollectionClass=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.CollectionClass\">Extending the Backbone.Collection Class</a> </p>\n</li><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-Underscore.jsFunctionality\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-Underscore.jsFunctionality=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-Underscore.jsFunctionality\">Underscore.js Functionality</a> </p>\n</li></ul></li><li class=\" \"> <p>\n<a class=\"document-link \" href=\"#!/guide/Alloy_Collection_and_Model_Objects-section-36739589_AlloyCollectionandModelObjects-EventHandling\" Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-EventHandling=\"Alloy_Collection_and_Model_Objects.html#36739589_AlloyCollectionandModelObjects-EventHandling\">Event Handling</a> </p>\n</li></ul> <div class=\"section section-2 \" id=\"36739589_AlloyCollectionandModelObjects-Models\">\n<h2 class=\"heading \"><span>Models</span></h2>\n<p>\nIn Alloy, models inherit from the <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Model\" target=\"_blank\">Backbone.Model</a> class. They contain the interactive data and logic used to control and access it. Models are specified with JavaScript files, which provide a table schema, adapter configuration and logic to extend the Backbone.Model class. Models are automatically defined and available in the controller scope as the name of the JavaScript file.    </p>\n<p>\nThe JavaScript file exports a definition object comprised of three different objects. The first object, called <tt class=\" \">config</tt>, defines the table schema and adapter information. The next two objects <tt class=\" \">extendModel</tt> and <tt class=\" \">extendCollection</tt> define functions to extend, override or implement the Backbone.Model and Backbone.Collection classes, respectively.    </p>\n<p>\nExample of the anatomy of a model file:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\">exports.definition = {</code></div>\n<div class=\"line\"><code class=\"plain\">    config : {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// table schema and adapter information</code></div>\n<div class=\"line\"><code class=\"plain\">    },</code></div>\n<div class=\"line\"><code class=\"plain\">    extendModel: function(Model) {\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">        _.extend(Model.prototype, {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Extend, override or implement Backbone.Model </code></div>\n<div class=\"line\"><code class=\"plain\">        });</code></div>\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> Model;</code></div>\n<div class=\"line\"><code class=\"plain\">    },</code></div>\n<div class=\"line\"><code class=\"plain\">    extendCollection: function(Collection) {\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">        _.extend(Collection.prototype, {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Extend, override or implement Backbone.Collection </code></div>\n<div class=\"line\"><code class=\"plain\">        });</code></div>\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> Collection;</code></div>\n<div class=\"line\"><code class=\"plain\">    }</code></div>\n<div class=\"line\"><code class=\"plain\">}</code></div>\n</div>\n</div> <p>\nTo access a model locally in a controller, use the <tt class=\" \">Alloy.createModel</tt> method. The first required parameter is the name of the JavaScript file minus the '.js' extension. The second optional parameter is the attributes for initializing the model object. For example, the following code creates a model object initialized with the specified title and author, retrieves the title and author fields from the model, then sets the label to the book title and author:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">var book = Alloy.createModel(</code><code class=\"string\">'book'</code><code class=\"plain\">, {title:</code><code class=\"string\">'Green Eggs and Ham'</code><code class=\"plain\">, author:</code><code class=\"string\">'Dr. Seuss'</code><code class=\"plain\">}); </code></div>\n<div class=\"line\"><code class=\"plain\">var title = book.get(</code><code class=\"string\">'title'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"plain\">var author = book.get(</code><code class=\"string\">'author'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"comments\">// Label object in the view with id = 'label'</code></div>\n<div class=\"line\"><code class=\"plain\">$.label.text = title + </code><code class=\"string\">' by '</code><code class=\"plain\"> + author;</code></div>\n</div>\n</div> <p>\nThe <tt class=\" \">book</tt> model object is a Backbone object wrapped by Alloy, so it can be treated as a Backbone.Model object.  You can use any Backbone Model or Events APIs with this object.    </p>\n<p>\nYou can also create a global singleton instance of a model, either in markup or in the controller, which may be accessed in all controllers.  Use the <tt class=\" \">Alloy.Models.instance</tt> method with the name of the model file minus the extension as the only parameter to create or access the singleton.  For example:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"comments\">// This will create a singleton if it has not been previously created,</code></div>\n<div class=\"line\"><code class=\"comments\">// or retrieves the singleton if it already exists.</code></div>\n<div class=\"line\"><code class=\"plain\">var book = Alloy.Models.instance(</code><code class=\"string\">'book'</code><code class=\"plain\">);</code></div>\n</div>\n</div> <p>\nFor examples using markup, see <a class=\"document-link \" href=\"#!/guide/Alloy_XML_Markup-section-35621528_AlloyXMLMarkup-ModelElement\" Alloy_XML_Markup.html#35621528_AlloyXMLMarkup-ModelElement=\"Alloy_XML_Markup.html#35621528_AlloyXMLMarkup-ModelElement\">Alloy XML Markup: Model Element</a>.    </p>\n<div class=\"section section-3 \" id=\"36739589_AlloyCollectionandModelObjects-ConfigurationObject\">\n<h3 class=\"heading \"><span>Configuration Object</span></h3>\n<p>\nThe <tt class=\" \">config</tt> object is comprised of three different objects: <tt class=\" \">columns</tt>, <tt class=\" \">defaults</tt> and <tt class=\" \">adapter</tt>.    </p>\n<p>\nThe <tt class=\" \">columns</tt> object defines the table schema information. The key is the record name and the value is the data type. The following data types are accepted and mapped to the appropriate SQLite type: string, varchar, int, tinyint, smallint, bigint, double, float, decimal, number, date, datetime and boolean. By default, any unknown data type maps to the SQLite type TEXT. Alternatively, the SQLite sync adapter accepts the SQLite keywords.    </p>\n<p>\nThe optional <tt class=\" \">defaults</tt> object defines the default values for a record if one or more record fields are left undefined upon creation. The key is the record name and the value is the default value.    </p>\n<p>\nThe adapter object defines how to access persistent storage. It contains two key-value pairs: <tt class=\" \">type</tt> and <tt class=\" \">collection_name</tt>.  The <tt class=\" \">type</tt> key identifies the sync adapter and the <tt class=\" \">collection_name</tt> key identifies the name of the table in the database or a namespace.  See <a class=\"document-link \" href=\"#!/guide/Alloy_Sync_Adapters_and_Migrations\" Alloy_Sync_Adapters_and_Migrations.html=\"Alloy_Sync_Adapters_and_Migrations.html\">Alloy Sync Adapters and Migrations</a> for more information.    </p>\n<p>\nFor example, suppose there is a model object called book (<tt class=\" \">book.js</tt>) defined as:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">exports.definition = {</code></div>\n<div class=\"line\"><code class=\"plain\">    config: {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"columns\"</code><code class=\"plain\">: {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"title\"</code><code class=\"plain\">: </code><code class=\"string\">\"String\"</code><code class=\"plain\">,</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"author\"</code><code class=\"plain\">: </code><code class=\"string\">\"String\"</code></div>\n<div class=\"line\"><code class=\"plain\">        },</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"defaults\"</code><code class=\"plain\">: {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"title\"</code><code class=\"plain\">: </code><code class=\"string\">\"-\"</code><code class=\"plain\">,</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"author\"</code><code class=\"plain\">: </code><code class=\"string\">\"-\"</code></div>\n<div class=\"line\"><code class=\"plain\">        },</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"adapter\"</code><code class=\"plain\">: {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"type\"</code><code class=\"plain\">: </code><code class=\"string\">\"sql\"</code><code class=\"plain\">,</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">\"collection_name\"</code><code class=\"plain\">: </code><code class=\"string\">\"books\"</code></div>\n<div class=\"line\"><code class=\"plain\">        }</code></div>\n<div class=\"line\"><code class=\"plain\">    }</code></div>\n<div class=\"line\"><code class=\"plain\">}</code></div>\n</div>\n</div> <p>\nThe code above describes a book object, which has two string (or TEXT) fields: title and author. If either field is left undefined, it will be assigned with the default value, a dash ('-').  The <tt class=\" \">sql</tt> type configures Backbone to use the SQL adapter to sync with the SQLite engine on Android and iOS devices to access a table in the database called 'books.'    </p>\n<p>\nYou may add custom properties to the <tt class=\" \">config</tt> object, which are available to the application as the model or collection's <tt class=\" \">config</tt> property or can be processed by a custom sync adapter during application initialization.  See <a class=\"document-link \" href=\"#!/guide/Alloy_Sync_Adapters_and_Migrations-section-36739597_AlloySyncAdaptersandMigrations-CustomSyncAdapters\" Alloy_Sync_Adapters_and_Migrations.html#36739597_AlloySyncAdaptersandMigrations-CustomSyncAdapters=\"Alloy_Sync_Adapters_and_Migrations.html#36739597_AlloySyncAdaptersandMigrations-CustomSyncAdapters\">Alloy Sync Adapters and Migrations: Custom Sync Adapters</a> for more information.    </p>\n</div>\n<div class=\"section section-3 \" id=\"36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.ModelClass\">\n<h3 class=\"heading \"><span>Extending the Backbone.Model Class</span></h3>\n<p>\nThe Backbone.Model class can be extended using the <tt class=\" \">extendModel</tt> object, which implements the Backbone.Model <tt class=\" \">extend</tt> method. This allows the Backbone.js code to be extended, overridden or implemented.    </p>\n<p>\nFor example, the <tt class=\" \">validate</tt> method is left unimplemented by Backbone.js. The model JS file can implement <tt class=\" \">validate(attrs)</tt>, where the parameter <tt class=\" \">attrs</tt> are changed attributes in the model. In Backbone.js, if <tt class=\" \">validate</tt> is implemented, it is called by the <tt class=\" \">set</tt> and <tt class=\" \">save(attributes)</tt> methods before changing the attributes and is also called by the <tt class=\" \">isValid</tt> method. For the <tt class=\" \">save</tt> method, validate is called if the <tt class=\" \">attributes</tt> parameter is defined.    </p>\n<p>\nIn the example code <tt class=\" \">book.js</tt> below, the JavaScript file implements the validate method, and adds a custom property and function.    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">exports.definition = {</code></div>\n<div class=\"line\"><code class=\"plain\">    config : {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// table schema and adapter information</code></div>\n<div class=\"line\"><code class=\"plain\">    },</code></div>\n<div class=\"line\"><code class=\"plain\">    extendModel: function(Model) {\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">        _.extend(Model.prototype, {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Implement the validate method\t\t\t\t\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">            validate: function (attrs) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">for</code><code class=\"plain\"> (var key in attrs) {</code></div>\n<div class=\"line\"><code class=\"plain\">                    var value = attrs[key];</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (key === </code><code class=\"string\">\"title\"</code><code class=\"plain\">) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (value.length &lt;= </code><code class=\"value\">0</code><code class=\"plain\">) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> </code><code class=\"string\">\"Error: No title!\"</code><code class=\"plain\">;</code></div>\n<div class=\"line\"><code class=\"plain\">                        }</code></div>\n<div class=\"line\"><code class=\"plain\">                    }</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (key === </code><code class=\"string\">\"author\"</code><code class=\"plain\">) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (value.length &lt;= </code><code class=\"value\">0</code><code class=\"plain\">) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> </code><code class=\"string\">\"Error: No author!\"</code><code class=\"plain\">;</code></div>\n<div class=\"line\"><code class=\"plain\">                        }\t</code></div>\n<div class=\"line\"><code class=\"plain\">                    }\t</code></div>\n<div class=\"line\"><code class=\"plain\">                }</code></div>\n<div class=\"line\"><code class=\"plain\">            },</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Extend Backbone.Model</code></div>\n<div class=\"line\"><code class=\"plain\">            customProperty: </code><code class=\"string\">'book'</code><code class=\"plain\">,</code></div>\n<div class=\"line\"><code class=\"plain\">            customFunction: function() {</code></div>\n<div class=\"line\"><code class=\"plain\">                Ti.API.info(</code><code class=\"string\">'I am a book model.'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"plain\">            },\t</code></div>\n<div class=\"line\"><code class=\"plain\">        });</code></div>\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> Model;</code></div>\n<div class=\"line\"><code class=\"plain\">    }</code></div>\n<div class=\"line\"><code class=\"plain\">}</code></div>\n</div>\n</div> <p>\nIn the controller, to access the model, do:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">var book = Alloy.createModel(</code><code class=\"string\">'book'</code><code class=\"plain\">, {title:</code><code class=\"string\">'Green Eggs and Ham'</code><code class=\"plain\">, author:</code><code class=\"string\">'Dr. Seuss'</code><code class=\"plain\">}); </code></div>\n<div class=\"line\"><code class=\"comments\">// Since set or save(attribute) is not being called, we can call isValid to validate the model object</code></div>\n<div class=\"line\"><code class=\"keyword\">if</code><code class=\"plain\"> (book.isValid() &amp;&amp; book.customProperty == </code><code class=\"string\">\"book\"</code><code class=\"plain\">) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Save data to persistent storage</code></div>\n<div class=\"line\"><code class=\"plain\">    book.save();</code></div>\n<div class=\"line\"><code class=\"plain\">}</code></div>\n<div class=\"line\"><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div>\n<div class=\"line\"><code class=\"plain\">    book.destroy();</code></div>\n<div class=\"line\"><code class=\"plain\">}</code></div>\n</div>\n</div> <p>\nFor more details, see the <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Model\" target=\"_blank\">Backbone.Model API</a>.    </p>\n</div>\n</div>\n<div class=\"section section-2 \" id=\"36739589_AlloyCollectionandModelObjects-Collections\">\n<h2 class=\"heading \"><span>Collections</span></h2>\n<p>\nCollections are ordered sets of models and inherit from the Backbone.Collection class. Alloy Collections are automatically defined and available in the controller scope as the name of the model. To access a collection in the controller locally, use the <tt class=\" \">Alloy.createCollection</tt> method with the name of the JavaScript file minus the '.js' extension as the required parameter. The second optional parameter can be an array of model objects for initialization. For example, the code below creates a collection using the previously defined model and reads data from persistent storage:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">var library = Alloy.createCollection(</code><code class=\"string\">'book'</code><code class=\"plain\">); </code></div>\n<div class=\"line\"><code class=\"plain\">library.fetch(); </code><code class=\"comments\">// Grab data from persistent storage </code></div>\n</div>\n</div> <p>\nThe <tt class=\" \">library</tt> collection object is a Backbone object wrapped by Alloy, so it can be treated as a Backbone.Collection object.  You can use any Backbone Collection or Events APIs with this object.    </p>\n<p>\nYou can also create a global singleton instance, either in markup or in the controller, which may be accessed in all controllers.  Use the <tt class=\" \">Alloy.Collections.instance</tt> method with the name of the model file minus the extension as the only parameter to create or access the singleton.  For example:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"comments\">// This will create a singleton if it has not been previously created,</code></div>\n<div class=\"line\"><code class=\"comments\">// or retrieves the singleton if it already exists.</code></div>\n<div class=\"line\"><code class=\"plain\">var library = Alloy.Collections.instance(</code><code class=\"string\">'book'</code><code class=\"plain\">);</code></div>\n</div>\n</div> <p>\nFor examples using markup, see <a class=\"document-link \" href=\"#!/guide/Alloy_XML_Markup-section-35621528_AlloyXMLMarkup-CollectionElement\" Alloy_XML_Markup.html#35621528_AlloyXMLMarkup-CollectionElement=\"Alloy_XML_Markup.html#35621528_AlloyXMLMarkup-CollectionElement\">Alloy XML Markup: Collection Element</a>.    </p>\n<div class=\"section section-3 \" id=\"36739589_AlloyCollectionandModelObjects-ExtendingtheBackbone.CollectionClass\">\n<h3 class=\"heading \"><span>Extending the Backbone.Collection Class</span></h3>\n<p>\nLike the Backbone.Model class, the Backbone.Collection class can be similarly extended in the model JavaScript file. For example, the <tt class=\" \">comparator</tt> method is left unimplemented in Backbone.js. The code below sorts the library by book title:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">exports.definition = {</code></div>\n<div class=\"line\"><code class=\"plain\">    config : {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// table schema and adapter information</code></div>\n<div class=\"line\"><code class=\"plain\">    },</code></div>\n<div class=\"line\"><code class=\"plain\">    extendModel: function(Model) {\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">        _.extend(Model.prototype, {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Extend, override or implement the Backbone.Model methods\t\t\t\t\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">        });</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> Model;</code></div>\n<div class=\"line\"><code class=\"plain\">    },</code></div>\n<div class=\"line\"><code class=\"plain\">    extendCollection: function(Collection) {\t\t</code></div>\n<div class=\"line\"><code class=\"plain\">        _.extend(Collection.prototype, {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Implement the comparator method.</code></div>\n<div class=\"line\"><code class=\"plain\">    \t    comparator : function(book) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> book.get(</code><code class=\"string\">'title'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"plain\">            }</code></div>\n<div class=\"line\"><code class=\"plain\">        }); </code><code class=\"comments\">// end extend</code></div>\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> Collection;</code></div>\n<div class=\"line\"><code class=\"plain\">    }</code></div>\n<div class=\"line\"><code class=\"plain\">}</code></div>\n</div>\n</div> </div>\n<div class=\"section section-3 \" id=\"36739589_AlloyCollectionandModelObjects-Underscore.jsFunctionality\">\n<h3 class=\"heading \"><span>Underscore.js Functionality</span></h3>\n<p>\nAdditionally, the Backbone.Collection class inherits some functionality from Underscore.js, which can help simplify iterative functions. For example, to add the title of each book object in the library collection to a table, you could use the <tt class=\" \">map</tt> function to set the table:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\"> </code></div>\n<div class=\"line\"><code class=\"plain\">var data = [];</code></div>\n<div class=\"line\"><code class=\"plain\">library.map(function(book) {</code></div>\n<div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// The book argument is an individual model object in the collection</code></div>\n<div class=\"line\"><code class=\"plain\">    var title = book.get(</code><code class=\"string\">'title'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"plain\">    var row = Ti.UI.createTableViewRow({</code><code class=\"string\">\"title\"</code><code class=\"plain\">:title});</code></div>\n<div class=\"line\"><code class=\"plain\">    data.push(row);</code></div>\n<div class=\"line\"><code class=\"plain\">});</code></div>\n<div class=\"line\"><code class=\"comments\">// TableView object in the view with id = 'table'</code></div>\n<div class=\"line\"><code class=\"plain\">$.table.setData(data);</code></div>\n</div>\n</div> <p>\nFor more details, see the <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Collection\" target=\"_blank\">Backbone.Collection API</a>.    </p>\n</div>\n</div>\n<div class=\"section section-2 \" id=\"36739589_AlloyCollectionandModelObjects-EventHandling\">\n<h2 class=\"heading \"><span>Event Handling</span></h2>\n<p class=\"p1\">\nWhen working with Alloy Models and Collections, use the Backbone.Events <tt class=\" \">on</tt>, <tt class=\" \">off</tt> and <tt class=\" \">trigger</tt> methods. For example:    </p>\n<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"confbox programlisting scroll-unprocessed\">\n<div class=\"defaultnew syntaxhighlighter\">\n<div class=\"line\"><code class=\"plain\">var library = Alloy.createCollection(</code><code class=\"string\">'book'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"plain\">function event_callback (context) {</code></div>\n<div class=\"line\"><code class=\"plain\">\tvar output = context || </code><code class=\"string\">'change is bad.'</code><code class=\"plain\">;</code></div>\n<div class=\"line\"><code class=\"plain\">    Ti.API.info(output);</code></div>\n<div class=\"line\"><code class=\"plain\">};</code></div>\n<div class=\"line\"><code class=\"comments\">// Bind the callback to the change event of the collection.</code></div>\n<div class=\"line\"><code class=\"plain\">library.on(</code><code class=\"string\">'change'</code><code class=\"plain\">, event_callback);</code></div>\n<div class=\"line\"><code class=\"comments\">// Trigger the change event and pass context to the handler.</code></div>\n<div class=\"line\"><code class=\"plain\">library.trigger(</code><code class=\"string\">'change'</code><code class=\"plain\">, </code><code class=\"string\">'change is good.'</code><code class=\"plain\">);</code></div>\n<div class=\"line\"><code class=\"comments\">// Passing no parameters to the off method unbinds all event callbacks to the object.</code></div>\n<div class=\"line\"><code class=\"plain\">library.off();</code></div>\n<div class=\"line\"><code class=\"comments\">// This trigger does not have a response.</code></div>\n<div class=\"line\"><code class=\"plain\">library.trigger(</code><code class=\"string\">'change'</code><code class=\"plain\">);</code></div>\n</div>\n</div> <p class=\"p1\">\nAlloy Model and Collection objects don't support the Titanium <tt class=\" \">addEventListener</tt>, <tt class=\" \">removeEventListener</tt> and <tt class=\" \">fireEvent</tt> methods.    </p>\n<p>\nIf you are using Alloy's Model-View binding mechanism, the Backbone add, change, destroy, fetch, remove, and reset events are automatically bound to an internal callback to update the model data in the view.  Be careful not to override or unbind these events.    </p>\n<p>\nIf you want to fire or listen to multiple events, Backbone.js uses spaces to delimit its events in the event string; therefore, do <strong class=\" \">NOT</strong> name any custom events with spaces.    </p>\n<p>\nFor more details, see the <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Events\" target=\"_blank\">Backbone.Events API</a>.    </p>\n</div>\n</div>\n<div class=\"footer\">\n            Created with <a href=\"http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence\" target=\"_blank\">Scroll EclipseHelp Exporter for Confluence</a>.\n        </div>\n</div>\n</body>\n</html>\n","title":"Alloy Collection and Model Objects"});