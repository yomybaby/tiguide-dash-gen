<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Deploying to Android devices</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="Scroll EclipseHelp Exporter" name="generator" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" media="print" />
</head>
<body>
<div class="container">
<div class="header"></div>
<div id="29004923" class="content"><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=29004923"><span>Edit</span></a>
<h1>Deploying to Android devices</h1>
<div class="section section-2 " id="29004923_DeployingtoAndroiddevices-Objective">
<h2 class="heading "><span>Objective</span></h2>
<p>
In this chapter, you will learn how to deploy an Android app to a device for testing.    </p>
</div>
<div class="section section-2 " id="29004923_DeployingtoAndroiddevices-Contents">
<h2 class="heading "><span>Contents</span></h2>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-ConfiguretheAndroiddevice">
<h3 class="heading "><span>Configure the Android device</span></h3>
<p>
In order to install an application directly to your device, you need to configure it to use a USB connection.  The configuration settings vary by device.    </p>
<p>
<strong class=" "> <u class=" ">For 2.x and 3.x Devices:</u> </strong> </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">Settings</strong>.    </p>
</li><li class=" "> <p>
Click <strong class=" ">Applications</strong>.    </p>
</li><li class=" "> <p>
Enable <strong class=" ">Unknown sources</strong>, that is, check this option.  This permits the device to install apps that do not originate from Google Play.    </p>
</li><li class=" "> <p>
Click <strong class=" ">Development</strong>.    </p>
</li><li class=" "> <p>
Enable <strong class=" ">USB debugging</strong>, that is, check this option.  This permits the device to install apps over a USB connection.    </p>
</li><li class=" "> <p>
(Optional) Enable <strong class=" ">Allow mock locations</strong>, that is, check this option.  This option creates fake GPS locations to test location services.    </p>
</li><li class=" "> <p>
(Optional and if available) Enable <strong class=" ">Stay awake</strong>, that is, check this option.  This option keeps the screen on and disables the lock screen while the device is connected to USB.    </p>
</li><li class=" "> <p>
Back out of or close <strong class=" ">Settings</strong>.    </p>
</li></ol> <p>
<strong class=" "> <u class=" ">For 4.x Devices:</u> </strong> </p>
<p>
For Android 4.2 and later devices, you need to enable <strong class=" ">Developer options</strong> by opening <strong class=" ">Settings</strong>, click <strong class=" ">About</strong> then click the <strong class=" ">Build number</strong> item seven items.  If you do not do this, you will not see the <strong class=" ">Developer options</strong> item in <strong class=" ">Settings</strong>.    </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">Settings</strong>.    </p>
</li><li class=" "> <p>
Click <strong class=" ">Security</strong>.    </p>
</li><li class=" "> <p>
Enable <strong class=" ">Unknown sources</strong>, that is, check this option.  This permits the device to install apps that do not originate from Google Play.    </p>
</li><li class=" "> <p>
Back out to <strong class=" ">Settings</strong>.    </p>
</li><li class=" "> <p>
Click <strong class=" ">Developer options</strong>.    </p>
</li><li class=" "> <p>
(If available) Set the switch in the title bar to on.    </p>
</li><li class=" "> <p>
Enable <strong class=" ">USB debugging</strong>, that is, check this option.  This permits the device to install apps over a USB connection.    </p>
</li><li class=" "> <p>
(Optional) Enable <strong class=" ">Stay awake</strong>, that is, check this option.  This option keeps the screen on and disables the lock screen while the device is connected to USB.    </p>
</li><li class=" "> <p>
(Optional) Enable <strong class=" ">Allow mock locations</strong>, that is, check this option.  This option creates fake GPS locations to test location services.    </p>
</li><li class=" "> <p>
Back out of or close <strong class=" ">Settings</strong>.    </p>
</li></ol> <p>
</p>
<div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
<p>
These configuration settings are the default Android settings. Some options may not appear or you may need to configure other manufacturer-specific settings.    </p>
</div>
</div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-InstalltheUSBdriver(Windowsonly)">
<h3 class="heading "><span>Install the USB driver (Windows only)</span></h3>
<p>
Developers on Windows may need to install a USB driver specific to the manufacturer, sometimes even the make of the device on which they'll be testing. The driver enables your Windows computer to communicate with your Android device. Google provides download links to the drivers at <a class="external-link external-link" href="http://developer.android.com/sdk/oem-usb.html" target="_blank">Android Developer: OEM USB Drivers</a>.    </p>
</div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-Createaudevrulesfile(Linuxonly)">
<h3 class="heading "><span>Create a udev rules file (Linux only)</span></h3>
<p>
Ubuntu Linux developers need to add a udev rules file, which contains USB configuration information for each type of device used for development. In the rules file, identify each device manufacturer by a unique vendor ID. Follow step 3 from <a class="external-link external-link" href="http://developer.android.com/guide/developing/device.html#setting-up" target="_blank">Android Developer: Using Hardware Devices</a>.    </p>
</div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-Connectthedevice">
<h3 class="heading "><span>Connect the device</span></h3>
<p>
Connect the Android device to your computer using an USB cord.  Note that some USB cables are only power cables and do not allow a data connections.  Make sure you use a USB cable that allows a data connection.    </p>
<p>
For 4.3 devices, a &quot;Allow USB debugging?&quot; dialog appears.  Optionally enable the <strong class=" ">Always allow from this</strong> <strong class=" ">computer</strong> checkbox. Click <strong class=" ">OK.</strong> </p>
<p>
For 3.x and later devices, make sure when you connect your device that it is connected as a media device or for USB debugging.  After connecting the device, pull down the notification tray.    </p>
<ul class=" "><li class=" "> <p>
If you see a <strong class=" ">Connected as media device</strong> item, you have the correct USB setting.    </p>
</li><li class=" "> <p>
If you see a <strong class=" ">Connected as camera</strong> item, click this item to open a dialog. Check the     <span style="color: #4c4c4c;">
<strong class=" ">Media device (MTP) </strong>option and uncheck the <strong class=" ">Camera (PTP)</strong> option.  Hit the <strong class=" ">Back</strong> or <strong class=" ">Home</strong> button.    </span>
</p>
</li><li class=" "> <p>
If you do not see either option and you see <strong class=" ">USB debugging connected</strong>, your device is connected for USB debugging.    </p>
</li><li class=" "> <p>
If you do not see any of these options, make sure you correctly followed the directions in the previous sections.    </p>
</li></ul> </div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-DeploytheapplicationusingStudio">
<h3 class="heading "><span>Deploy the application using Studio</span></h3>
<p>
Once you have configured your device and connected it to your computer's USB port, you are ready to deploy your app to it.    </p>
<p>
<img src="images/download/attachments/29004923/LaunchAndroidDevice.png" alt="images/download/attachments/29004923/LaunchAndroidDevice.png" class="confluence-embedded-image" />
</p>
<p>
In Titanium Studio, first select the project in the <strong class=" ">Project Explorer</strong> view, then in the global tool bar, select <strong class=" ">Run</strong> from the <strong class=" ">Launch Mode </strong>drop-down list and an Android device from the <strong class=" ">Target</strong> drop-down list under the <strong class=" ">Android Application Installer</strong> category.  If the <strong class=" ">Launch Automatically</strong> option is enabled under the <strong class=" ">Target</strong> drop-down list, the application will be automatically launched after the device is selected.  If not, you need to click the <strong class=" ">Launch</strong> button to start the build process.  Your app will be built, installed to your device and automatically launched.    </p>
<p>
<strong class=" ">Prior to Studio 3.2.0:</strong> </p>
<p>
Make sure only one device is connected to your computer.  In Titanium Studio, click on the <strong class=" ">Run</strong> menu as shown, then choose <strong class=" ">Android Device</strong>.    </p>
<p>
<img src="images/download/attachments/29004923/android_deploy.png" alt="images/download/attachments/29004923/android_deploy.png" class="confluence-embedded-image" width="200" />
</p>
</div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-DeployingtheapplicationusingtheCLI">
<h3 class="heading "><span>Deploying the application using the CLI</span></h3>
<p>
To launch the application using the Titanium CLI, run the following command:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ti build -p android -T device --device-id &lt;DEVICE_ID&gt;</code></div>
</div>
</div> <p>
You may omit the <tt class=" ">--device-id</tt> parameter if you only have one device connected.  To retrieve a list of connected devices, run one of the following commands:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ti info -t android</code></div>
<div class="line"><code class="plain">## or</code></div>
<div class="line"><code class="plain">adb devices -l</code></div>
</div>
</div> </div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-Deploytheapplicationusingadb">
<h3 class="heading "><span>Deploy the application using adb</span></h3>
<p>
You can use the <tt class=" ">adb</tt> command to install apps to a connected device if you have a built APK file. If the <tt class=" ">platform-tools</tt> directory (within the Android SDK) is in your system's PATH, from a terminal, run the following command:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">adb install your_project/build/android/bin/app.apk</code></div>
</div>
</div> <p>
Hint: use the  <tt class=" ">-e</tt>  switch to interact with a single running Android emulator; use  <tt class=" ">-d</tt>  to interact with a single connected device.    </p>
<p>
You can uninstall an app with <tt class=" ">adb</tt> as well:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">adb uninstall com.your.appid</code></div>
</div>
</div> </div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-Deploytoremotetesters">
<h3 class="heading "><span>Deploy to remote testers</span></h3>
<p>
You can deploy your app to remote users for testing. They will need to configure their device as described above. From there, all you need to do is get the APK file to them and their device. A simple solution is to post it on a web site (such as a Dropbox) account. You could also email it to them, as long as they receive the email on their device and not a desktop. In either case, on a device, if you tap on an APK file, Android will prompt you to install that application.    </p>
<p>
Over the air distribution frameworks were popularized in the iOS space by services such as TestFlight App. With such systems, users install a common client app on their device. That client interacts with a remote server, which is used to distribute beta versions of your app. When you update your app, the client component can detect the change and notify the user to upgrade your app. The open source HockeyKit system (<a class="external-link external-link" href="http://hockeykit.net/" target="_blank">http://hockeykit.net/</a>) supports distributing both iOS and Android apps to beta testers. It also provides a framework for gathering user feedback and statistics. You can install HockeyKit on your own web server or subscribe to their HockeyApp service and they'll host the server for you.    </p>
</div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-InstalltotheSDCard">
<h3 class="heading "><span>Install to the SD Card</span></h3>
<p>
By default, your application is installed to the device's internal storage.  To configure you application to install to the SD card, you need to add the <tt class=" ">android:installLocation</tt> attribute to the <tt class=" ">manifest</tt> element in the <tt class=" ">tiapp.xml</tt> file.  This attribute is supported on Android 2.2 (API Level 8) and later.  Assign the <tt class=" ">installLocation</tt> element one of the following values:    </p>
<ul class=" "><li class=" "> <p>
<strong class=" ">preferExternal</strong> -- specifies that you prefer your app to be installed to the SD card, but if one is not present the app can be installed to internal storage.    </p>
</li><li class=" "> <p>
<strong class=" ">auto</strong> &ndash; specifies that the phone's configuration will determine the installation location. Generally, your app will be installed to internal storage if sufficient space is available. In that case, users could still move your app by opening <strong class=" ">Settings</strong> &gt; <strong class=" ">Applications</strong> &gt; <strong class=" ">Manage</strong> <strong class=" ">applications </strong>or <strong class=" ">Settings </strong>&gt;<strong class=" "> Application manager</strong>, tapping your app, and tapping <strong class=" ">Move to SD card</strong>.  Note that some manufacturers do not allow applications to be run from the SD card.    </p>
</li><li class=" "> <p>
<strong class=" ">internalOnly</strong> &ndash; which specifies that your app cannot be installed to the SD card. See the <a class="external-link external-link" href="http://developer.android.com/guide/appendix/install-location.html#ShouldNot" target="_blank">Android docs</a> for the various reasons why you might choose this option.    </p>
</li></ul><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">tiapp.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;android xmlns:android=</code><code class="string">"http://schemas.android.com/apk/res/android"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">   &lt;manifest android:installLocation=</code><code class="string">"preferExternal"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">&lt;/android&gt;</code></div>
</div>
</div> </div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-Changetheversionnumber">
<h3 class="heading "><span>Change the version number</span></h3>
<p>
To change the version of the application, add the following attributes to the <tt class=" ">manifest</tt> element in your <tt class=" ">tiapp.xml</tt>:    </p>
<ul class=" "><li class=" "> <p>
<strong class=" ">android:versionCode</strong> - The versionCode cannot be a floating point number like &quot;0.9&quot;, it needs to be a whole number like &quot;2&quot;. The versionCode must be an int and each time it is submitted to the market must be greater than the last time.    </p>
</li><li class=" "> <p>
<strong class=" ">android:versionName</strong> - The versionName can be anything you want.    </p>
</li></ul><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">tiapp.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;android xmlns:android=</code><code class="string">"http://schemas.android.com/apk/res/android"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;manifest android:versionCode=</code><code class="string">"2"</code><code class="plain"> android:versionName=</code><code class="string">"8.675.309"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">&lt;/android&gt;</code></div>
</div>
</div> <p>
For more information on versioning in Android, see <a class="external-link external-link" href="http://developer.android.com/guide/publishing/versioning.html" target="_blank">http://developer.android.com/guide/publishing/versioning.html</a>.    </p>
<p>
<img src="images/download/attachments/29004810/android-app-versioning.jpg" alt="images/download/attachments/29004810/android-app-versioning.jpg" class="confluence-embedded-image confluence-external-resource" />
</p>
</div>
<div class="section section-3 " id="29004923_DeployingtoAndroiddevices-Troubleshooting">
<h3 class="heading "><span>Troubleshooting</span></h3>
<div class="section section-4 " id="29004923_DeployingtoAndroiddevices-Restartadb">
<h4 class="heading "><span>Restart adb</span></h4>
<p>
If your device is not recognized after following the above instructions, the adb process may have hung.  Run the following commands in a terminal to restart adb:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">adb devices </code><code class="comments">// print list of attached devices</code></div>
<div class="line"><code class="plain">adb kill-server</code></div>
<div class="line"><code class="plain">adb start-server</code></div>
<div class="line"><code class="plain">adb devices </code><code class="comments">// verify that device has been recognized</code></div>
</div>
</div> </div>
<div class="section section-4 " id="29004923_DeployingtoAndroiddevices-USBcord">
<h4 class="heading "><span>USB cord</span></h4>
<p>
Some USB cords are only power cables and do not allow a data connection.  Make sure that your USB cord allows a data connection.    </p>
</div>
</div>
</div>
<div class="section section-2 " id="29004923_DeployingtoAndroiddevices-Summary">
<h2 class="heading "><span>Summary</span></h2>
<p>
In this chapter, you learned that deploying to an Android device is fairly simple. You configure the device to accept non-market apps. Then, you just need to get the APK file to the testing device. You can do that via Titanium Studio, <tt class=" ">adb</tt>, an ad-hoc distribution method like a web page, or via a framework like HockeyKit.    </p>
</div>
</div>
<div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
</div>
</body>
</html>
