<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>iOS Map Kit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="Scroll EclipseHelp Exporter" name="generator" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" media="print" />
</head>
<body>
<div class="container">
<div class="header"></div>
<div id="37540542" class="content"><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=37540542"><span>Edit</span></a>
<h1>iOS Map Kit</h1>
<p>
</p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-Introduction" iOS_Map_Kit.html#37540542_iOSMapKit-Introduction="iOS_Map_Kit.html#37540542_iOSMapKit-Introduction">Introduction</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-GettingStarted" iOS_Map_Kit.html#37540542_iOSMapKit-GettingStarted="iOS_Map_Kit.html#37540542_iOSMapKit-GettingStarted">Getting Started</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-TransitioningfromTitanium.Map" iOS_Map_Kit.html#37540542_iOSMapKit-TransitioningfromTitanium.Map="iOS_Map_Kit.html#37540542_iOSMapKit-TransitioningfromTitanium.Map">Transitioning from Titanium.Map</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-Views" iOS_Map_Kit.html#37540542_iOSMapKit-Views="iOS_Map_Kit.html#37540542_iOSMapKit-Views">Views</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-Annotations" iOS_Map_Kit.html#37540542_iOSMapKit-Annotations="iOS_Map_Kit.html#37540542_iOSMapKit-Annotations">Annotations</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-Routes" iOS_Map_Kit.html#37540542_iOSMapKit-Routes="iOS_Map_Kit.html#37540542_iOSMapKit-Routes">Routes</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-Camera" iOS_Map_Kit.html#37540542_iOSMapKit-Camera="iOS_Map_Kit.html#37540542_iOSMapKit-Camera">Camera</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-EventHandling" iOS_Map_Kit.html#37540542_iOSMapKit-EventHandling="iOS_Map_Kit.html#37540542_iOSMapKit-EventHandling">Event Handling</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-FurtherReading" iOS_Map_Kit.html#37540542_iOSMapKit-FurtherReading="iOS_Map_Kit.html#37540542_iOSMapKit-FurtherReading">Further Reading</a> </p>
</li></ul> <p>
</p>
<div class="section section-2 " id="37540542_iOSMapKit-Introduction">
<h2 class="heading "><span>Introduction</span></h2>
<p>
Since Release 3.2.0, the ti.map add-on module provides native map support using the iOS Map Kit framework.  This module replaces the built-in Titanium.Map module, which no longer supports native maps for iOS.    </p>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-GettingStarted">
<h2 class="heading "><span>Getting Started</span></h2>
<p>
The ti.map module is included as part of the Titanium SDK since Release 3.2.0.  To include it in your project, edit your <tt class=" ">tiapp.xml</tt> file to use the module:    </p>
<ul class=" "><li class=" "> <p>
Using the GUI Overview version of the <tt class=" ">tiapp.xml</tt> editor, in the <strong class=" ">Modules</strong> section, click the add button (green plus sign), select the ti.map module, then click the OK button to add it.    </p>
</li><li class=" "> <p>
If you are using a text editor, add the following to your modules section:    </p>
</li></ul><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">    &lt;modules&gt;</code></div>
<div class="line"><code class="plain">        &lt;!-- Add </code><code class="keyword">this</code><code class="plain"> line to your modules section --&gt;</code></div>
<div class="line"><code class="plain">        &lt;module platform=</code><code class="string">"iphone"</code><code class="plain">&gt;ti.map&lt;/module&gt;</code></div>
<div class="line"><code class="plain">    &lt;/modules&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
</div>
</div> <p>
Within your application's JavaScript files, instantiate the module with the <tt class=" ">require('ti.map')</tt> method:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var MapModule = require(</code><code class="string">'ti.map'</code><code class="plain">);</code></div>
</div>
</div> <p>
Then, you can make subsequent API calls using the previously created <tt class=" ">MapModule</tt> object .    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Create a default Map.View class</code></div>
<div class="line"><code class="plain">var mapview = MapModule.createView({mapType:MapModule.NORMAL_TYPE});</code></div>
</div>
</div> </div>
<div class="section section-2 " id="37540542_iOSMapKit-TransitioningfromTitanium.Map">
<h2 class="heading "><span>Transitioning from Titanium.Map</span></h2>
<p>
The new add-on module behaves the same as the built-in Titanium.Map proxy with the following exceptions:    </p>
<div class="section section-3 " id="37540542_iOSMapKit-Requirements:">
<h3 class="heading "><span>Requirements:</span></h3>
<ul class=" "><li class=" "> <p>
Applications using this module must be built using Xcode 5 or later with Titanium SDK 3.2.0 and later.    </p>
</li></ul> </div>
<div class="section section-3 " id="37540542_iOSMapKit-Newfeatures:">
<h3 class="heading "><span>New features:</span></h3>
<ul class=" "><li class=" "> <p>
<strong class=" ">View the map in a 3D perspective.  Available for iOS 7 and later.</strong>  Use the new Camera object to create a camera position to view the map.    </p>
</li><li class=" "> <p>
<strong class=" ">New Annotation property, canShowCallout.</strong>  Use to control whether to display the annotation callout when the annotation is selected.    </p>
</li></ul> </div>
<div class="section section-3 " id="37540542_iOSMapKit-Behaviorchanges:">
<h3 class="heading "><span>Behavior changes:</span></h3>
<ul class=" "><li class=" "> <p>
<strong class=" ">Route class.</strong>  You need to create a Route object before adding it to the map view.  Previously in the Titanium.Map proxy, routes were created using an abstract data type with the <tt class=" ">addRoute</tt> method.    </p>
</li><li class=" "> <p>
<strong class=" ">Dismissing a callout</strong>.  On iOS 6, you can dismiss the callout by clicking on it or anywhere on the map.  On iOS 7, you can only dismiss a callout by clicking anywhere on the map.    </p>
</li><li class=" "> <p>
<span style="color: #444444;">
<strong class=" ">Missing map constant.</strong>  The STANDARD_TYPE constant is missing from the map module.  Use the NORMAL_TYPE constant instead    </span>
<span style="color: #444444;">
.    </span>
</p>
</li></ul> </div>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-Views">
<h2 class="heading "><span>Views</span></h2>
<p>
The <tt class=" ">View</tt> class is the core UI component of the ti.map module. It allows Titanium to use the iOS map kit framework to view geographic data and add annotations and routes. As it is a native UI component, users will also have access to features like scrolling and multi-touch zoom. In its most basic form, the <tt class=" ">View</tt> can simply display a basic map given a geographic position via latitude and longitude.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Add in the module</code></div>
<div class="line"><code class="plain">var MapModule = require(</code><code class="string">'ti.map'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var win = Ti.UI.createWindow({backgroundColor: </code><code class="string">'white'</code><code class="plain">});</code></div>
<div class="line"><code class="plain">var third = Titanium.Platform.displayCaps.platformHeight / </code><code class="value">3</code><code class="plain">;</code></div>
<div class="line"><code class="plain">var map1 = MapModule.createView({</code></div>
<div class="line"><code class="plain">    userLocation: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    mapType: MapModule.NORMAL_TYPE,</code></div>
<div class="line"><code class="plain">    animate: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    region: {latitude: -</code><code class="value">33.87365</code><code class="plain">, longitude: </code><code class="value">151.20689</code><code class="plain">, latitudeDelta: </code><code class="value">0.1</code><code class="plain">, longitudeDelta: </code><code class="value">0.1</code><code class="plain"> },</code></div>
<div class="line"><code class="plain">    height: </code><code class="string">'33%'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    top: </code><code class="value">0</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    width: Ti.UI.FILL</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var map2 = MapModule.createView({</code></div>
<div class="line"><code class="plain">    userLocation: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    mapType: MapModule.HYBRID_TYPE,</code></div>
<div class="line"><code class="plain">    animate: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    region: {latitude: -</code><code class="value">33.87365</code><code class="plain">, longitude: </code><code class="value">151.20689</code><code class="plain">, latitudeDelta: </code><code class="value">0.1</code><code class="plain">, longitudeDelta: </code><code class="value">0.1</code><code class="plain"> },</code></div>
<div class="line"><code class="plain">    height: </code><code class="string">'33%'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    top: third,</code></div>
<div class="line"><code class="plain">    width: Ti.UI.FILL</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var map3 = MapModule.createView({</code></div>
<div class="line"><code class="plain">    userLocation: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    mapType: MapModule.SATELLITE_TYPE,</code></div>
<div class="line"><code class="plain">    animate: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    region: {latitude: -</code><code class="value">33.87365</code><code class="plain">, longitude: </code><code class="value">151.20689</code><code class="plain">, latitudeDelta: </code><code class="value">0.1</code><code class="plain">, longitudeDelta: </code><code class="value">0.1</code><code class="plain"> },</code></div>
<div class="line"><code class="plain">    height: </code><code class="string">'33%'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    top: </code><code class="value">2</code><code class="plain"> * third,</code></div>
<div class="line"><code class="plain">    width: Ti.UI.FILL</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">win.add(map1);</code></div>
<div class="line"><code class="plain">win.add(map2);</code></div>
<div class="line"><code class="plain">win.add(map3);</code></div>
<div class="line"><code class="plain">win.open();</code></div>
</div>
</div> <p>
<img src="images/download/attachments/37540542/MultiViewMap.png" alt="images/download/attachments/37540542/MultiViewMap.png" class="confluence-embedded-image" />
</p>
<p>
The previous example displays three map views of the same region in the same window with different map types set. From the top to bottom, you have an example of NORMAL_TYPE, HYBRID_TYPE and SATELLITE_TYPE.    </p>
<p>
As seen above, changing a few lines of code alters the appearance of each map. The following properties are unique to Map View to manipulate the appearance and behavior of the View class:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">mapType</tt> - Indicates what type of map should be displayed. Choses are:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">&lt;MapObject&gt;.STANDARD_TYPE - </tt>Basic map with labels.    </p>
</li><li class=" "> <p>
<tt class=" ">&lt;MapObject&gt;.SATELLITE_TYPE - </tt>Satellite imagery without map labels.    </p>
</li><li class=" "> <p>
<tt class=" ">&lt;MapObject&gt;.HYBRID_TYPE</tt> - SATELLITE_TYPE with map labels.    </p>
</li></ul></li><li class=" "> <p>
<tt class=" ">region</tt> - This is an object that contains the four properties defining the visible area of the <tt class=" ">View</tt>. The same latitude and longitude of a <tt class=" ">region</tt> can be represented with a different level of zoom via the <tt class=" ">latitudeDelta </tt>and <tt class=" ">longitudeDelta</tt> properties.    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">latitude</tt>- The latitude of your map's target region.    </p>
</li><li class=" "> <p>
<tt class=" ">longitude</tt> - The longitude of your map's target region.    </p>
</li><li class=" "> <p>
<tt class=" ">latitudeDelta</tt> - The measure of latitude north and south from your target regions's latitude that will be visible in the <tt class=" ">View</tt>. The smaller the delta value, the closer the zoom on your map.    </p>
</li><li class=" "> <p>
<tt class=" ">longitudeDelta</tt> - The measure of longitude east and west from your target regions's longitude that will be visible in the <tt class=" ">View.</tt> </p>
</li></ul></li><li class=" "> <p>
<tt class=" ">animate</tt> - A boolean that indicates whether or not map actions, like opening and adding annotations, should be animated.    </p>
</li><li class=" "> <p>
<tt class=" ">userLocation</tt> - A boolean that indicates if the map should show the user's current device location as a pin on the map.    </p>
</li><li class=" "> <p>
<tt class=" ">camera</tt> - <strong class=" ">Available for iOS 7 and later.</strong> Specify a Camera object to view the map in a 3D perspective.  For more details, see the <a class="document-link " href="#!/guide/iOS_Map_Kit-section-37540542_iOSMapKit-Camera" iOS_Map_Kit.html#37540542_iOSMapKit-Camera="iOS_Map_Kit.html#37540542_iOSMapKit-Camera">Camera section</a>.    </p>
</li><li class=" "> <p>
<tt class=" ">rotatesEnabled</tt> - <strong class=" ">Available for iOS 7 and later. </strong>A boolean that indicates if the map can be rotated by the user.    </p>
</li></ul> <p>
There are two more components that add a significant amount of functionality to your map <tt class=" ">View</tt>--<tt class=" ">Annotation</tt> and <tt class=" ">Route</tt>. They allow us to add places of interest to our maps as well as plot paths between them.    </p>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-Annotations">
<h2 class="heading "><span>Annotations</span></h2>
<p>
Annotations, created with the <tt class=" ">createAnnotation</tt> method, mark places of interest on our <tt class=" ">View </tt>with &quot;pins&quot;, images, and text. They can be added when a <tt class=" ">View</tt> is created via the <tt class=" ">annotations</tt> array property, or anytime afterwards with the <tt class=" ">addAnnotation</tt> method. Users can even interact with them to learn more about annotated locations.    </p>
<p>
Adding an annotation to a <tt class=" ">View</tt> is simple. Let's modify the previous example to show only one view of Sydney with some landmarks.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var MapModule = require(</code><code class="string">'ti.map'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var win = Ti.UI.createWindow({backgroundColor: </code><code class="string">'white'</code><code class="plain">});</code></div>
<div class="line"><code class="plain">var opera = MapModule.createAnnotation({</code></div>
<div class="line"><code class="plain">    latitude: -</code><code class="value">33.8569</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    longitude: </code><code class="value">151.2153</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    centerOffset: {x: </code><code class="value">80</code><code class="plain">, y: </code><code class="value">25</code><code class="plain">},</code></div>
<div class="line"><code class="plain">    image: </code><code class="string">'SydneyOperaHouse.jpg'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    title: </code><code class="string">'Sydney Opera House'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    subtitle: </code><code class="string">'Sydney, New South Wales, Australia'</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// For eventing, use the Map View's click event</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// and monitor the clicksource property for 'rightButton'.    </code></div>
<div class="line"><code class="plain">    rightButton: Ti.UI.iPhone.SystemButton.CONTACT_ADD</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var bridge = MapModule.createAnnotation({</code></div>
<div class="line"><code class="plain">    latitude: -</code><code class="value">33.852222</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    longitude: </code><code class="value">151.210556</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    pincolor: MapModule.ANNOTATION_PURPLE,   </code></div>
<div class="line"><code class="plain">    title: </code><code class="string">'Sydney Harbour Bridge'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    subtitle: </code><code class="string">'Port Jackson'</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// For eventing, use the Map View's click event</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// and monitor the clicksource property for 'leftButton'.</code></div>
<div class="line"><code class="plain">    leftButton: Ti.UI.iPhone.SystemButton.INFO_DARK</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var mapview = MapModule.createView({</code></div>
<div class="line"><code class="plain">    mapType: MapModule.NORMAL_TYPE,</code></div>
<div class="line"><code class="plain">    region: {latitude: -</code><code class="value">33.87365</code><code class="plain">, longitude: </code><code class="value">151.20689</code><code class="plain">, latitudeDelta: </code><code class="value">0.1</code><code class="plain">, longitudeDelta: </code><code class="value">0.1</code><code class="plain"> },</code></div>
<div class="line"><code class="plain">    annotations: [bridge,opera]</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">win.add(mapview);</code></div>
<div class="line"><code class="plain">win.open();</code></div>
</div>
</div> <p>
<img src="images/download/attachments/37540542/Annotations.png" alt="images/download/attachments/37540542/Annotations.png" class="confluence-embedded-image" />
</p>
<p>
The previous example creates two annotations and adds them to the view.  Note that the View's annotations property accepts an array.  Even if there is only one annotation, we still need to pass it to the <tt class=" ">View</tt> as an entry in an array.  The map view displays three custom annotations:    </p>
<ul class=" "><li class=" "> <p>
The Sydney Harbour Bridge annotation uses the default pin image, and the callout window contains the iOS info system button, set with the <tt class=" ">leftButton</tt> property.    </p>
</li><li class=" "> <p>
The Sydney Opera House annotation uses an image of the opera house instead of the default pin image, set with the <tt class=" ">image</tt> property.  The callout window contains the iOS add system button, set with the <tt class=" ">rightButton</tt> property.    </p>
</li></ul> <p>
Let's take a look at some of the properties that can be used to customize an annotation.    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">canShowCallout</tt> - Set to <tt class=" ">false</tt> to disable showing the callout window when the annotation is clicked.  Default is <tt class=" ">true</tt>.    </p>
</li><li class=" "> <p>
<tt class=" ">centerOffset</tt> - Repositions the annotation from its actual location.  Specify a point where positive offset values move the annotation view down and right, while negative values move it up and left.    </p>
</li><li class=" "> <p>
<tt class=" ">customView</tt> &ndash;A custom view to be used in place of the default pin image. This property takes precedence over the <tt class=" ">image</tt> property. The annotation does not respond to any user interaction or events.    </p>
</li><li class=" "> <p>
<tt class=" ">draggable</tt> - A boolean variable that indicates whether or not the annotation can be dragged and replaced in the <tt class=" ">View</tt>.    </p>
</li><li class=" "> <p>
<tt class=" ">image</tt> - The URL to an image to be used in place of the default pin image.    </p>
</li><li class=" "> <p>
<tt class=" ">leftButton</tt>/<tt class=" ">rightButton</tt> - Place an <a class="external-link external-link" href="/platform/latest/#!/api/Titanium.UI.iPhone.SystemButton">iOS system button</a> in the left or right side of the annotation's callout window.  Listen to the map view's <tt class=" ">click</tt> event and check the <tt class=" ">clicksource</tt> property for either <tt class=" ">leftButton</tt> or <tt class=" ">rightButton</tt> to see if the user interacted with this component.    </p>
</li><li class=" "> <p>
<tt class=" ">pincolor </tt>- The color of the default pin representing an annotation. It can have the following values:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">&lt;MapObject&gt;.ANNOTATION_GREEN</tt> </p>
</li><li class=" "> <p>
<tt class=" ">&lt;MapObject&gt;.ANNOTATION_PURPLE</tt> </p>
</li><li class=" "> <p>
<tt class=" ">&lt;MapObject&gt;.ANNOTATION_RED</tt> </p>
</li></ul></li><li class=" "> <p>
<tt class=" ">subtitle</tt> - The subtitle text that appears on your annotation when clicked.    </p>
</li><li class=" "> <p>
<tt class=" ">title</tt> - The main title text that appears on your annotation when clicked.    </p>
</li></ul> <p>
The next section discusses the <tt class=" ">Route</tt> class, a feature to create paths between locations on a <tt class=" ">View</tt>.    </p>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-Routes">
<h2 class="heading "><span>Routes</span></h2>
<p>
Routes, created with the <tt class=" ">createRoute</tt> method, allow us to draw paths between locations on a <tt class=" ">View</tt>. These paths can be driving directions, bike paths, or any other reason you have to connect point A to point B.  In the example below, a route is created going between three points:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var MapModule = require(</code><code class="string">'ti.map'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var win = Ti.UI.createWindow({backgroundColor: </code><code class="string">'white'</code><code class="plain">});</code></div>
<div class="line"><code class="plain">var appc = MapModule.createAnnotation({</code></div>
<div class="line"><code class="plain">    latitude: </code><code class="value">37.389569</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    longitude: -</code><code class="value">122.050212</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    title: </code><code class="string">'Appcelerator HQ'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    subtitle: </code><code class="string">'Mountain View, CA'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    pincolor: MapModule.ANNOTATION_GREEN</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var apple = MapModule.createAnnotation({</code></div>
<div class="line"><code class="plain">    latitude: </code><code class="value">37.331689</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    longitude: -</code><code class="value">122.030731</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    title: </code><code class="string">'Apple HQ'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    subtitle: </code><code class="string">'Cupertino, CA'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    pincolor: MapModule.ANNOTATION_RED</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var google = MapModule.createAnnotation({</code></div>
<div class="line"><code class="plain">    latitude: </code><code class="value">37.422502</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    longitude: -</code><code class="value">122.0855498</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    title: </code><code class="string">'Google HQ'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    subtitle: </code><code class="string">'Mountain View, CA'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    pincolor: MapModule.ANNOTATION_RED</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var route = MapModule.createRoute({</code></div>
<div class="line"><code class="plain">    width: </code><code class="value">4</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    color: </code><code class="string">'#f00'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    points: [</code></div>
<div class="line"><code class="plain">        {latitude:google.latitude, longitude:google.longitude},</code></div>
<div class="line"><code class="plain">        {latitude:appc.latitude, longitude:appc.longitude},</code></div>
<div class="line"><code class="plain">        {latitude:apple.latitude, longitude:apple.longitude}</code></div>
<div class="line"><code class="plain">    ]</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var mapview = MapModule.createView({</code></div>
<div class="line"><code class="plain">    mapType: MapModule.NORMAL_TYPE,</code></div>
<div class="line"><code class="plain">    region: {latitude: </code><code class="value">37.389569</code><code class="plain">, longitude: -</code><code class="value">122.050212</code><code class="plain">, latitudeDelta: </code><code class="value">0.2</code><code class="plain">, longitudeDelta: </code><code class="value">0.2</code><code class="plain">},</code></div>
<div class="line"><code class="plain">    annotations: [google,appc,apple]</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">mapview.addRoute(route);</code></div>
<div class="line"><code class="plain">win.add(mapview);</code></div>
<div class="line"><code class="plain">win.open();</code></div>
</div>
</div> <p>
After creating the three annotation points, the application creates a route object, using the <tt class=" ">createRoute</tt> method.  Let's take a look at each of the route properties.    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">points</tt> - Array of latitude and longitude coordinates that represent each point in the route. As geometry dictates, you must have a least two points to draw a line, or route in this case.    </p>
</li><li class=" "> <p>
<tt class=" ">color</tt> - Specifies the color of the line.    </p>
</li><li class=" "> <p>
<tt class=" ">width </tt>- Specifies the width of the line in pixels.    </p>
</li><li class=" "> <p>
<tt class=" ">level</tt> - <strong class=" ">Available on iOS 7 and later.</strong> Specifies which overlay level to place the route.  Set to either<tt class=" "> &lt;MapObject&gt;.OVERLAY_LEVEL_ABOVE_LABELS</tt> (above map labels) or <tt class=" ">&lt;MapObject&gt;.OVERLAY_LEVEL_ABOVE_ROADS</tt> (below labels but above roads).    </p>
</li></ul> <p>
Once the route object is created, the application can add it to the view using the <tt class=" ">addRoute</tt> method.    </p>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-Camera">
<h2 class="heading "><span>Camera</span></h2>
<p>
On iOS 7, you can view the map using a 3D perspective by specifying a Camera object that describes the coordinate of the location you want to look at and the pitch, altitude and heading of the camera.  To create a Camera object, use the <tt class=" ">createCamera</tt> method and pass in a dictionary with the following properties:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">centerCoordinate</tt>: point that you want to look at.    </p>
</li><li class=" "> <p>
<tt class=" ">altitude</tt>: how high above the ground to position the camera in meters.    </p>
</li><li class=" "> <p>
<tt class=" ">heading</tt>: angle relative to the center coordinate to position the camera in degrees. <tt class=" ">0</tt> means due North, <tt class=" ">90</tt> mean due East, <tt class=" ">180</tt> mean due South, and so forth.    </p>
</li><li class=" "> <p>
<tt class=" ">pitch</tt>: angle to tilt the camera downwards in degrees. This property is set to <tt class=" ">0</tt> (flat, no tilt) if the map type is either satellite or hybrid.    </p>
</li></ul> <p>
After you have created your Camera object, you can either set it to the View's <tt class=" ">camera</tt> property or pass the object to the View's <tt class=" ">animateCamera</tt> method.  The property changes the perspective without an animation, while the method animates the perspective change.  The map view needs to be on screen before using these APIs.    </p>
<p>
You can customize the look of the map by specifying the following Map View properties:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">pitchEnabled</tt> - A boolean specifying whether to use the Camera's pitch information.    </p>
</li><li class=" "> <p>
<tt class=" ">showsBuildings</tt> - A boolean specifying whether to display extruding building information if available.    </p>
</li><li class=" "> <p>
<tt class=" ">showsPointsOfInterest</tt> - A boolean specifying whether to display points of interest.    </p>
</li></ul> <p>
The example below views the Eiffel Tower looking towards the Seine River.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var MapModule = require(</code><code class="string">'ti.map'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var win = Ti.UI.createWindow();</code></div>
<div class="line"><code class="comments">// Camera view centered on the Eiffel Tower</code></div>
<div class="line"><code class="plain">var pariscam = MapModule.createCamera({</code></div>
<div class="line"><code class="plain">    altitude: </code><code class="value">300</code><code class="plain">, </code></div>
<div class="line"><code class="plain">    centerCoordinate: {</code></div>
<div class="line"><code class="plain">        longitude: </code><code class="value">2.2945</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        latitude: </code><code class="value">48.8582</code></div>
<div class="line"><code class="plain">    }, </code></div>
<div class="line"><code class="plain">    heading: -</code><code class="value">45</code><code class="plain">, </code></div>
<div class="line"><code class="plain">    pitch: </code><code class="value">60</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="comments">// Map centered on the Eiffel Tower</code></div>
<div class="line"><code class="plain">var mapview = MapModule.createView({</code></div>
<div class="line"><code class="plain">    mapType: MapModule.NORMAL_TYPE,</code></div>
<div class="line"><code class="plain">    animate: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    region: {latitude: </code><code class="value">48.8582</code><code class="plain">, longitude: </code><code class="value">2.2945</code><code class="plain">, latitudeDelta: </code><code class="value">0.02</code><code class="plain">, longitudeDelta: </code><code class="value">0.02</code><code class="plain"> }</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="comments">// Change the view perspective after the map view appears on the display</code></div>
<div class="line"><code class="plain">function animateCamera() {</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Remove the event listener or else you cannot pan the view</code></div>
<div class="line"><code class="plain">    mapview.removeEventListener(</code><code class="string">'complete'</code><code class="plain">, animateCamera);</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Does not animate the camera change</code></div>
<div class="line"><code class="plain"> </code><code class="comments">//mapview.camera = pariscam;</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Animates the camera change</code></div>
<div class="line"><code class="plain">	mapview.animateCamera({</code></div>
<div class="line"><code class="plain">		camera: pariscam,</code></div>
<div class="line"><code class="plain">		curve: Ti.UI.ANIMATION_CURVE_EASE_IN,</code></div>
<div class="line"><code class="plain">		duration: </code><code class="value">500</code></div>
<div class="line"><code class="plain">	});</code></div>
<div class="line"><code class="plain">};</code></div>
<div class="line"><code class="plain">mapview.addEventListener(</code><code class="string">'complete'</code><code class="plain">, animateCamera);</code></div>
<div class="line"><code class="plain">win.add(mapview);</code></div>
<div class="line"><code class="plain">win.open();</code></div>
</div>
</div> <p>
<img src="images/download/attachments/37540542/ParisCamera.png" alt="images/download/attachments/37540542/ParisCamera.png" class="confluence-embedded-image" />
</p>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-EventHandling">
<h2 class="heading "><span>Event Handling</span></h2>
<p>
The Map View object provides a few extra events that provide additional control for using the Map module:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">click</tt> - This event only fires when the user selects or deselects an Annotation object and does not respond to any other user interaction.  Check the event object's <tt class=" ">annotation</tt> property to see which annotation was clicked and the <tt class=" ">clicksource</tt> property to see what part of the annotation the user clicked.    </p>
</li><li class=" "> <p>
<tt class=" ">complete</tt> - This event fires when the Map View finishes rendering.    </p>
</li><li class=" "> <p>
<tt class=" ">pinchangedragstate </tt>- This event fires when the pin's drag state changes if the pin's <tt class=" ">draggable</tt> property is set to true.  Check the event object's <tt class=" ">annotation</tt> property to see which annotation was clicked and the <tt class=" ">newState</tt> property for one of the following:    </p>
<ul class=" "><li class=" "> <p>
&lt;MapModule&gt;.ANNOTATION_DRAG_STATE_START &ndash; indicates the user started dragging the pin.    </p>
</li><li class=" "> <p>
&lt;MapModule&gt;.ANNOTATION_DRAG_STATE_END &ndash; indicates the user stopped dragging the pin.    </p>
</li></ul></li><li class=" "> <p>
<tt class=" ">regionchanged</tt> - This event fires when the user either changes the zoom level or pans the Map View.  The event returns the new latitude and longitude coordinates as well as delta values.    </p>
</li></ul> <p>
For example, the following code listens to each of the previous events and outputs information to the console when each event fires:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var MapModule = require(</code><code class="string">'ti.map'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var win = Ti.UI.createWindow({backgroundColor: </code><code class="string">'white'</code><code class="plain">});</code></div>
<div class="line"><code class="plain">var appc = MapModule.createAnnotation({</code></div>
<div class="line"><code class="plain">    latitude: </code><code class="value">37.389569</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    longitude: -</code><code class="value">122.050212</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    title: </code><code class="string">'Appcelerator HQ'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    subtitle: </code><code class="string">'Mountain View, CA'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    pincolor: MapModule.ANNOTATION_GREEN,</code></div>
<div class="line"><code class="plain">    draggable: </code><code class="keyword">true</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">var mapview = MapModule.createView({</code></div>
<div class="line"><code class="plain">    mapType: MapModule.HYBRID_TYPE,</code></div>
<div class="line"><code class="plain">    region: {latitude: </code><code class="value">37.389569</code><code class="plain">, longitude: -</code><code class="value">122.050212</code><code class="plain">, latitudeDelta: </code><code class="value">0.2</code><code class="plain">, longitudeDelta: </code><code class="value">0.2</code><code class="plain">},</code></div>
<div class="line"><code class="plain">    annotations: [appc]</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">mapview.addEventListener(</code><code class="string">'pinchangedragstate'</code><code class="plain">, function(e){</code></div>
<div class="line"><code class="plain">    Ti.API.info(e.type);</code></div>
<div class="line"><code class="plain">    Ti.API.info(JSON.stringify(e.newState));</code></div>
<div class="line"><code class="plain">}); </code></div>
<div class="line"><code class="plain">mapview.addEventListener(</code><code class="string">'click'</code><code class="plain">, function(e){</code></div>
<div class="line"><code class="plain">    Ti.API.info(e.type);</code></div>
<div class="line"><code class="plain">    Ti.API.info(JSON.stringify(e.clicksource));</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">mapview.addEventListener(</code><code class="string">'regionchanged'</code><code class="plain">, function(e){</code></div>
<div class="line"><code class="plain">    Ti.API.info(e.type);</code></div>
<div class="line"><code class="plain">    Ti.API.info(e.latitude + </code><code class="string">","</code><code class="plain"> + e.longitude);</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">mapview.addEventListener(</code><code class="string">'complete'</code><code class="plain">, function(e){</code></div>
<div class="line"><code class="plain">    Ti.API.info(e.type);</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">win.add(mapview);</code></div>
<div class="line"><code class="plain">win.open();</code></div>
</div>
</div> <p>
The application responds to the user's interaction of selecting the annotation and panning as seen by the console output.    </p>
<p>
The Annotation and Route objects do not have events.  To support click events on the Annotation object, use the Map View click event as described before.    </p>
</div>
<div class="section section-2 " id="37540542_iOSMapKit-FurtherReading">
<h2 class="heading "><span>Further Reading</span></h2>
<ul class=" "><li class=" "> <p>
<a class="external-link external-link" href="#!/api/Modules.Map">Titanium Map Module API Reference Documentation</a> </p>
</li></ul> </div>
</div>
<div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
</div>
</body>
</html>
