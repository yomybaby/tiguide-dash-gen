<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Ti Analytics Architecture</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="Scroll EclipseHelp Exporter" name="generator" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" media="print" />
</head>
<body>
<div class="container">
<div class="header"></div>
<div id="37530727" class="content"><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=37530727"><span>Edit</span></a>
<h1>Ti Analytics Architecture</h1>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-Overview" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-Overview="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-Overview">Overview</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-AndroidAnalytics" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-AndroidAnalytics="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-AndroidAnalytics">Android Analytics</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-iOSAnalytics" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-iOSAnalytics="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-iOSAnalytics">iOS Analytics</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-FAQ" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-FAQ="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-FAQ">FAQ</a> </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-Whatcountsasanewsession%3F" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-Whatcountsasanewsession%3F="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-Whatcountsasanewsession%3F">What counts as a new session?</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-ThedevicedetailsoftheAnalyticspagedisplaysinformation%2Csuchas%22iPad2%2C7%22or%22iPad3%2C3%22.Whatisthemeaningofthenumberafterthecomma%3F" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-ThedevicedetailsoftheAnalyticspagedisplaysinformation%2Csuchas%22iPad2%2C7%22or%22iPad3%2C3%22.Whatisthemeaningofthenumberafterthecomma%3F="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-ThedevicedetailsoftheAnalyticspagedisplaysinformation%2Csuchas%22iPad2%2C7%22or%22iPad3%2C3%22.Whatisthemeaningofthenumberafterthecomma%3F">The device details of the Analytics page displays information, such as &quot;iPad2, 7&quot; or &quot;iPad3, 3&quot;. What is the meaning of the number after the comma?</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Ti_Analytics_Architecture-section-37530727_TiAnalyticsArchitecture-HowdoIdisableTitaniumAnalytics%3F" Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-HowdoIdisableTitaniumAnalytics%3F="Ti_Analytics_Architecture.html#37530727_TiAnalyticsArchitecture-HowdoIdisableTitaniumAnalytics%3F">How do I disable Titanium Analytics?</a> </p>
</li></ul></li></ul> <div class="section section-2 " id="37530727_TiAnalyticsArchitecture-Overview">
<h2 class="heading "><span>Overview</span></h2>
<p>
<span style="color: #333333;">
Analytics are sent by Titanium applications automatically unless the developer has chosen to turn them off. Generic analytics data about user activity session starts and ends, and application installations and upgrades are sent by default. Developers may send additional data to help understand how users are interacting with their application. Some analytics data can be viewed using the Analytics UI.    </span>
</p>
<p>
<span style="color: #333333;">
By default, only the following events are sent by the Analytics module:    </span>
</p>
<ul class=" "><li class=" "> <p>
<span style="color: #333333;">
<tt class=" ">ti.enroll</tt>: indicates the first launch of the application after an installation or upgrade<br /> </span>
</p>
</li><li class=" "> <p>
<span style="color: #333333;">
<tt class=" ">ti.start</tt>: indicates the start of a session    </span>
</p>
</li><li class=" "> <p>
<span style="color: #333333;">
<tt class=" ">ti.end</tt>: indicates the end of a session    </span>
</p>
</li><li class=" "> <p>
<span style="color: #333333;">
<tt class=" ">ti.foreground</tt>: indicates the application is in the foreground and the start of a new session (iOS only)    </span>
</p>
</li><li class=" "> <p>
<span style="color: #333333;">
<tt class=" ">ti.background</tt>: indicates the application is in the background and the current session has ended (iOS only)    </span>
</p>
</li></ul> <p>
<span style="color: #333333;">
For a tutorial about sending additional data using Titanium Analytics and using the Analytics dashboard, see <a class="document-link " href="#!/guide/Ti_Analytics" Ti_Analytics.html="Ti_Analytics.html">Ti Analytics</a> for the community version of Analytics (using my.appcelerator.com) and <a class="external-link external-link" href="/platform/latest/#!/guide/Analytics">Appcelerator Platform: Analytics</a> for the enterprise version of Analytics (using dashboard.appcelerator.com).    </span>
</p>
</div>
<div class="section section-2 " id="37530727_TiAnalyticsArchitecture-AndroidAnalytics">
<h2 class="heading "><span>Android Analytics</span></h2>
<p>
For the Android platform, the Analytics module sends three events: <tt class=" ">ti.enroll,</tt> which determines user installations or upgrades when the application is first ran, and <tt class=" ">ti.start</tt> and <tt class=" ">ti.end</tt>, which determines the session of application activity by the user.    </p>
<p class="p2">
The<strong class=" "> </strong><tt class=" ">ti.enroll</tt> event is generated when <tt class=" ">onCreate()</tt> is called. This event is only sent once on the first launch of the application after it has been installed or updated.    </p>
<p class="p2">
The <tt class=" ">ti.start</tt> event is generated each time the activity calls the <tt class=" ">onResume()</tt> method. The event is queued and is only sent if this is not the first event and the <tt class=" ">ti.end</tt> event has not been generated recently. If a <tt class=" ">ti.end</tt> event was processed recently, this indicates that a new activity is being opened on top of an old activity. A possible scenario is if you hit the Home button, then reopen the app quickly resulting in a <tt class=" ">ti.start</tt> event to be placed on top of a <tt class=" ">ti.end</tt> event. In this case, both events are removed from the queue and the current session is still active.    </p>
<p class="li4">
The <tt class=" ">ti.end</tt> event is generated when the activity calls the <tt class=" ">onPause()</tt> method, which occurs in the following scenarios:    </p>
<ul class=" "><li class="li6 "> <p>
A new activity opens on top of the current activity, so the current activity (A1) is being replaced by a new activity (A2). In this scenario, the old activity (A1) would receive an <tt class=" ">onPause()</tt> call, which generates a <tt class=" ">ti.end</tt> event, then within a short period, the new activity (A2) would start and receive its <tt class=" ">onResume()</tt> call, which generates a <tt class=" ">ti.start</tt> event. Both of these event are removed from the queue, marking the current session as still active.    </p>
</li><li class="li6 "> <p>
The application is placed in the background by hitting the Home button or Power button. In this scenario, the current activity receives an <tt class=" ">onPause()</tt> call, which generates a <tt class=" ">ti.end</tt> event to be placed in the event queue, which is sent after a small threshold of time to ensure a <tt class=" ">ti.start</tt> event is not generated.    </p>
</li></ul> <p class="li6">
Having <tt class=" ">onPause()</tt> generate the <tt class=" ">ti.end</tt> event ensures that it is generated in cases where the app was forced killed by the user or by the system due to low memory. The same case would be applicable in the scenario where the current activity is the only activity in the stack and it is closed by backing out of the application using the Back button until the application closes.     <span style="color: #2b4771;">
</span>
</p>
<p class="li6">
<span style="color: #2b4771;">
<br /> </span>
</p>
<p class="li6">
<img src="images/download/attachments/37530727/android_anlaytics.png" alt="images/download/attachments/37530727/android_anlaytics.png" class="confluence-embedded-image" />
</p>
</div>
<div class="section section-2 " id="37530727_TiAnalyticsArchitecture-iOSAnalytics">
<h2 class="heading "><span>iOS Analytics</span></h2>
<p>
For the iOS platform, the Analytics module sends the same events used for the Android platform, plus two additional events: <tt class=" ">ti.foreground</tt> and <tt class=" ">ti.background</tt>, which determines when the application enters and leaves the foreground, used to measure the session activity.    </p>
<ul class=" "><li class=" "> <p>
The <tt class=" ">ti.start</tt> event is generated when the application first boots up.    </p>
</li><li class=" "> <p>
<span style="color: #000000;">
The <tt class=" ">ti.enroll</tt> event is generated at the same time as the <tt class=" ">ti.start</tt> event. This event is only sent once on the first launch of the application after it has been installed or updated.    </span>
</p>
</li><li class=" "> <p>
The <tt class=" ">ti.foreground</tt> event is generated when the application enters the foreground while the app transitions from the background to the active state, that is, from within the <tt class=" ">applicationWillEnterForeground</tt> method.    </p>
</li><li class=" "> <p>
The <tt class=" ">ti.background</tt> event is generated when the application is in the background, that is, from within the <tt class=" ">applicationDidEnterBackground</tt> method.    </p>
</li><li class=" "> <p>
The <tt class=" ">ti.end</tt> event is generated when the application thread terminates. This event is stored in the backend until the app boots the next time.    </p>
</li></ul> <p>
Events stored in the analytics queue are polled and sent in batches. In case of a send failure, unsent events are queued and attempts to resend the events five time before giving up. All pending events, which failed during the send, are queued and sent when the next event is generated.    </p>
<p>
<strong class=" ">First launch or relaunch of app:</strong> </p>
<p>
<strong class=" "> <img src="images/download/attachments/37530727/Screen_Shot_2013-07-18_at_3.45.26_PM.png" alt="images/download/attachments/37530727/Screen_Shot_2013-07-18_at_3.45.26_PM.png" class="confluence-embedded-image" />
<br /></strong> </p>
<p>
<strong class=" ">When the app goes into background:</strong> </p>
<p>
<strong class=" "> <img src="images/download/attachments/37530727/Screen_Shot_2013-07-18_at_3.50.27_PM.png" alt="images/download/attachments/37530727/Screen_Shot_2013-07-18_at_3.50.27_PM.png" class="confluence-embedded-image" width="600" />
<br /></strong> </p>
<p>
<strong class=" ">App relaunching from background:</strong> </p>
<p>
<img src="images/download/attachments/37530727/Screen_Shot_2013-07-18_at_3.51.54_PM.png" alt="images/download/attachments/37530727/Screen_Shot_2013-07-18_at_3.51.54_PM.png" class="confluence-embedded-image" width="650" />
</p>
</div>
<div class="section section-2 " id="37530727_TiAnalyticsArchitecture-FAQ">
<h2 class="heading "><span>FAQ</span></h2>
<div class="section section-3 " id="37530727_TiAnalyticsArchitecture-Whatcountsasanewsession?">
<h3 class="heading "><span>What counts as a new session?</span></h3>
<p>
A session is a period of activity that a user has used the application. This may not necessarily be the period when the application boots and terminates. If the application is placed in the background, then put back in the foreground at a later time, this ends the previous session and creates a new session, respectively. The mechanisms used to determine when an application enters and leaves the foreground varies by platform:    </p>
<ul class=" "><li class="p1 "> <p>
For the iOS platform, when the app is minimized, a <tt class=" ">ti.background</tt> event is generated, which ends the current session. The next time the app comes into the foreground, a <tt class=" ">ti.foreground</tt> event is generated unless the app was terminated while in the background. In that case, the <tt class=" ">ti.start</tt> and <tt class=" ">ti.foreground</tt> are generated. Both of these actions start a new session.    </p>
</li><li class="p1 "> <p>
For the Android platform, when the app is backgrounded by the Home button or Power button, or if another app is brought into the foreground, a <tt class=" ">ti.end</tt> event is generated, which ends the session. When the application returns to the foreground, this starts a new session.    </p>
</li></ul> </div>
<div class="section section-3 p1" id='37530727_TiAnalyticsArchitecture-ThedevicedetailsoftheAnalyticspagedisplaysinformation,suchas"iPad2,7"or"iPad3,3".Whatisthemeaningofthenumberafterthecomma?'>
<h3 class="heading p1"><span>The device details of the Analytics page displays information, such as &quot;iPad2, 7&quot; or &quot;iPad3, 3&quot;. What is the meaning of the number after the comma?</span></h3>
<p class="p1">
&quot;iPad2, 7&quot; or &quot;iPad3, 3&quot; is the hardware model of the device. The number after the comma means the actual model of the device. Some examples:    </p>
<ul class=" "><li class="p1 "> <p>
&quot;iPad2, 7&quot; is <a class="external-link external-link" href="http://www.everymac.com/systems/apple/ipad/specs/apple-ipad-mini-original-a1455-4g-lte-verizon-sprint-specs.html" target="_blank">iPad mini (Wi-Fi/Verizon &amp; Sprint/GPS)</a> </p>
</li><li class="p1 "> <p>
&quot;iPad3, 3&quot; is <a class="external-link external-link" href="http://www.everymac.com/systems/apple/ipad/specs/apple-ipad-3rd-gen-early-2012-gsm-4g-lte-att-specs.html" target="_blank">iPad 3rd Gen (Wi-Fi/Cellular AT&amp;T/GPS)</a> </p>
</li></ul> <p class="p1">
Modify the device model in the following URL to retrieve information about the device: <a class="external-link external-link" href="http://www.everymac.com/ultimate-mac-lookup/?search_keywords=iPad3,3" target="_blank">http://www.everymac.com/ultimate-mac-lookup/?search_keywords=iPad3,3</a>.    </p>
</div>
<div class="section section-3 p1" id="37530727_TiAnalyticsArchitecture-HowdoIdisableTitaniumAnalytics?">
<h3 class="heading p1"><span>How do I disable Titanium Analytics?</span></h3>
<p>
Note that disabling Titanium Analytics will disable or display no data when you visit either my.appcelerator.com or dashboard.appcelerator.com for the Analytics section.    </p>
<p>
Open your project's <tt class=" ">tiapp.xml</tt> file. If the file contains the following tag: <tt class=" ">&lt;analytics&gt;true&lt;/analytics&gt;</tt>, set the value to false. If this tag does not exist, you need to add it as a child of the <tt class=" ">&lt;ti:app&gt;</tt> parent tag with the value set to false.    </p>
</div>
</div>
</div>
<div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
</div>
</body>
</html>
