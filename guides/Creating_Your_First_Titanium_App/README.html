<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Creating Your First Titanium App</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="Scroll EclipseHelp Exporter" name="generator" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" media="print" />
</head>
<body>
<div class="container">
<div class="header"></div>
<div id="37541502" class="content"><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=37541502"><span>Edit</span></a>
<h1>Creating Your First Titanium App</h1>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Introduction" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Introduction="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Introduction">Introduction</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Createanewproject" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Createanewproject="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Createanewproject">Create a new project</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Createthedatamodel" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Createthedatamodel="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Createthedatamodel">Create the data model</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Initializethebookcollection" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Initializethebookcollection="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Initializethebookcollection">Initialize the book collection</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-AddaTableView" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-AddaTableView="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-AddaTableView">Add a TableView</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Createabookdetailview" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Createabookdetailview="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Createabookdetailview">Create a book detail view</a> </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Displaybookdetailsviewonselection" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Displaybookdetailsviewonselection="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Displaybookdetailsviewonselection">Display book details view on selection</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Modifythebookdetaillayout" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Modifythebookdetaillayout="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Modifythebookdetaillayout">Modify the book detail layout</a> </p>
</li></ul></li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Addplatform-specificstylestotheTableView" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Addplatform-specificstylestotheTableView="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Addplatform-specificstylestotheTableView">Add platform-specific styles to the TableView</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS">Add a NavigationWindow for iOS</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-Allowusertoaddbooks" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Allowusertoaddbooks="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-Allowusertoaddbooks">Allow user to add books</a> </p>
</li></ul> <p>
</p>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Introduction">
<h2 class="heading "><span>Introduction</span></h2>
<p>
This tutorial walks you through the process of building a simple Titanium application for iPhone and Android that lets users enter and view their favorite books. It touches on the following topics:    </p>
<ul class=" "><li class=" "> <p>
Alloy framework    </p>
</li><li class=" "> <p>
Working with Backbone models and collections    </p>
</li><li class=" "> <p>
Displaying data in a TableView    </p>
</li><li class=" "> <p>
Using platform-specific resources and styles    </p>
</li><li class=" "> <p>
Handling events    </p>
</li></ul> <p>
<a class="attachment-link " href="attachments_37685675_1_favebooks-complete.zip" attachments_37685675_1_favebooks-complete.zip="attachments_37685675_1_favebooks-complete.zip">Download</a> a completed version of the project.    </p>
<div class="tablewrap">
<table class="confluenceTable">
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" "> <tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
<img src="images/download/attachments/37541502/iphone_complete.png" alt="images/download/attachments/37541502/iphone_complete.png" class="confluence-embedded-image confluence-content-image-border" />
</p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
<img src="images/download/attachments/37541502/android_complete.png" alt="images/download/attachments/37541502/android_complete.png" class="confluence-embedded-image" />
</p>
</td>
</tr>
</tbody> </table>
</div>
<p>
</p>
</div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Createanewproject">
<h2 class="heading "><span>Create a new project</span></h2>
<p>
To start, you'll create a new Alloy project in Studio.    </p>
<p>
<strong class=" ">To create a new Alloy project:</strong> </p>
<ol class=" "><li class=" "> <p>
In Studio, select <strong class=" ">File &gt; New &gt; Mobile App Project</strong>.    </p>
</li><li class=" "> <p>
Select the <strong class=" ">Default Alloy Project</strong> type and click Next.    </p>
</li><li class=" "> <p>
On the <strong class=" ">Project Location</strong> screen, enter <strong class=" ">FaveBooks</strong> for the Project name and <strong class=" ">com.<i class=" ">your- domain</i>.favebooks. </strong>Replace <i class=" ">your-domain</i> with your personal or organization's domain. Leave the other fields at their default values.    </p>
</li><li class=" "> <p>
Click <strong class=" ">OK</strong>.    </p>
</li></ol> <p>
The new project opens in Studio.    </p>
</div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Createthedatamodel">
<h2 class="heading "><span>Create the data model</span></h2>
<p>
The heart of the FaveBooks app is the data containing the user&rsquo;s books, so we&rsquo;ll start by defining our data model. Alloy uses Backbone to provide its <a class="external-link external-link" href="#!/guide/Alloy_Models">data modeling and collection features</a>.    </p>
<p>
<strong class=" ">To create the data model:</strong> </p>
<ol class=" "><li class=" "> <p>
Right-click or Control-click on the top-level project folder and select <strong class=" ">New &gt; Alloy Model</strong>, or press Cmd+Shift+M (Mac) or Ctrl+Shift+M (Windows and Linux).    </p>
</li><li class=" "> <p>
In the New Model dialog, make the following entries:    </p>
<ul class=" "><li class=" "> <p>
For <strong class=" ">Model name</strong>, enter <strong class=" ">books</strong>.    </p>
</li><li class=" "> <p>
Select <strong class=" ">sql</strong> from the <strong class=" ">Adapter</strong> menu.    </p>
</li><li class=" "> <p>
In the <strong class=" ">Schema</strong> table, add two fields named <strong class=" ">title</strong> and <strong class=" ">author</strong> and set their types to <strong class=" ">text</strong>.    </p>
<img src="images/download/attachments/37541502/new_model.png" alt="images/download/attachments/37541502/new_model.png" class="confluence-embedded-image" />
</li></ul></li><li class=" "> <p>
Click OK.     </p>
</li></ol> <p>
This creates a new file in the <strong class=" ">app/models</strong> directory called <strong class=" ">books.js</strong>.  This file describes the data model you just created. The <tt class=" ">config</tt> section, in particular, defines the data columns, adapter type, and collection name.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">exports.definition = {</code></div>
<div class="line"><code class="plain">    config: {</code></div>
<div class="line"><code class="plain">        columns: {</code></div>
<div class="line"><code class="plain"> </code><code class="string">"title"</code><code class="plain">: </code><code class="string">"text"</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="string">"author"</code><code class="plain">: </code><code class="string">"text"</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">        adapter: {</code></div>
<div class="line"><code class="plain">            type: </code><code class="string">"sql"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            collection_name: </code><code class="string">"books"</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    ...</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div> </div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Initializethebookcollection">
<h2 class="heading "><span>Initialize the book collection</span></h2>
<p>
Next you'll write code that creates a Collection from the model definition, creates a single book and saves it to device storage. Eventually you will add features to let users add books, but for now this will give us some data to work with.    </p>
<p>
<strong class=" ">To initialize the book collection:</strong> </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">controllers/index.js</strong> and delete the <tt class=" ">doClick()</tt> function definition added by the project wizard.    </p>
</li><li class=" "> <p>
Get a reference to our collection:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var myBooks = Alloy.Collections.books;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Create a new model object (book) and assign it a title and author:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var book = Alloy.createModel(</code><code class="string">'books'</code><code class="plain">, { </code></div>
<div class="line"><code class="plain">   title : </code><code class="string">'Great Expectations'</code><code class="plain">, </code></div>
<div class="line"><code class="plain">   author: </code><code class="string">'Charles Dickens'</code><code class="plain"> </code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Add the book to the collection and persist it to the database.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">myBooks.add(book); </code></div>
<div class="line"><code class="plain">book.save();</code></div>
</div>
</div></li><li class=" "> <p>
Save your changes to <tt class=" ">index</tt>.js.    </p>
</li></ol> <p>
Now that our application has some data, let&rsquo;s display it in a table.    </p>
</div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-AddaTableView">
<h2 class="heading "><span>Add a TableView</span></h2>
<p>
<span style="color: #484848;">
In Alloy, collection data can be <a class="external-link external-link" href="#!/guide/Alloy_Data_Binding">synchronized</a> to a view object, or a single model can be bound to a view component. At runtime, Alloy monitors your application's collections for changes and     <span style="color: #484848;">
updates any synchronized view objects with the new data.    </span>
 Specifically, t    </span>
<span style="color: #484848;">
he Backbone <tt class=" ">add</tt>, <tt class=" ">change</tt>, <tt class=" ">destroy</tt>, <tt class=" ">fetch</tt>, <tt class=" ">remove</tt>, and <tt class=" ">reset</tt> events are monitored for changes. In this case, each time we call the <tt class=" ">add()</tt> method on the <tt class=" ">myBooks</tt> collection the view is synchronized with the new data.    </span>
</p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">views/index.xml</strong>.    </p>
</li><li class=" "> <p>
Delete the <strong class=" "> <tt class=" ">&lt;Label&gt;</tt> </strong> element that was generated by the project wizard and add a <strong class=" "> <tt class=" ">&lt;TableView&gt;</tt> </strong> element in its place.    </p>
</li><li class=" "> <p>
Insert a <strong class=" "> <tt class=" ">&lt;TableViewRow&gt;</tt> </strong> element inside the <tt class=" ">&lt;TableView&gt;</tt> element, as shown below:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">    &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;!-- Add TableView and  TableViewRow --&gt;</code></div>
<div class="line"><code class="plain">        &lt;TableView&gt;</code></div>
<div class="line"><code class="plain">            &lt;TableViewRow&gt;&lt;/TableViewRow&gt;</code></div>
<div class="line"><code class="plain">        &lt;/TableView&gt;</code></div>
<div class="line"><code class="plain">    &lt;/Window&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div> <p>
The <tt class=" ">&lt;TableViewRow&gt;</tt> element will be repeated for each element in our data set.    </p>
</li><li class=" "> <p>
Add a <strong class=" "> <tt class=" ">&lt;Collection&gt;</tt> </strong> element to the top-level <tt class=" ">&lt;Alloy&gt;</tt> element and set its <strong class=" "> <tt class=" ">src</tt> </strong> property to <strong class=" ">books</strong>. This corresponds to the name of the collection we created before.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt; </code></div>
<div class="line"><code class="plain">      &lt;Collection src=</code><code class="string">"books"</code><code class="plain">/&gt; </code></div>
<div class="line"><code class="plain">      &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt; </code></div>
<div class="line"><code class="plain">      ... </code></div>
<div class="line"><code class="plain">      &lt;/Window&gt; </code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
To synchronize the collection with the view, assign <strong class=" "> <tt class=" ">books</tt> </strong> to the <tt class=" ">TableView</tt> element's <strong class=" "> <tt class=" ">dataCollection</tt> </strong> attribute.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">    &lt;Collection src=</code><code class="string">"books"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;!-- Asssign the collection to the TableView --&gt;</code></div>
<div class="line"><code class="plain">        &lt;TableView dataCollection=</code><code class="string">"books"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;TableViewRow&gt;&lt;/TableViewRow&gt;</code></div>
<div class="line"><code class="plain">        &lt;/TableView&gt;</code></div>
<div class="line"><code class="plain">    &lt;/Window&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Using curly-bracket syntax, assign the title from each book (that is, each model in the collection) to the <tt class=" ">title</tt> attribute of the <tt class=" ">&lt;TableViewRow&gt;</tt>. The final contents of <tt class=" ">index.xml</tt> should look like the following:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">    &lt;Collection src=</code><code class="string">"books"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;TableView dataCollection=</code><code class="string">"books"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;TableViewRow title=</code><code class="string">"{title}"</code><code class="plain"> author=</code><code class="string">"{author}"</code><code class="plain">&gt;&lt;/TableViewRow&gt;</code></div>
<div class="line"><code class="plain">        &lt;/TableView&gt;</code></div>
<div class="line"><code class="plain">    &lt;/Window&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;  </code></div>
</div>
</div></li></ol> <p>
At this point we&rsquo;re now ready to test our app. For comparison, we&rsquo;ll run the app in both an iPhone simulator and an Android emulator.    </p>
<p>
<strong class=" ">To launch the app in the iPhone simulator</strong>:    </p>
<ul class=" "><li class=" "> <p>
From the Target menu in the top-right corner of Studio, select <strong class=" ">iOS Simulator &gt; iPhone</strong>. By default, Studio is configured to automatically launch when you select a target platform. Wait for the app to complete launching in the simulator.    </p>
<img src="images/download/attachments/37541502/launch-ios-simulator.png" alt="images/download/attachments/37541502/launch-ios-simulator.png" class="confluence-embedded-image" />
</li></ul> <p>
</p>
<p>
<strong class=" ">To launch the app in an Android emulator</strong> :    </p>
<ul class=" "><li class=" "> <p>
When the application has finished launching in the iPhone simulator, select <strong class=" ">Android Emulator &gt; titanium_1_WVGA800</strong> to launch the app.    </p>
</li></ul> <p>
The <strong class=" ">titanium_1_WVGA800</strong> string corresponds to the name of the Android virtual device that Studio creates by default. If you have installed other AVDs, you can select one of those.    </p>
<p>
The screenshots below show the app running on an iPhone simulator and an Android emulator. As you can see, the table is populated with the book from the collection.    </p>
<div class="tablewrap">
<table class="confluenceTable">
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" "> <tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
<img src="images/download/attachments/37541502/iphone-sim.png" alt="images/download/attachments/37541502/iphone-sim.png" class="confluence-embedded-image" />
</p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
<img src="images/download/attachments/37541502/android-emu-screenshot.png" alt="images/download/attachments/37541502/android-emu-screenshot.png" class="confluence-embedded-image" />
</p>
</td>
</tr>
</tbody> </table>
</div>
<p>
</p>
<p>
Note the following:    </p>
<ul class=" "><li class=" "> <p>
On iPhone the top of the <tt class=" ">TableView</tt> is partly obscured by the iOS status bar. We&rsquo;ll fix this later.    </p>
</li><li class=" "> <p>
The table length increases by a row each time you launch the app, since we are saving the (same) book to each time.    </p>
</li></ul> <p>
<strong class=" ">Android troubleshooting</strong> </p>
<p>
The initial launch of the Android emulator can be quite slow and Studio may timeout before it can install and launch the application. If this happens just click  <strong class=" ">Run</strong> in Studio again. Subsequent launches should not time out on the same virtual device.    </p>
</div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Createabookdetailview">
<h2 class="heading "><span>Create a book detail view</span></h2>
<p>
Next you&rsquo;ll add functionality to let the user select a book and view its details (title and author). To do this you&rsquo;ll create a new Alloy controller. An Alloy controller is actually a logical collection of three parts:    </p>
<ul class=" "><li class=" "> <p>
A view (an XML file)    </p>
</li><li class=" "> <p>
A JavaScript controller    </p>
</li><li class=" "> <p>
A style file (a Titanium Style Sheet file)    </p>
</li></ul> <p>
<strong class=" ">To create the book detail view</strong> :    </p>
<ol class=" "><li class=" "> <p>
Right-click or Control-click on the project folder and select <strong class=" ">New &gt; Alloy Controller</strong>, or press Cmd+Shift+C (Mac) or Ctrl+Shift+C (Windows and Linux).    </p>
</li><li class=" "> <p>
In the New Controller dialog, enter <strong class=" ">bookdetails</strong> in the Controller name text field, and click OK. This creates the following new files:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">controllers/bookdetails.js</tt> &ndash; The controller&rsquo;s JavaScript controller.    </p>
</li><li class=" "> <p>
<tt class=" ">views/bookdetails.xml</tt> &ndash; The controller&rsquo;s view    </p>
</li><li class=" "> <p>
<tt class=" ">styles/bookdetails.tss</tt> &ndash; Styles for the controller    </p>
</li></ul></li><li class=" "> <p>
Open <strong class=" ">views/bookdetails.xml</strong> in the editor.    </p>
</li><li class=" "> <p>
Replace the <tt class=" ">&lt;View&gt;</tt> element with a <tt class=" ">&lt;Window&gt;</tt> element:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">   &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">   &lt;/Window&gt; </code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Add two <tt class=" ">&lt;Label&gt;</tt> elements to the <tt class=" ">&lt;Window&gt;</tt> element. Give the first one an ID of <strong class=" ">titleLabel</strong> and the other an ID of <strong class=" ">authorLabel</strong>, as shown below.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt; </code></div>
<div class="line"><code class="plain">   &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt; </code></div>
<div class="line"><code class="plain">      &lt;Label id=</code><code class="string">"titleLabel"</code><code class="plain">&gt;&lt;/Label&gt;</code></div>
<div class="line"><code class="plain">      &lt;Label id=</code><code class="string">"authorLabel"</code><code class="plain">&gt;&lt;/Label&gt; </code></div>
<div class="line"><code class="plain">   &lt;/Window&gt; </code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Open <strong class=" ">styles/bookdetails.tss</strong> and a background color to the <tt class=" ">.container</tt> rule:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="string">".container"</code><code class="plain"> : { </code></div>
<div class="line"><code class="plain">   backgroundColor: </code><code class="string">'white'</code><code class="plain"> </code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li></ol> <p>
Next we&rsquo;ll add an event handler to the <tt class=" ">&lt;TableView&gt;</tt> that opens this new window and displays the book's information.    </p>
<div class="section section-3 " id="37541502_CreatingYourFirstTitaniumApp-Displaybookdetailsviewonselection">
<h3 class="heading "><span>Display book details view on selection</span></h3>
<p>
To respond to user selection, you add an <tt class=" ">onClick</tt> attribute to the <tt class=" ">&lt;TableView&gt;</tt> element, and assign it the name of the function to invoke. The function creates a new instance of the <strong class=" ">bookdetails</strong> Alloy controller, passing it the title and author of the selected book, so it can display those values in the <tt class=" ">&lt;Label&gt;</tt> elements you defined there.    </p>
<p>
<strong class=" ">To display the book details screen on selection</strong>:    </p>
<ol class=" "><li class=" "> <p>
In the Project Navigator, open <strong class=" ">views/index.xml</strong>.    </p>
</li><li class=" "> <p>
Add an <strong class=" "> <tt class=" ">onClick</tt> </strong> attribute to the <tt class=" ">&lt;TableView&gt;</tt> element and set its value to <strong class=" "> <tt class=" ">showBook</tt></strong>.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;TableViewRow title=</code><code class="string">"{title}"</code><code class="plain"> author=</code><code class="string">"{author}"</code><code class="plain"> onClick=</code><code class="string">"showBook"</code><code class="plain">&gt;&lt;/TableViewRow&gt;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Open <strong class=" ">controllers/index.js</strong> and add a function named <strong class=" "> <tt class=" ">showBook()</tt> </strong> that takes a single argument called <strong class=" "> <tt class=" ">event</tt></strong>. This is the event object passed to the function that contains information about the selected item.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function showBook (event) { </code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
First, let&rsquo;s add code to extract the title and author of the selected book from the <tt class=" ">event.source</tt> object.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function showBook(event) {</code></div>
<div class="line"><code class="plain">    var selectedBook = event.source;</code></div>
<div class="line"><code class="plain">    var args = {</code></div>
<div class="line"><code class="plain">        title: selectedBook.title,</code></div>
<div class="line"><code class="plain">        author: selectedBook.author</code></div>
<div class="line"><code class="plain">    };</code></div>
<div class="line"><code class="plain">}  </code></div>
</div>
</div><pre class=" ">  </pre></li><li class=" "> <p>
Lastly, we create a new instance of the Alloy bookdetails controller, passing it the <tt class=" ">args</tt> object containing the title and author data, and open the view.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function showBook(event) {</code></div>
<div class="line"><code class="plain">    var selectedBook = event.source;</code></div>
<div class="line"><code class="plain">    var args = {</code></div>
<div class="line"><code class="plain">        title: selectedBook.title,</code></div>
<div class="line"><code class="plain">        author: selectedBook.author</code></div>
<div class="line"><code class="plain">    };</code></div>
<div class="line"><code class="plain">    var bookview = Alloy.createController(</code><code class="string">"bookdetails"</code><code class="plain">, args).getView();</code></div>
<div class="line"><code class="plain">    bookview.open();</code></div>
<div class="line"><code class="plain">}      </code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Lastly, we need to update bookdetails.js to display the title and author values passed to the <tt class=" ">createController()</tt> method, or display a default title and author if none were provided:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var args = arguments[</code><code class="value">0</code><code class="plain">] || {};</code></div>
<div class="line"><code class="plain">$.titleLabel.text = args.title || </code><code class="string">'Default Title'</code><code class="plain">;</code></div>
<div class="line"><code class="plain">$.authorLabel.text = args.author || </code><code class="string">'Default author'</code><code class="plain">; </code></div>
</div>
</div></li><li class=" "> <p>
Save your changes.    </p>
</li></ol> <p>
Launch the app in the iPhone simulator or Android emulator. Select a book from the list to open the detail screen. You should see something like the following.    </p>
<p>
<img src="images/download/attachments/37541502/bookdetail-layout-wrong.png" alt="images/download/attachments/37541502/bookdetail-layout-wrong.png" class="confluence-embedded-image confluence-content-image-border" width="240" />
</p>
<p>
Clearly, this isn&rsquo;t what we want &ndash; the two labels are occupying at the same space on screen. Next we'll modify the layout and styles of the book detail screen to fix this.    </p>
</div>
<div class="section section-3 " id="37541502_CreatingYourFirstTitaniumApp-Modifythebookdetaillayout">
<h3 class="heading "><span>Modify the book detail layout</span></h3>
<p>
Titanium supports three <a class="external-link external-link" href="#!/guide/Layouts,_Positioning,_and_the_View_Hierarchy-section-29004895_Layouts,Positioning,andtheViewHierarchy-Layoutmodes">layout modes</a>: composite (or absolute), vertical, and horizontal. In composite mode,     <span style="color: #484848;">
you specify a child view's coordinates on a grid relative to its parent container's top/left or bottom/right corner. If not specified, a child view is centered on the display. In this section you'll apply a vertical layout to the book details view, and then tweak the     </span>
</p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">views/bookdetails.xml</strong>.    </p>
</li><li class=" "> <p>
Wrap the two <tt class=" ">&lt;Label&gt;</tt> elements within a <tt class=" ">&lt;View&gt;</tt> element, as shown below.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;View&gt; </code></div>
<div class="line"><code class="plain">   &lt;Label id=</code><code class="string">"titleLabel"</code><code class="plain">&gt;&lt;/Label&gt; </code></div>
<div class="line"><code class="plain">   &lt;Label id=</code><code class="string">"authorLabel"</code><code class="plain">&gt;&lt;/Label&gt; </code></div>
<div class="line"><code class="plain">&lt;/View&gt;   </code></div>
</div>
</div></li><li class=" "> <p>
Add a <strong class=" "> <tt class=" ">layout</tt> </strong> attribute to the <tt class=" ">&lt;View&gt;</tt> element and set its value to <strong class=" "> <tt class=" ">vertical</tt></strong>.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;View layout=</code><code class="string">'vertical'</code><code class="plain">&gt; </code></div>
<div class="line"><code class="plain">  &lt;Label id=</code><code class="string">"titleLabel"</code><code class="plain">&gt;&lt;/Label&gt;</code></div>
<div class="line"><code class="plain">  &lt;Label id=</code><code class="string">"authorLabel"</code><code class="plain">&gt;&lt;/Label&gt; </code></div>
<div class="line"><code class="plain">&lt;/View&gt;</code></div>
</div>
</div></li><li class=" "> <p>
Open <strong class=" ">styles/bookdetails.tss</strong> and add the following style rules to align the labels along the left side of the screen, and to set their font sizes. We also add some padding between the two labels by    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="string">"#titleLabel"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    font: {</code></div>
<div class="line"><code class="plain">        fontSize: </code><code class="string">'30'</code></div>
<div class="line"><code class="plain">    },</code></div>
<div class="line"><code class="plain">    left: </code><code class="string">'10'</code></div>
<div class="line"><code class="plain">},</code></div>
<div class="line"><code class="string">"#authorLabel"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    font: {</code></div>
<div class="line"><code class="plain">        fontSize: </code><code class="string">'20'</code></div>
<div class="line"><code class="plain">    },</code></div>
<div class="line"><code class="plain">    left: </code><code class="string">'10'</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li></ol> <p>
Save your changes and build again for iPhone or Android. The title and author should now be positioned vertically within the view, and aligned to the left side of the screen. To get back to the original table, you can click the <strong class=" ">Back</strong> button on Android.  On iOS, the application is stuck here.  Instructions on adding an iOS navigation controller is detailed in a <a class="document-link " href="#!/guide/Creating_Your_First_Titanium_App-section-37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS" Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS="Creating_Your_First_Titanium_App.html#37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS">later section</a> of this tutorial.    </p>
</div>
</div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Addplatform-specificstylestotheTableView">
<h2 class="heading "><span>Add platform-specific styles to the TableView</span></h2>
<p>
If you test the app on an Android device with a high-resolution display, you&rsquo;ll notice that the default height of each table row is a bit small to comfortably read or select with a finger. For instance, the screenshot below was taken on an HTC One device.    </p>
<p>
<img src="images/download/attachments/37541502/htcone-screenshot.png" alt="images/download/attachments/37541502/htcone-screenshot.png" class="confluence-embedded-image confluence-content-image-border" width="247" />
</p>
<p>
To fix this we will apply a <a class="external-link external-link" href="#!/guide/Alloy_Styles_and_Themes-section-35621526_AlloyStylesandThemes-Platform-SpecificStyles">platform-specific style</a> to the <tt class=" ">&lt;TableViewRow&gt;</tt> element. During the build process, platform-specific styles are applied only to builds on the target platform. The following is an example of a platform-specific style that makes all Labels blue in iOS builds.    </p>
<pre class=" ">&quot;Label[platform=ios]&quot;: { <br />  color: 'blue' <br />}</pre> <p>
In this case we&rsquo;ll increase the font size used by each <tt class=" ">&lt;TableViewRow&gt;</tt> element, and set the height of each row to provide some space around the text.    </p>
<p>
<strong class=" ">To increase the table row height on Android</strong>:    </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">views/index.tss</strong> and add the following style rule to the end of the document:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="string">"TableViewRow[platform=android]"</code><code class="plain">: { </code></div>
<div class="line"><code class="plain">    font: { </code></div>
<div class="line"><code class="plain">       fontSize: </code><code class="string">'24'</code><code class="plain"> </code></div>
<div class="line"><code class="plain">    }, </code></div>
<div class="line"><code class="plain">    height: </code><code class="string">'40'</code><code class="plain"> </code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Save your changes and build the application for Android. The TableView should look like the following screenshot:    </p>
<p>
<img src="images/download/attachments/37541502/htcone-tablerow-tall.png" alt="images/download/attachments/37541502/htcone-tablerow-tall.png" class="confluence-embedded-image confluence-content-image-border" width="246" />
</p>
</li></ol> </div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS">
<h2 class="heading "><span>Add a NavigationWindow for iOS</span></h2>
<p>
Unlike Android, iOS devices do not provide a physical back button for navigation. The <a class="external-link external-link" href="#!/api/Titanium.UI.iOS.NavigationWindow"> <tt class=" ">NavigationWindow</tt> </a> is an iOS-only UI control that provides an easy way to display and navigate hierarchical content. (In native iOS terms, the control is an implementation of the iOS <a class="external-link external-link" href="https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html" target="_blank">navigation controller interface</a>.) On Android, you get this type of navigation for &quot;free&quot;. The <tt class=" ">NavigationWindow</tt> will wrap the original <tt class=" ">&lt;Window&gt;</tt> element and provide a title bar above the <tt class=" ">&lt;TableView&gt;</tt> control, solving this layout issue.    </p>
<p>
To do this we'll take advantage of an Alloy feature called <a class="external-link external-link" href="#!/guide/Alloy_Concepts-section-34636240_AlloyConcepts-Platform-SpecificResources">platform-specific resources</a> that lets you define platform-specific view, controller, and style files. At build time, only those resources specific to the target platform are included.  There are two parts to this:    </p>
<ul class=" "><li class=" "> <p>
Creating a new iOS-specific entry point (a new version of <tt class=" ">index</tt>.xml) that includes the <tt class=" ">NavigationWindow</tt> element    </p>
</li><li class=" "> <p>
Updating the controller code to handle the difference between the iOS and Android implementations. In this case we'll use <a class="external-link external-link" href="#!/guide/Alloy_Controllers-section-34636384_AlloyControllers-ConditionalCode">platform-conditional code</a> to handle the cross-platform code differences.    </p>
</li></ul> <p>
<strong class=" ">To create the iOS-specific view with a NavigationController:</strong> </p>
<ol class=" "><li class=" "> <p>
In Project Explorer, create a new folder named <strong class=" ">ios</strong> in the <tt class=" ">app/views</tt> folder.    </p>
</li><li class=" "> <p>
Create a new file named <strong class=" ">index.xml</strong> in the new folder.<br /> <img src="images/download/attachments/37541502/ios-view.png" alt="images/download/attachments/37541502/ios-view.png" class="confluence-embedded-image" />
</p>
<p>
</p>
</li><li class=" "> <p>
Copy the contents of  <strong class=" "> <tt class=" ">views/index.xml</tt> </strong>  to  <strong class=" "> <tt class=" ">views/ios/index.xml</tt> </strong> .    </p>
</li><li class=" "> <p>
Wrap the existing <tt class=" ">&lt;Window&gt;</tt> element with a <strong class=" "> <tt class=" ">&lt;NavigationWindow&gt;</tt> </strong> element and set the new element&rsquo;s <tt class=" ">id</tt> attribute to <strong class=" ">navGroupWin</strong>:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">    &lt;Collection src=</code><code class="string">"books"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;NavigationWindow id=</code><code class="string">"navGroupWin"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain"> title=</code><code class="string">"My Books"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;TableView dataCollection=</code><code class="string">"books"</code><code class="plain"> id=</code><code class="string">"bookTable"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">                &lt;TableViewRow title=</code><code class="string">"{title}"</code><code class="plain"> author=</code><code class="string">"{author}"</code><code class="plain"> onClick=</code><code class="string">"showBook"</code><code class="plain">&gt;&lt;/TableViewRow&gt;</code></div>
<div class="line"><code class="plain">            &lt;/TableView&gt;</code></div>
<div class="line"><code class="plain">        &lt;/Window&gt;</code></div>
<div class="line"><code class="plain">    &lt;/NavigationWindow&gt;&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div></li><li class=" "> <p>
Save your changes.    </p>
</li></ol> <p>
The <tt class=" ">NavigationWindow</tt> control has a different API than <tt class=" ">Window</tt>, so our code now needs to account for those differences. We could create a platform specific controller folder for iOS (<tt class=" ">controllers/ios/index</tt>.js),  but the code differences are small enough that we&rsquo;ll use  <a class="external-link external-link" href="#!/guide/Alloy_Controllers-section-34636384_AlloyControllers-ConditionalCode">platform-conditional code</a>  to include the proper code for each platform.    </p>
<p>
<strong class=" ">To update the controller code for platform differences:</strong> </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">controllers/index.js</strong>.    </p>
</li><li class=" "> <p>
Replace the existing <tt class=" ">$.index.open()</tt> code at the bottom of the file with the following:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">if</code><code class="plain">(OS_IOS) { </code></div>
<div class="line"><code class="plain">   $.navGroupWin.open();</code></div>
<div class="line"><code class="plain">} </code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (OS_ANDROID) { </code></div>
<div class="line"><code class="plain">   $.index.open(); </code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><pre class=" ">    </pre> <p>
When you build for iOS <tt class=" ">$.navGroupWin.open()</tt> will be included; when you build for Android <tt class=" ">$.index.open()</tt> code will be included.    </p>
</li><li class=" "> <p>
Modify the <tt class=" ">showBook()</tt> method to account for the platform differences when opening the details view. On iOS, you now need to open the book details view using the <tt class=" ">NavigationWindow</tt> object's <tt class=" ">openWindow()</tt> method:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function showBook(event) {</code></div>
<div class="line"><code class="plain">    var selectedBook = event.source;var args = {</code></div>
<div class="line"><code class="plain">        title: selectedBook.title,</code></div>
<div class="line"><code class="plain">        author: selectedBook.author</code></div>
<div class="line"><code class="plain">    };</code></div>
<div class="line"><code class="plain">    var bookview = Alloy.createController(</code><code class="string">"bookdetails"</code><code class="plain">, args).getView();</code></div>
<div class="line"><code class="plain"> </code><code class="keyword">if</code><code class="plain"> (OS_IOS) {</code></div>
<div class="line"><code class="plain">        $.navGroupWin.openWindow(bookview);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain"> </code><code class="keyword">if</code><code class="plain"> (OS_ANDROID) {</code></div>
<div class="line"><code class="plain">        bookview.open();</code></div>
<div class="line"><code class="plain">    }    </code></div>
<div class="line"><code class="plain">} </code></div>
</div>
</div> <p>
As you can see, in the iOS case the handler now opens the window inside <tt class=" ">navGroupWin</tt>; the Android code branch uses the same code to open the window (<tt class=" ">addview.open()</tt>).    </p>
</li><li class=" "> <p>
Save your changes and test again on an iPhone device or simulator.    </p>
</li></ol> <p>
The first screen should now display the <tt class=" ">TableView</tt> within the <tt class=" ">NavigationWindow</tt>.    </p>
<p>
<img src="images/download/attachments/37541502/navcontrol-1.png" alt="images/download/attachments/37541502/navcontrol-1.png" class="confluence-embedded-image confluence-content-image-border" width="320" />
<img src="images/download/attachments/37541502/navcontrol-2.png" alt="images/download/attachments/37541502/navcontrol-2.png" class="confluence-embedded-image" />
</p>
</div>
<div class="section section-2 " id="37541502_CreatingYourFirstTitaniumApp-Allowusertoaddbooks">
<h2 class="heading "><span>Allow user to add books</span></h2>
<p>
Of course, we need a way for users to add their own books. Like we did for the book details view, we will create a new Alloy controller composed of three files: the XML view, the JavaScript controller, and the TSS styles file.    </p>
<p>
The UI will contain two input text fields where the user enters the book title and author, and an &quot;Add&quot; button to update the books collection with the new data. To take advantage of native UI components familiar to iOS and Android users, we'll use a <a class="external-link external-link" href="#!/api/Titanium.UI.iOS.Toolbar">Toolbar</a> component on iOS and a <a class="external-link external-link" href="#!/api/Titanium.Android.Menu">Menu</a> component on Android to contain the &quot;Add&quot; button.    </p>
<p>
<strong class=" ">To create the add book feature</strong>:    </p>
<ol class=" "><li class=" "> <p>
In the Project Explorer, right-click on the project folder and select <strong class=" ">New &gt; Alloy Controller</strong>.    </p>
</li><li class=" "> <p>
In the New Controller dialog, give the controller the name <strong class=" ">addbook. </strong>Click <strong class=" ">OK</strong>.    </p>
</li><li class=" "> <p>
Open <strong class=" ">views/addbook.xml</strong> and add the following markup:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">    &lt;Window </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"container"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;View layout=</code><code class="string">"vertical"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">            &lt;TextField id=</code><code class="string">"titleInput"</code><code class="plain"> hintText=</code><code class="string">"Title..."</code><code class="plain">&gt;&lt;/TextField&gt;</code></div>
<div class="line"><code class="plain">            &lt;TextField id=</code><code class="string">"authorInput"</code><code class="plain"> hintText=</code><code class="string">"Author..."</code><code class="plain">&gt;&lt;/TextField&gt;</code></div>
<div class="line"><code class="plain">            &lt;Button id=</code><code class="string">"insertBookButton"</code><code class="plain"> onClick=</code><code class="string">"addBook"</code><code class="plain">&gt;Add&lt;/Button&gt;</code></div>
<div class="line"><code class="plain">        &lt;/View&gt;</code></div>
<div class="line"><code class="plain">    &lt;/Window&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div> <p>
This creates input text fields where the user will enter the book title and author, and a button to add the new book to the collection. The button&rsquo;s <tt class=" ">onClick</tt> handler will call the <tt class=" ">insertBook()</tt> function, which you&rsquo;ll create next.    </p>
</li><li class=" "> <p>
Open <strong class=" ">styles/addbook.tss</strong> and add <tt class=" ">backgroundColor: white</tt> to the <tt class=" ">.container</tt> class:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="string">".container"</code><code class="plain"> : {</code></div>
<div class="line"><code class="plain">  backgroundColor: </code><code class="string">'white'</code></div>
<div class="line"><code class="plain">}      </code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Open <strong class=" ">controllers/addbook.js</strong>, remove the existing code in that file and add the following:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var myBooks = Alloy.Collections.books;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
Define a new function named <tt class=" ">addBook()</tt> with the following code:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function addBook() {</code></div>
<div class="line"><code class="plain">    var book = Alloy.createModel(</code><code class="string">'books'</code><code class="plain">, {</code></div>
<div class="line"><code class="plain">        title : $.titleInput.value,</code></div>
<div class="line"><code class="plain">        author : $.authorInput.value</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain">    myBooks.add(book);</code></div>
<div class="line"><code class="plain">    book.save();</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Close the window.</code></div>
<div class="line"><code class="plain">    $.addbook.close();</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li><li class=" "> <p>
For iOS, open <strong class=" ">views/ios/index.xml</strong> and insert a <strong class=" "> <tt class=" ">&lt;Toolbar&gt;</tt> </strong> inside the <tt class=" ">&lt;Window&gt;</tt> element below the <tt class=" ">&lt;TableView&gt;</tt> element:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Toolbar bottom=</code><code class="string">"0"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;Items&gt;</code></div>
<div class="line"><code class="plain">        &lt;Button id=</code><code class="string">"add"</code><code class="plain"> title=</code><code class="string">"Add book"</code><code class="plain"> onClick=</code><code class="string">"addBook"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/Items&gt;</code></div>
<div class="line"><code class="plain">&lt;/Toolbar&gt;</code></div>
</div>
</div><pre class=" ">    </pre></li><li class=" "> <p>
For Android, open <strong class=" ">views/index.xml</strong> and add the following <strong class=" "> <tt class=" ">&lt;Menu&gt;</tt> </strong> and <strong class=" "> <tt class=" ">&lt;MenuItem&gt;</tt> </strong> elements below the <tt class=" ">&lt;TableView&gt;</tt> element:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Menu id=</code><code class="string">"menu"</code><code class="plain"> platform=</code><code class="string">"android"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    &lt;!-- Cannot specify node text.  Use attributes only. --&gt;</code></div>
<div class="line"><code class="plain">    &lt;MenuItem id=</code><code class="string">"addBook"</code></div>
<div class="line"><code class="plain">        title=</code><code class="string">"Add book"</code></div>
<div class="line"><code class="plain">        onClick=</code><code class="string">"addBook"</code></div>
<div class="line"><code class="plain">        showAsAction=</code><code class="string">"Ti.Android.SHOW_AS_ACTION_IF_ROOM"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">&lt;/Menu&gt;</code></div>
</div>
</div></li><li class=" "> <p>
Open <strong class=" ">controllers/index.js</strong> and add the following code to open the addbook controller when the appropriate native control is used.  For Android, depending on the device, the <strong class=" ">Add </strong>button can either be accessed from the Action Bar at the top of the display or by using the Menu button.  For iOS, use the toolbar at the bottom of the screen.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function addBook(){</code></div>
<div class="line"><code class="plain">    var myAddBook = Alloy.createController(</code><code class="string">"addbook"</code><code class="plain">,{}).getView();</code></div>
<div class="line"><code class="plain"> </code><code class="keyword">if</code><code class="plain"> (OS_IOS) {</code></div>
<div class="line"><code class="plain">        $.navGroupWin.openWindow(myAddBook);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain"> </code><code class="keyword">if</code><code class="plain"> (OS_ANDROID) {</code></div>
<div class="line"><code class="plain">        myAddBook.open();</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li><li class=" "> <p>
Save your changes and test on a device or emulator.    </p>
</li></ol> <p>
You should now be able to click 'Add' and add new books to the collection which persist between sessions.    </p>
</div>
</div>
<div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
</div>
</body>
</html>
