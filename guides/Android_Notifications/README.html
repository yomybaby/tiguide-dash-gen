<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Android Notifications</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="Scroll EclipseHelp Exporter" name="generator" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" media="print" />
</head>
<body>
<div class="container">
<div class="header"></div>
<div id="29004809" class="content"><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=29004809"><span>Edit</span></a>
<h1>Android Notifications</h1>
<p>
</p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-Introduction" Android_Notifications.html#29004809_AndroidNotifications-Introduction="Android_Notifications.html#29004809_AndroidNotifications-Introduction">Introduction</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-ConfigureNotificationSettings" Android_Notifications.html#29004809_AndroidNotifications-ConfigureNotificationSettings="Android_Notifications.html#29004809_AndroidNotifications-ConfigureNotificationSettings">Configure Notification Settings</a> </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-AdditionalAndroid5.0andgreateroptions" Android_Notifications.html#29004809_AndroidNotifications-AdditionalAndroid5.0andgreateroptions="Android_Notifications.html#29004809_AndroidNotifications-AdditionalAndroid5.0andgreateroptions">Additional Android 5.0 and greater options</a> </p>
</li></ul></li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-CreateaNotification" Android_Notifications.html#29004809_AndroidNotifications-CreateaNotification="Android_Notifications.html#29004809_AndroidNotifications-CreateaNotification">Create a Notification</a> </p>
<ul class="toc-indentation "><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-Basiclayout" Android_Notifications.html#29004809_AndroidNotifications-Basiclayout="Android_Notifications.html#29004809_AndroidNotifications-Basiclayout">Basic layout</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-Sound" Android_Notifications.html#29004809_AndroidNotifications-Sound="Android_Notifications.html#29004809_AndroidNotifications-Sound">Sound</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-Customlayout" Android_Notifications.html#29004809_AndroidNotifications-Customlayout="Android_Notifications.html#29004809_AndroidNotifications-Customlayout">Custom layout</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-Othercustomizations" Android_Notifications.html#29004809_AndroidNotifications-Othercustomizations="Android_Notifications.html#29004809_AndroidNotifications-Othercustomizations">Other customizations</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-Android5.0andgreatercustomizations" Android_Notifications.html#29004809_AndroidNotifications-Android5.0andgreatercustomizations="Android_Notifications.html#29004809_AndroidNotifications-Android5.0andgreatercustomizations">Android 5.0 and greater customizations</a> </p>
</li></ul></li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-SendaNotification" Android_Notifications.html#29004809_AndroidNotifications-SendaNotification="Android_Notifications.html#29004809_AndroidNotifications-SendaNotification">Send a Notification</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-UpdateaNotification" Android_Notifications.html#29004809_AndroidNotifications-UpdateaNotification="Android_Notifications.html#29004809_AndroidNotifications-UpdateaNotification">Update a Notification</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-RemoveaNotification" Android_Notifications.html#29004809_AndroidNotifications-RemoveaNotification="Android_Notifications.html#29004809_AndroidNotifications-RemoveaNotification">Remove a Notification</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-RespondtoaNotification" Android_Notifications.html#29004809_AndroidNotifications-RespondtoaNotification="Android_Notifications.html#29004809_AndroidNotifications-RespondtoaNotification">Respond to a Notification</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-ScheduleaNotification" Android_Notifications.html#29004809_AndroidNotifications-ScheduleaNotification="Android_Notifications.html#29004809_AndroidNotifications-ScheduleaNotification">Schedule a Notification</a> </p>
</li><li class=" "> <p>
<a class="document-link " href="#!/guide/Android_Notifications-section-29004809_AndroidNotifications-FurtherReading" Android_Notifications.html#29004809_AndroidNotifications-FurtherReading="Android_Notifications.html#29004809_AndroidNotifications-FurtherReading">Further Reading</a> </p>
</li></ul> <div class="section section-2 " id="29004809_AndroidNotifications-Introduction">
<h2 class="heading "><span>Introduction</span></h2>
<p>
Local notifications alert the user that something is happening to your application while it is in the background. On Android, notifications appear in the notification drawer until the user clears them and on the lock screen for devices running Android 5.0 or greater.  The application can also play a sound or vibrate to alert the user there is a new notification, customize the notification layout from the basic title, text and icon layout; and use the devices default alert settings or override them.  Note that the user can filter or turn notifications on and off from <strong class=" ">Settings</strong>.    </p>
<div class="tablewrap">
<table class="confluenceTable">
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" "> <tr>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
<img src="images/download/attachments/29004809/LockScreen.png" alt="images/download/attachments/29004809/LockScreen.png" class="confluence-embedded-image" />
</p>
<p>
Lock Screen (Android 5.0 and greater)    </p>
</td>
<td class="confluenceTd" rowspan="1" colspan="1">
<p>
<img src="images/download/attachments/29004809/NotificationCenter.png" alt="images/download/attachments/29004809/NotificationCenter.png" class="confluence-embedded-image" />
</p>
<p>
Notification Drawer    </p>
</td>
</tr>
</tbody> </table>
</div>
</div>
<div class="section section-2 " id="29004809_AndroidNotifications-ConfigureNotificationSettings">
<h2 class="heading "><span>Configure Notification Settings</span></h2>
<p>
Starting with Android 4.1, the user can turn notifications on and off per application, and on devices running Android 5.0 (API 21) and greater, decide how to filter notifications based on the visibility setting of the notification set by the application.    </p>
<p>
For devices running Android 4.1 or greater, to turn notifications on or off:    </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">Settings</strong> </p>
</li><li class=" "> <p>
Under the <strong class=" ">Device</strong> group, tap <strong class=" ">Apps</strong>.    </p>
</li><li class=" "> <p>
Tap the application you want to configure notifications for.    </p>
</li><li class=" "> <p>
Check or uncheck the <strong class=" ">Show notifications</strong> checkbox to turn notifications on or off, respectively.    </p>
</li></ol> <p>
<img src="images/download/attachments/29004809/AppInfo.png" alt="images/download/attachments/29004809/AppInfo.png" class="confluence-embedded-image confluence-content-image-border" width="270" />
</p>
<div class="section section-3 " id="29004809_AndroidNotifications-AdditionalAndroid5.0andgreateroptions">
<h3 class="heading "><span>Additional Android 5.0 and greater options</span></h3>
<p>
For devices running Android 5.0 or greater, you can also control notifications from the <strong class=" ">Sound &amp; notification</strong> screen and control the visibility of notifications in the lock screen.    </p>
<p>
<u class=" ">To turn notifications on or off</u>, or to display application notifications when the device is set to priority interruptions only:    </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">Settings</strong> </p>
</li><li class=" "> <p>
Under the <strong class=" ">Device</strong> group, tap <strong class=" ">Apps</strong>.    </p>
</li><li class=" "> <p>
Tap <strong class=" ">App notifications</strong>.    </p>
</li><li class=" "> <p>
Tap the application you want to configure notifications for.    </p>
</li><li class=" "> <p>
Tap <strong class=" ">Block</strong> to turn notifications on or off.    </p>
</li><li class=" "> <p>
Tap <strong class=" ">Priority</strong> to display notifications when the device is set to priority interruptions only.    </p>
</li></ol> <p>
<u class=" "> <img src="images/download/attachments/29004809/LollipopNotification.png" alt="images/download/attachments/29004809/LollipopNotification.png" class="confluence-embedded-image confluence-content-image-border" width="270" />
<br /></u> </p>
<p>
<u class=" ">To control the visibility of notifications in the lock screen</u>, the user must set a pattern, PIN or password, then the user will be presented the option to filter notifications:    </p>
<ol class=" "><li class=" "> <p>
Open <strong class=" ">Settings</strong> </p>
</li><li class=" "> <p>
Under the <strong class=" ">Personal</strong> group, tap <strong class=" ">Security</strong>.    </p>
</li><li class=" "> <p>
Tap <strong class=" ">Screen lock</strong>.    </p>
</li><li class=" "> <p>
Choose either <strong class=" ">Pattern</strong>, <strong class=" ">PIN</strong>, or <strong class=" ">Password</strong>.    </p>
</li><li class=" "> <p>
After you enter a pattern, pin or password, the user can filter notifications in the lock screen:    </p>
<ol class=" "><li class=" "> <p>
Select <strong class=" ">Show all notification content</strong> to always display notifications in the lock screen.    </p>
</li><li class=" "> <p>
Select <strong class=" ">Hide sensitive notification content</strong> to let the application control which notifications to display based on the <tt class=" ">visibility</tt> property.    </p>
</li><li class=" "> <p>
Select <strong class=" ">Don't show notifications at all</strong> to no display any notification in the lock screen.    </p>
</li></ol></li><li class=" "> <p>
Tap <strong class=" ">Done</strong>.    </p>
</li></ol> <p>
<img src="images/download/attachments/29004809/FilterLockScreen.png" alt="images/download/attachments/29004809/FilterLockScreen.png" class="confluence-embedded-image confluence-content-image-border" width="270" />
</p>
</div>
</div>
<div class="section section-2 " id="29004809_AndroidNotifications-CreateaNotification">
<h2 class="heading "><span>Create a Notification</span></h2>
<p>
To create a notification, use the <tt class=" ">Titanium.Android.createNotification()</tt> method.  Pass the method a dictionary of properties, which are described below.    </p>
<div class="section section-3 " id="29004809_AndroidNotifications-Basiclayout">
<h3 class="heading "><span>Basic layout</span></h3>
<p>
By default, a notification contains an icon, title, message, and an optional timestamp and badge number.    </p>
<p>
<img src="images/download/attachments/29004809/AnnotatedNotification.png" alt="images/download/attachments/29004809/AnnotatedNotification.png" class="confluence-embedded-image" width="500" />
</p>
<p>
Specify the following properties to modify the basic layout of the notification:    </p>
<ul class=" "><li class="p1 "> <p>
<tt class=" ">contentIntent</tt>: Intent to execute if the user taps the notification.  By default without an intent attached to the notification, if the user taps on a notification, it does nothing and stays in the notification drawer.  See the <i class=" ">Respond to a Notification </i>section for further details.<tt class=" "></tt> </p>
</li><li class="p1 "> <p>
<tt class=" ">contentText</tt>: message displayed in the notification.    </p>
</li><li class="p1 "> <p>
<tt class=" ">contentTitle</tt>: Title of the notification.    </p>
</li><li class="p1 "> <p>
<tt class=" ">icon</tt>: Image file to display in the notification. Place the image file in either:    </p>
<ul class=" "><li class="p1 "> <p>
a density-specific folder (or use <tt class=" ">res-nodpi</tt> for all densities) in <tt class=" ">/app/assets/android/images</tt> for Alloy project or <tt class=" ">/Resources/android/images/</tt> for Classic projects, then reference the image file using only the <tt class=" ">/images</tt> path, for example, <tt class=" ">/images/filename.png</tt>.    </p>
</li><li class="p1 "> <p>
the <tt class=" ">/platform/android/res/drawable/</tt> folder and reference the image file by removing its extension and prefixing it with the <tt class=" ">Ti.App.Android.R.drawable</tt> namespace, for example, <tt class=" ">Ti.App.Android.R.drawable.filename</tt>.    </p>
</li></ul></li><li class="p1 "> <p>
<tt class=" ">number</tt>: Badge number to display in the notification.    </p>
</li><li class="p1 "> <p>
<tt class=" ">when</tt>: Timestamp to display in the notification.  Does NOT schedule the notification.    </p>
</li></ul> <p class="p1">
For example, the code below creates the notification pictured above.  A blank intent is attached to the notification, so when the user taps the notification, it will be removed from the drawer.  Note that by default, the notification's <tt class=" ">flags</tt> property (see description in the <i class=" ">Other customizations</i> section) is set to <tt class=" ">Titanium.Android.FLAG_AUTO_CANCEL</tt>, which automatically clears a notification when the intent is executed.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var notification = Titanium.Android.createNotification({</code></div>
<div class="line"><code class="plain">    contentTitle: </code><code class="string">'Notification 2'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    contentText : </code><code class="string">'Just another notification'</code><code class="plain">,</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Blank intent that will remove the notification when the user taps it</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Do not override the default value of the 'flags' property</code></div>
<div class="line"><code class="plain">    contentIntent: Ti.Android.createPendingIntent({intent: Ti.Android.createIntent({})}),</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Image file located at /platform/android/res/drawable/warn.png</code></div>
<div class="line"><code class="plain">    icon: Ti.App.Android.R.drawable.warn,</code></div>
<div class="line"><code class="plain">    number: </code><code class="value">5</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    when: </code><code class="keyword">new</code><code class="plain"> Date()</code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div> </div>
<div class="section section-3 p1" id="29004809_AndroidNotifications-Sound">
<h3 class="heading p1"><span>Sound</span></h3>
<p>
To play a sound when the notification first appears, assign the <tt class=" ">Notification</tt> object's <tt class=" ">sound</tt> property a sound file to play. Place the file in the <tt class=" ">/platform/android/res/raw/</tt> folder.  Reference the file by using the <tt class=" ">Ti.Filesystem.getResRawDirectory()</tt> method to retrieve the location of the file, then append the filename to the end, for example, <tt class=" ">Ti.Filesystem.getResRawDirectory() + 'sound.wav'</tt>.    </p>
<p>
By default, the sound plays each time the application calls the <tt class=" ">notify()</tt> method.  To override this behavior, add the <tt class=" ">Titanium.Android.FLAG_ONLY_ALERT_ONCE</tt> constant to the <tt class=" ">Notification</tt> object's <tt class=" ">flags</tt> property.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var notification = Titanium.Android.createNotification({</code></div>
<div class="line"><code class="plain">    contentTitle: </code><code class="string">'Notification 2'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    contentText : </code><code class="string">'Just another notification'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    contentIntent: Ti.Android.createPendingIntent({intent: Ti.Android.createIntent({})}),</code></div>
<div class="line"><code class="plain">    icon: Ti.App.Android.R.drawable.warn,</code></div>
<div class="line"><code class="plain">    number: </code><code class="value">5</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    when: </code><code class="keyword">new</code><code class="plain"> Date().getTime(),</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Sound file located at /platform/android/res/raw/sound.wav</code></div>
<div class="line"><code class="plain">	sound: Ti.Filesystem.getResRawDirectory() + </code><code class="string">'sound.wav'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div> </div>
<div class="section section-3 p1" id="29004809_AndroidNotifications-Customlayout">
<h3 class="heading p1"><span>Custom layout</span></h3>
<p>
To use a custom layout for a notification:    </p>
<ol class=" "><li class=" "> <p>
<a class="external-link external-link" href="http://developer.android.com/guide/topics/ui/declaring-layout.html" target="_blank">Create an Android XML Layout</a> and save it to <tt class=" ">/platform/android/res/layout/</tt>.    </p>
</li><li class=" "> <p>
Create a <tt class=" ">Titanium.Android.RemoteViews</tt> object using the XML layout.  Reference the layout file by removing the file extension and prefixing it with the <tt class=" ">Titanium.App.Android.R.layout</tt> namespace.  Once the <tt class=" ">RemoteViews</tt> object is created, you can modify its layout or bind intents by calling other <tt class=" ">RemoteViews</tt> methods on the object.    </p>
</li><li class=" "> <p>
Assign the <tt class=" ">RemoteViews</tt> object to the <tt class=" ">Notification</tt> object's <tt class=" ">contentView</tt> property.    </p>
</li></ol> <p>
</p>
<div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
<p>
If the application calls the <tt class=" ">setLatestEventInfo()</tt> method or sets either the <tt class=" ">contentTitle</tt> or <tt class=" ">contentText</tt> properties, the notification will use the default basic layout even if the <tt class=" ">contentView</tt> property is set.    </p>
</div>
<p>
</p>
<p>
<strong class=" ">Example</strong> </p>
<p>
To create the following notification that displays a message with two buttons:    </p>
<p>
<img src="images/download/attachments/29004809/CustomNotification.png" alt="images/download/attachments/29004809/CustomNotification.png" class="confluence-embedded-image" />
</p>
<ol class=" "><li class=" "> <p>
Create an XML layout that uses a <tt class=" ">LinearLayout</tt> to display a <tt class=" ">TextView</tt> and two <tt class=" ">Button</tt> widgets:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">/platform/android/res/layout/customview.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;?xml version=</code><code class="string">"1.0"</code><code class="plain"> encoding=</code><code class="string">"utf-8"</code><code class="plain">?&gt;</code></div>
<div class="line"><code class="plain">&lt;LinearLayout xmlns:android=</code><code class="string">"http://schemas.android.com/apk/res/android"</code></div>
<div class="line"><code class="plain">              android:layout_width=</code><code class="string">"match_parent"</code></div>
<div class="line"><code class="plain">              android:layout_height=</code><code class="string">"match_parent"</code></div>
<div class="line"><code class="plain">              android:orientation=</code><code class="string">"horizontal"</code><code class="plain"> &gt;</code></div>
<div class="line"><code class="plain">    &lt;TextView android:id=</code><code class="string">"@+id/message"</code></div>
<div class="line"><code class="plain">              android:layout_width=</code><code class="string">"wrap_content"</code></div>
<div class="line"><code class="plain">              android:layout_height=</code><code class="string">"wrap_content"</code></div>
<div class="line"><code class="plain">              android:textSize=</code><code class="string">"18dp"</code></div>
<div class="line"><code class="plain">              android:text=</code><code class="string">"Default text"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">    &lt;Button android:id=</code><code class="string">"@+id/okbutton"</code></div>
<div class="line"><code class="plain">            android:layout_width=</code><code class="string">"wrap_content"</code></div>
<div class="line"><code class="plain">            android:layout_height=</code><code class="string">"wrap_content"</code></div>
<div class="line"><code class="plain">            android:text=</code><code class="string">"OK"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">    &lt;Button android:id=</code><code class="string">"@+id/cancelbutton"</code></div>
<div class="line"><code class="plain">            android:layout_width=</code><code class="string">"wrap_content"</code></div>
<div class="line"><code class="plain">            android:layout_height=</code><code class="string">"wrap_content"</code></div>
<div class="line"><code class="plain">            android:text=</code><code class="string">"Cancel"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">&lt;/LinearLayout&gt;</code></div>
</div>
</div></li><li class=" "> <p>
In the application, create a <tt class=" ">RemoteViews</tt> object using the XML layout as a reference, then modify the <tt class=" ">RemoteViews</tt> by changing the default text and binding <tt class=" ">PendingIntents</tt> to the buttons:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">/Resources/app.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var customView = Ti.Android.createRemoteViews({</code></div>
<div class="line"><code class="plain">    layoutId: Ti.App.Android.R.layout.customview</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="comments">// Reference elements in the layout by prefixing the IDs with 'Ti.App.Android.R.id'</code></div>
<div class="line"><code class="plain">customView.setTextViewText(Ti.App.Android.R.id.message, </code><code class="string">"Update available!"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">customView.setTextViewText(Ti.App.Android.R.id.okbutton, </code><code class="string">"Download"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">customView.setOnClickPendingIntent(Ti.App.Android.R.id.okbutton, downnloadIntent);</code></div>
<div class="line"><code class="plain">customView.setTextViewText(Ti.App.Android.R.id.cancelbutton, </code><code class="string">"Not now"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">customView.setOnClickPendingIntent(Ti.App.Android.R.id.cancelbutton, cancelIntent);</code></div>
</div>
</div></li><li class=" "> <p>
Finally, assign the <tt class=" ">RemoteViews</tt> object to the <tt class=" ">Notification</tt> object's <tt class=" ">contentView</tt> property.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">/Resources/app.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var notification = Titanium.Android.createNotification({contentView: customView});</code></div>
</div>
</div></li></ol> </div>
<div class="section section-3 p1" id="29004809_AndroidNotifications-Othercustomizations">
<h3 class="heading p1"><span>Other customizations</span></h3>
<ul class=" "><li class="p1 "> <p>
<tt class=" ">defaults</tt>: Set to one of the following constants or bitwise-OR the values together to use the device's default notification settings:    </p>
<ul class=" "><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.DEFAULT_ALL</tt>: Use all of the device's default settings.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.DEFAULT_SOUND</tt>: Use the device's default notification sound.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.DEFAULT_VIBRATE</tt>: Use the device's default vibrate setting.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.DEFAULT_LIGHTS</tt>: Use the device's default LED setting.    </p>
</li></ul></li><li class="p1 "> <p>
<tt class=" ">deleteIntent</tt>: Intent to execute if the user taps the clear all notifications button in the notification drawer.    </p>
</li><li class="p1 "> <p>
<tt class=" ">flags</tt>: Additional flags to set on the notification to modify its behavior.  Set to one of the following constants or     <span style="color: #000000;">
bitwise    </span>
-OR the constants together:    </p>
<ul class=" "><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.FLAG_AUTO_CANCEL</tt>: Clear the notification if the user taps it. Requires that the <tt class=" ">contentIntent</tt> property to be set or else the notification will not be cleared.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.FLAG_INSISTENT</tt>: Repeat the sound until the notification is canceled or removed from the notification drawer.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.FLAG_NO_CLEAR</tt>: Do not remove the notification from the notification drawer if the user taps the remove all notification button.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.FLAG_ONGOING_EVENT</tt>: Indicates if the notification is in reference to an ongoing event.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.FLAG_ONLY_ALERT_ONCE</tt>: If the notification is present in the notification drawer, do no replay the sound, vibrate or flash the LED again.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.FLAG_SHOW_LIGHTS</tt>: Set if you want to use the LED with the notification.  Need to also set the notification's LED properties.  Note that most devices will not allow you to control the LED.    </p>
</li></ul></li><li class="p1 "> <p>
<tt class=" ">priority</tt>: set to one of the following constants to determine where the notification is displayed in the drawer.  Requires Titanium SDK 3.6.0 and greater and only works on devices running Android 4.1 and greater.    </p>
<ul class=" "><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.PRIORITY_MAX</tt>: Use for urgent or time-critical notifications, for example, turn-by-turn directions or emergency alerts.  Notifications will appear at the very top of the notification drawer.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.PRIORITY_HIGH</tt>: Use for high priority notifications like real-time chat messages.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.PRIORITY_DEFAULT</tt>: Default priority if it does no fit into another priority category.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.PRIORITY_LOW</tt>: Use for low priority notifications like software updates.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.PRIORITY_MIN</tt>: Use for expired events.  Note that the user will not be alerted to the notification (sound, vibration, etc.) and a notification icon will not appear in the status bar, but the notification will appear in the drawer.    </p>
</li></ul></li><li class="p1 "> <p>
<tt class=" ">tickerText</tt>: Text to display in the status bar when the notification first appears.    </p>
</li></ul> </div>
<div class="section section-3 p1" id="29004809_AndroidNotifications-Android5.0andgreatercustomizations">
<h3 class="heading p1"><span>Android 5.0 and greater customizations</span></h3>
<p>
The following properties are available for devices running Android 5.0 and greater and requires Titanium SDK 3.6.0 and greater:    </p>
<ul class=" "><li class="p1 "> <p>
<tt class=" ">category</tt>: Set to one of the following constants if the notification falls into one of the pre-defined notification categories.  Android uses the category to determine where and how it should be displayed.    </p>
<ul class=" "><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_ALARM</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_CALL</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_EMAIL</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_ERROR</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_EVENT</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_MESSAGE</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_PROGRESS</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_PROMO</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_RECOMMENDATION</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_SERVICE</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_SOCIAL</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_STATUS</tt> </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.CATEGORY_TRANSPORT</tt> </p>
</li></ul></li><li class="p1 "> <p>
<tt class=" ">visibility</tt>: Set to one of the following constants to filter notifications in the lock screen:    </p>
<ul class=" "><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.VISIBILITY_PUBLIC</tt>: All information is displayed in the lock screen.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.VISIBILITY_PRIVATE</tt>: Only the application name and icon appear in the lock screen with the message: &quot;Contents hidden&quot;.    </p>
</li><li class="p1 "> <p class="p1">
<tt class=" ">Titanium.Android.VISIBILITY_SECRET</tt>: The notification is not displayed in the lock screen.    </p>
</li></ul></li></ul> </div>
</div>
<div class="section section-2 p1" id="29004809_AndroidNotifications-SendaNotification">
<h2 class="heading p1"><span>Send a Notification</span></h2>
<p>
To send a notification, use the <tt class=" ">Titanium.Android.NotificationManager.notify()</tt> method.  Pass the method a numeric ID as the first argument to identify it if it needs to be removed and the notification object as the second argument.  This method sends the notification immediately.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">Ti.Android.NotificationManager.notify(</code><code class="value">1</code><code class="plain">, notification);</code></div>
<div class="line"><code class="comments">// Pass '1' to the Titanium.Android.NotificationManager.cancel method if you need to clear the notification programmatically</code></div>
</div>
</div> <p>
</p>
</div>
<div class="section section-2 " id="29004809_AndroidNotifications-UpdateaNotification">
<h2 class="heading "><span>Update a Notification</span></h2>
<p>
To update a notification that is currently being displayed, use the <tt class=" ">Notification</tt> object's <a class="external-link external-link" href="#!/api/Titanium.Android.Notification-method-setLatestEventInfo"><tt class=" ">setLatestEventInfo()</tt></a> method.  Pass the method an updated or the existing title, message and intent.  You need to pass the method all three parameters.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Update the title and message but keep the existing intent</code></div>
<div class="line"><code class="plain">notification.setLatestEventInfo(</code><code class="string">'Wake me up'</code><code class="plain">, </code><code class="string">'Before you go go'</code><code class="plain">, notification.contentIntent);</code></div>
</div>
</div> </div>
<div class="section section-2 " id="29004809_AndroidNotifications-RemoveaNotification">
<h2 class="heading "><span>Remove a Notification</span></h2>
<p>
If the application needs to remove a notification it sent from the notification drawer, it can either selectively choose which notification(s) to remove or remove all previously sent notifications.    </p>
<p>
<strong class=" ">To remove all notifications</strong>, call the <tt class=" ">Titanium.Android.NotificationManager.cancelAll()</tt> method.    </p>
<p>
<strong class=" ">To remove a specific notification</strong>, call the <tt class=" ">Titanium.Android.NotificationManager.cancel()</tt> method and pass it the ID that was assigned to it by the <tt class=" ">Titanium.Android.NotificationManager.notify()</tt> call.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Remove all notifications sent by the application</code></div>
<div class="line"><code class="plain">Titanium.Android.NotificationManager.cancelAll();</code></div>
<div class="line"><code class="comments">// Remove a specific notification sent by the application</code></div>
<div class="line"><code class="plain">Titanium.Android.NotificationManager.cancel(</code><code class="value">1</code><code class="plain">);</code></div>
</div>
</div> </div>
<div class="section section-2 " id="29004809_AndroidNotifications-RespondtoaNotification">
<h2 class="heading "><span>Respond to a Notification</span></h2>
<p>
By default, when a user taps a notification, it does nothing.  In order to perform an action when the user taps the notification, assign a <tt class=" ">Titanium.Android.PendingIntent</tt> object to the Notification's <tt class=" ">contentIntent</tt> property.  For more information about Intents, see <a class="document-link " href="#!/guide/Android_Intents" Android_Intents.html="Android_Intents.html">Android Intents</a>.    </p>
<p>
For example, if you want to launch the application when the user taps the notification, the application needs to create an intent that launches the main activity of your application.  To create an Intent, use the <tt class=" ">Titanium.Android.createIntent()</tt> method and pass the method a dictionary with the following properties:    </p>
<ul class=" "><li class=" "> <p>
<tt class=" ">action</tt>: Assign it a <tt class=" ">Titanium.Android.ACTION_*</tt> constant which specifies the action to execute.  For this example, assign it <tt class=" ">Ti.Android.ACTION_MAIN</tt> to launch the main activity.    </p>
</li><li class=" "> <p>
<tt class=" ">className</tt>:  Name of the main activity of the application prefixed with project's application ID (or <tt class=" ">packageName</tt>).  The name of the main activity is the name of the application/project with only the first letter capitalized and <tt class=" ">Activity</tt> appended to the end of it.  For example, if the name of the project is <tt class=" ">MyApp</tt> and the application ID is <tt class=" ">com.appcelerator.testapp</tt>, the class name will be <tt class=" ">com.appcelerator.testapp.MyappActivity</tt>.  You can also find the name of the main activity in the <tt class=" ">build/android/AndroidManifest.xml</tt> file after you build your application.    </p>
</li><li class=" "> <p>
<tt class=" ">packageName</tt>: Project's application ID located in the <tt class=" ">tiapp.xml</tt> file.    </p>
</li></ul> <p>
After creating an <tt class=" ">Intent</tt>, modify its flags by bitwise-OR-ing the <tt class=" ">Ti.Android.FLAG_ACTIVITY_SINGLE_TOP</tt> and <tt class=" ">Ti.Android.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED</tt> constants.  These constants tell the intent not to launch the application if it is already open and resets the activity to its initial state if needed, respectively.    </p>
<p>
Use the intent's <tt class=" ">addCategory()</tt> method to add the <tt class=" ">Ti.Android.CATEGORY_LAUNCHER</tt> category to indicate that the activity should be launched in the foreground.    </p>
<p>
Pass the intent to the <a class="external-link external-link" href="#!/api/Titanium.Android-method-createPendingIntent"><tt class=" ">Titanium.Android.</tt><tt class=" ">createPendingIntent()</tt></a> method to create a <tt class=" ">PendingIntent</tt>, which can be assigned to the Notification's <tt class=" ">contentIntent</tt> property.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var intent = Ti.Android.createIntent({</code></div>
<div class="line"><code class="plain">    action: Ti.Android.ACTION_MAIN,</code></div>
<div class="line"><code class="plain">    className: </code><code class="string">'com.appcelerator.testapp.MyappActivity'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    packageName: </code><code class="string">'com.appcelerator.testapp'</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">intent.flags |= Ti.Android.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED | Ti.Android.FLAG_ACTIVITY_SINGLE_TOP;</code></div>
<div class="line"><code class="plain">intent.addCategory(Ti.Android.CATEGORY_LAUNCHER);</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">notification.contentIntent = Ti.Android.createPendingIntent({intent: intent});</code></div>
</div>
</div> </div>
<div class="section section-2 " id="29004809_AndroidNotifications-ScheduleaNotification">
<h2 class="heading "><span>Schedule a Notification</span></h2>
<p>
To schedule a notification in the future, the application can create an Android service using a JavaScript context.  The service runs in the background at a regular intervals.  The service will need to wait for the appropriate time to create and send the notification allowing the notification to be sent while the application is in the background.  For more information about Android Services, see <a class="document-link " href="#!/guide/Simple_Android_Services_in_Titanium" Simple_Android_Services_in_Titanium.html="Simple_Android_Services_in_Titanium.html">Simple Android Services in Titanium</a>.    </p>
<div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
<p>
The service may stop if the application is killed by either backing out of the application or if the application is removed from the recent apps tray.    </p>
</div>
<p>
To create a service that sends a notification at a specific time:    </p>
<ol class=" "><li class=" "> <p>
In a separate JavaScript file, code the creation of the notification.  After the notification is sent, be sure to stop the service since it will no longer be needed and to stop it from sending the same notification again.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Resources/ExampleService.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Retrieves a reference to the service and its intent</code></div>
<div class="line"><code class="plain">var service = Ti.Android.currentService,</code></div>
<div class="line"><code class="plain">    serviceIntent = service.getIntent(),</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Information passed in from the intent</code></div>
<div class="line"><code class="plain">    timestamp = </code><code class="keyword">new</code><code class="plain"> Date(serviceIntent.getStringExtra(</code><code class="string">'timestamp'</code><code class="plain">));</code></div>
<div class="line"><code class="comments">// Wait for right moment to create and send the notification</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">new</code><code class="plain"> Date() &gt; timestamp) {</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Create a notification</code></div>
<div class="line"><code class="plain">    var notification = Ti.Android.createNotification({...});</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Send the notification</code></div>
<div class="line"><code class="plain">    Ti.Android.NotificationManager.notify(</code><code class="value">1</code><code class="plain">, notification);</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Stop the service once the notification is sent</code></div>
<div class="line"><code class="plain">    Ti.Android.stopService(serviceIntent);</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li><li class=" "> <p>
Add the <tt class=" ">&lt;services&gt;</tt> tag to the <tt class=" ">&lt;android&gt;</tt> section of the <tt class=" ">tiapp.xml</tt> and add a <tt class=" ">&lt;service&gt;</tt> tag as a child of the <tt class=" ">&lt;services&gt;</tt> tag.  In the <tt class=" ">&lt;service&gt;</tt> tag, assign the <tt class=" ">type</tt> attribute to <tt class=" ">interval</tt> to indicate the service runs at regular intervals and the <tt class=" ">url</tt> attribute to the JavaScript file the application needs to run as a service.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">tiapp.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;ti:app&gt; </code></div>
<div class="line"><code class="plain">    &lt;android xmlns:android=</code><code class="string">"http://schemas.android.com/apk/res/android"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;!-- the services tag must be added so that our service will run --&gt;</code></div>
<div class="line"><code class="plain">        &lt;services&gt;</code></div>
<div class="line"><code class="plain">            &lt;service url=</code><code class="string">"ExampleService.js"</code><code class="plain"> type=</code><code class="string">"interval"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">        &lt;/services&gt;</code></div>
<div class="line"><code class="plain">    &lt;/android&gt;</code></div>
<div class="line"><code class="plain">&lt;/ti:app&gt;</code></div>
</div>
</div></li><li class=" "> <p>
In the main application, create an intent by assigning the JavaScript file to the Intent's <tt class=" ">url</tt> property and start the service by passing the intent to the <tt class=" ">Titanium.Android.startService</tt><tt class=" ">()</tt> method.  The application needs to set the interval for the service by using the Intent object's <tt class=" ">putExtra()</tt> method.  You can also use this method to pass in data to the service.  Pass the method the property name as the first argument and a value as the second argument.  To set the service interval, set the property name to <tt class=" ">interval</tt> and the value to how often to call the service in milliseconds.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Resources/app.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Create an intent using the JavaScript service file</code></div>
<div class="line"><code class="plain">var intent = Ti.Android.createServiceIntent({</code></div>
<div class="line"><code class="plain">    url : </code><code class="string">'ExampleService.js'</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="comments">// Set the interval to run the service; set to five seconds in this example</code></div>
<div class="line"><code class="plain">intent.putExtra(</code><code class="string">'interval'</code><code class="plain">, </code><code class="value">5000</code><code class="plain">);</code></div>
<div class="line"><code class="comments">// Send extra data to the service; send the notification 30 seconds from now in this example</code></div>
<div class="line"><code class="plain">intent.putExtra(</code><code class="string">'timestamp'</code><code class="plain">, </code><code class="keyword">new</code><code class="plain"> Date(</code><code class="keyword">new</code><code class="plain"> Date().getTime() + </code><code class="value">30</code><code class="plain"> * </code><code class="value">1000</code><code class="plain">));</code></div>
<div class="line"><code class="comments">// Start the service</code></div>
<div class="line"><code class="plain">Ti.Android.startService(intent);</code></div>
</div>
</div></li></ol> <p>
<strong class=" ">Example</strong> </p>
<p>
In the following example, the main application passes the message and title of the notification to the service as well as when to send it.  The service waits until the right moment to create and send the notification, then stops itself.  Note that the service can only send one notification.  The application can launch more service instances but all of them will be stopped when the first notification is sent.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Resources/app.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var win = Ti.UI.createWindow();</code></div>
<div class="line"><code class="plain">var btn = Ti.UI.createButton({</code></div>
<div class="line"><code class="plain">    title : </code><code class="string">'Add Notification'</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">btn.addEventListener(</code><code class="string">'click'</code><code class="plain">, function(e) {</code></div>
<div class="line"><code class="plain">    var intent = Ti.Android.createServiceIntent({</code></div>
<div class="line"><code class="plain">        url : </code><code class="string">'ExampleService.js'</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain">    intent.putExtra(</code><code class="string">'title'</code><code class="plain"> , </code><code class="string">'Richard III'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    intent.putExtra(</code><code class="string">'message'</code><code class="plain"> , </code><code class="string">'Now is the winter of our discontent...'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    intent.putExtra(</code><code class="string">'timestamp'</code><code class="plain">, </code><code class="keyword">new</code><code class="plain"> Date(</code><code class="keyword">new</code><code class="plain"> Date().getTime() + </code><code class="value">30</code><code class="plain"> * </code><code class="value">1000</code><code class="plain">));</code></div>
<div class="line"><code class="plain">    intent.putExtra(</code><code class="string">'interval'</code><code class="plain">, </code><code class="value">5000</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    Ti.Android.startService(intent);</code></div>
<div class="line"><code class="plain">});</code></div>
<div class="line"><code class="plain">win.add(btn);</code></div>
<div class="line"><code class="plain">win.open(); </code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Resources/ExampleService.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var service = Ti.Android.currentService;</code></div>
<div class="line"><code class="plain">var serviceIntent = service.getIntent();</code></div>
<div class="line"><code class="plain">var timestamp = </code><code class="keyword">new</code><code class="plain"> Date(serviceIntent.getStringExtra(</code><code class="string">'timestamp'</code><code class="plain">));</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">new</code><code class="plain"> Date() &gt; timestamp) {</code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Grab extra data sent with the intent</code></div>
<div class="line"><code class="plain">    var title = serviceIntent.getStringExtra(</code><code class="string">'title'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    var message = serviceIntent.getStringExtra(</code><code class="string">'message'</code><code class="plain">);</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Create an intent that launches the application</code></div>
<div class="line"><code class="plain">    var intent = Ti.Android.createIntent({</code></div>
<div class="line"><code class="plain">        action : Ti.Android.ACTION_MAIN,</code></div>
<div class="line"><code class="plain">        className: </code><code class="string">'com.appcelerator.testapp.MyappActivity'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        packageName: </code><code class="string">'com.appcelerator.testapp'</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain">    intent.flags |= Ti.Android.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED | Ti.Android.FLAG_ACTIVITY_SINGLE_TOP;</code></div>
<div class="line"><code class="plain">    intent.addCategory(Ti.Android.CATEGORY_LAUNCHER);</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Create notification</code></div>
<div class="line"><code class="plain">    var notification = Ti.Android.createNotification({</code></div>
<div class="line"><code class="plain">        contentIntent : Ti.Android.createPendingIntent({intent : intent}),</code></div>
<div class="line"><code class="plain">        contentTitle : title,</code></div>
<div class="line"><code class="plain">        contentText : message,</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Send the notification</code></div>
<div class="line"><code class="plain">    Ti.Android.NotificationManager.notify(</code><code class="value">1</code><code class="plain">, notification);</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain"> </code><code class="comments">// Stop the service once the notification is sent</code></div>
<div class="line"><code class="plain">    Ti.Android.stopService(serviceIntent);</code></div>
<div class="line"><code class="plain">} </code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">tiapp.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;ti:app&gt; </code></div>
<div class="line"><code class="plain">    &lt;android xmlns:android=</code><code class="string">"http://schemas.android.com/apk/res/android"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">        &lt;!-- the services tag must be added so that our service will run --&gt;</code></div>
<div class="line"><code class="plain">        &lt;services&gt;</code></div>
<div class="line"><code class="plain">            &lt;service url=</code><code class="string">"ExampleService.js"</code><code class="plain"> type=</code><code class="string">"interval"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">        &lt;/services&gt;</code></div>
<div class="line"><code class="plain">    &lt;/android&gt;</code></div>
<div class="line"><code class="plain">&lt;/ti:app&gt;</code></div>
</div>
</div> <p>
</p>
</div>
<div class="section section-2 " id="29004809_AndroidNotifications-FurtherReading">
<h2 class="heading "><span>Further Reading</span></h2>
<p>
<a class="external-link external-link" href="http://developer.android.com/design/patterns/notifications.html" target="_blank">Android Developers: Notifications</a> </p>
<p>
<a class="external-link external-link" href="#!/api/Titanium.Android.Notification">Titanium.Android.Notification API Reference</a> </p>
</div>
</div>
<div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
</div>
</body>
</html>
